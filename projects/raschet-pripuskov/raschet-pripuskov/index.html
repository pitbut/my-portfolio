<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–†–∞—Å—á–µ—Ç –ø—Ä–∏–ø—É—Å–∫–æ–≤ –Ω–∞ –º–µ—Ö–∞–Ω–∏—á–µ—Å–∫—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            animation: fadeInDown 0.6s ease;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            margin-bottom: 20px;
            animation: fadeInUp 0.6s ease;
        }

        .steps {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
            position: relative;
        }

        .step {
            flex: 1;
            text-align: center;
            position: relative;
            padding: 15px 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .step::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 3px;
            background: #e0e0e0;
            z-index: 1;
            transform: translateY(-50%);
        }

        .step:first-child::before {
            left: 50%;
        }

        .step:last-child::before {
            right: 50%;
        }

        .step-number {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #e0e0e0;
            color: #999;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 10px;
            font-weight: bold;
            position: relative;
            z-index: 2;
            transition: all 0.3s;
        }

        .step.active .step-number {
            background: #2a5298;
            color: white;
            transform: scale(1.1);
        }

        .step.completed .step-number {
            background: #4caf50;
            color: white;
        }

        .step.completed::before,
        .step.active::before {
            background: #2a5298;
        }

        .step-label {
            font-size: 0.9em;
            color: #666;
            font-weight: 500;
        }

        .step.active .step-label {
            color: #2a5298;
            font-weight: 600;
        }

        .step-content {
            display: none;
        }

        .step-content.active {
            display: block;
            animation: fadeIn 0.4s ease;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }

        select, input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1em;
            transition: all 0.3s;
        }

        select:focus, input:focus {
            outline: none;
            border-color: #2a5298;
            box-shadow: 0 0 0 3px rgba(42, 82, 152, 0.1);
        }

        .transitions-container {
            display: grid;
            gap: 15px;
        }

        .transition-item {
            background: #f8f9fa;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 15px;
            transition: all 0.3s;
        }

        .transition-item:hover {
            border-color: #2a5298;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .transition-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .transition-number {
            background: #2a5298;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .remove-transition {
            background: #f44336;
            color: white;
            border: none;
            padding: 5px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s;
        }

        .remove-transition:hover {
            background: #d32f2f;
            transform: scale(1.05);
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn-primary {
            background: #2a5298;
            color: white;
        }

        .btn-primary:hover {
            background: #1e3c72;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(42, 82, 152, 0.3);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
            transform: translateY(-2px);
        }

        .btn-success {
            background: #4caf50;
            color: white;
        }

        .btn-success:hover {
            background: #45a049;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.3);
        }

        .btn-add {
            background: #17a2b8;
            color: white;
            width: 100%;
            margin-top: 10px;
        }

        .btn-add:hover {
            background: #138496;
        }

        .button-group {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }

        .result-section {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }

        .result-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
        }

        .result-table th,
        .result-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }

        .result-table th {
            background: #2a5298;
            color: white;
            font-weight: 600;
        }

        .result-table tr:last-child td {
            border-bottom: none;
        }

        .result-table tr:hover {
            background: #f8f9fa;
        }

        .calculation-details {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
        }

        .calculation-details h3 {
            color: #2a5298;
            margin-bottom: 15px;
        }

        .formula {
            background: #f8f9fa;
            padding: 15px;
            border-left: 4px solid #2a5298;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
        }

        .info-box {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .info-box h4 {
            color: #1976d2;
            margin-bottom: 10px;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @media (max-width: 768px) {
            .steps {
                flex-direction: column;
            }

            .step::before {
                display: none;
            }

            .button-group {
                flex-direction: column;
            }

            header h1 {
                font-size: 1.8em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>‚öôÔ∏è –†–∞—Å—á–µ—Ç –ø—Ä–∏–ø—É—Å–∫–æ–≤ –Ω–∞ –º–µ—Ö–∞–Ω–∏—á–µ—Å–∫—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É</h1>
            <p>–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç –ø–æ –ì–û–°–¢ —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –æ—Ç—á–µ—Ç–æ–º</p>
        </header>

        <div class="card">
            <div class="steps">
                <div class="step active" data-step="1">
                    <div class="step-number">1</div>
                    <div class="step-label">–¢–∏–ø –∑–∞–≥–æ—Ç–æ–≤–∫–∏</div>
                </div>
                <div class="step" data-step="2">
                    <div class="step-number">2</div>
                    <div class="step-label">–ü–µ—Ä–µ—Ö–æ–¥—ã</div>
                </div>
                <div class="step" data-step="3">
                    <div class="step-number">3</div>
                    <div class="step-label">–†–∞–∑–º–µ—Ä—ã</div>
                </div>
                <div class="step" data-step="4">
                    <div class="step-number">4</div>
                    <div class="step-label">–†–µ–∑—É–ª—å—Ç–∞—Ç</div>
                </div>
            </div>

            <!-- –®–∞–≥ 1: –í—ã–±–æ—Ä —Ç–∏–ø–∞ –∑–∞–≥–æ—Ç–æ–≤–∫–∏ -->
            <div class="step-content active" data-step="1">
                <h2>–í—ã–±–æ—Ä —Ç–∏–ø–∞ –∑–∞–≥–æ—Ç–æ–≤–∫–∏</h2>
                <div class="info-box">
                    <h4>‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h4>
                    <p>–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –∑–∞–≥–æ—Ç–æ–≤–∫–∏ –∏ –º–µ—Ç–æ–¥ –µ—ë –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è. –≠—Ç–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç –Ω–∞—á–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–∞—á–µ—Å—Ç–≤–∞ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ (Rz –∏ T).</p>
                </div>

                <div class="form-group">
                    <label>–¢–∏–ø –∑–∞–≥–æ—Ç–æ–≤–∫–∏:</label>
                    <select id="blankType">
                        <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø --</option>
                        <option value="casting_sand">–õ–∏—Ç—å–µ –≤ –ø–µ—Å—á–∞–Ω—ã–µ —Ñ–æ—Ä–º—ã</option>
                        <option value="casting_mold">–õ–∏—Ç—å–µ –≤ –∫–æ–∫–∏–ª—å/—Ü–µ–Ω—Ç—Ä–æ–±–µ–∂–Ω–æ–µ</option>
                        <option value="casting_shell">–õ–∏—Ç—å–µ –≤ –æ–±–æ–ª–æ—á–∫–æ–≤—ã–µ —Ñ–æ—Ä–º—ã</option>
                        <option value="casting_wax">–õ–∏—Ç—å–µ –ø–æ –≤—ã–ø–ª–∞–≤–ª—è–µ–º—ã–º –º–æ–¥–µ–ª—è–º</option>
                        <option value="casting_pressure">–õ–∏—Ç—å–µ –ø–æ–¥ –¥–∞–≤–ª–µ–Ω–∏–µ–º</option>
                        <option value="forging_hammer">–ö–æ–≤–∫–∞ –Ω–∞ –º–æ–ª–æ—Ç–∞—Ö</option>
                        <option value="forging_press">–®—Ç–∞–º–ø–æ–≤–∫–∞ –Ω–∞ –ø—Ä–µ—Å—Å–∞—Ö</option>
                        <option value="rolling_hot">–ì–æ—Ä—è—á–µ–∫–∞—Ç–∞–Ω—ã–π –ø—Ä–æ–∫–∞—Ç</option>
                        <option value="rolling_calibrated">–ö–∞–ª–∏–±—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ–∫–∞—Ç</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>–¢–∏–ø –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º–æ–π –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏:</label>
                    <select id="surfaceType">
                        <option value="external">–ù–∞—Ä—É–∂–Ω–∞—è —Ü–∏–ª–∏–Ω–¥—Ä–∏—á–µ—Å–∫–∞—è</option>
                        <option value="internal">–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Ü–∏–ª–∏–Ω–¥—Ä–∏—á–µ—Å–∫–∞—è</option>
                        <option value="flat">–ü–ª–æ—Å–∫–∞—è</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>–†–∞–∑–º–µ—Ä –∑–∞–≥–æ—Ç–æ–≤–∫–∏ (–¥–∏–∞–º–µ—Ç—Ä/—à–∏—Ä–∏–Ω–∞), –º–º:</label>
                    <input type="number" id="blankSize" min="1" step="0.1" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ä–∞–∑–º–µ—Ä">
                </div>

                <div class="form-group">
                    <label>–î–ª–∏–Ω–∞ –¥–µ—Ç–∞–ª–∏, –º–º:</label>
                    <input type="number" id="partLength" min="1" step="0.1" placeholder="–í–≤–µ–¥–∏—Ç–µ –¥–ª–∏–Ω—É (–¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ œÅ)">
                </div>

                <div class="button-group">
                    <button class="btn btn-primary" onclick="goToStep(2)">–î–∞–ª–µ–µ ‚Üí</button>
                </div>
            </div>

            <!-- –®–∞–≥ 2: –í—ã–±–æ—Ä –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ -->
            <div class="step-content" data-step="2">
                <h2>–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –ø–µ—Ä–µ—Ö–æ–¥—ã</h2>
                <div class="info-box">
                    <h4>‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h4>
                    <p>–î–æ–±–∞–≤—å—Ç–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏. –ü–µ—Ä–≤—ã–º –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–≥–æ—Ç–æ–≤–∫–∞.</p>
                </div>

                <div class="transitions-container" id="transitionsContainer"></div>

                <button class="btn btn-add" onclick="addTransition()">+ –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ—Ö–æ–¥</button>

                <div class="button-group">
                    <button class="btn btn-secondary" onclick="goToStep(1)">‚Üê –ù–∞–∑–∞–¥</button>
                    <button class="btn btn-primary" onclick="goToStep(3)">–î–∞–ª–µ–µ ‚Üí</button>
                </div>
            </div>

            <!-- –®–∞–≥ 3: –í–≤–æ–¥ —Ä–∞–∑–º–µ—Ä–æ–≤ -->
            <div class="step-content" data-step="3">
                <h2>–ö–æ–Ω–µ—á–Ω—ã–π —Ä–∞–∑–º–µ—Ä –¥–µ—Ç–∞–ª–∏</h2>
                <div class="info-box">
                    <h4>‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h4>
                    <p>–£–∫–∞–∂–∏—Ç–µ —Ç—Ä–µ–±—É–µ–º—ã–π —Ä–∞–∑–º–µ—Ä –≥–æ—Ç–æ–≤–æ–π –¥–µ—Ç–∞–ª–∏ —Å–æ–≥–ª–∞—Å–Ω–æ —á–µ—Ä—Ç–µ–∂—É.</p>
                </div>

                <div class="form-group">
                    <label>–ù–æ–º–∏–Ω–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –¥–µ—Ç–∞–ª–∏, –º–º:</label>
                    <input type="number" id="nominalSize" step="0.01" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 24.00">
                </div>

                <div class="form-group">
                    <label>–î–æ–ø—É—Å–∫ (–∫–≤–∞–ª–∏—Ç–µ—Ç):</label>
                    <select id="tolerance">
                        <option value="0.21">IT11 (¬±0.21)</option>
                        <option value="0.13">IT10 (¬±0.13)</option>
                        <option value="0.08" selected>IT9 (¬±0.08)</option>
                        <option value="0.052">IT8 (¬±0.052)</option>
                        <option value="0.033">IT7 (¬±0.033)</option>
                        <option value="0.021">IT6 (¬±0.021)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>–¢–∏–ø –ø–æ—Å–∞–¥–∫–∏:</label>
                    <select id="fitType">
                        <option value="h">–í–∞–ª (h) - –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π –¥–æ–ø—É—Å–∫</option>
                        <option value="H" selected>–û—Ç–≤–µ—Ä—Å—Ç–∏–µ (H) - –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–π –¥–æ–ø—É—Å–∫</option>
                    </select>
                </div>

                <div class="button-group">
                    <button class="btn btn-secondary" onclick="goToStep(2)">‚Üê –ù–∞–∑–∞–¥</button>
                    <button class="btn btn-success" onclick="calculate()">üßÆ –†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
                </div>
            </div>

            <!-- –®–∞–≥ 4: –†–µ–∑—É–ª—å—Ç–∞—Ç—ã -->
            <div class="step-content" data-step="4">
                <h2>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å—á–µ—Ç–∞</h2>
                
                <div class="result-section" id="resultsContainer">
                    <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —Å—é–¥–∞ -->
                </div>

                <div class="button-group">
                    <button class="btn btn-secondary" onclick="goToStep(1)">üîÑ –ù–æ–≤—ã–π —Ä–∞—Å—á–µ—Ç</button>
                    <button class="btn btn-success" onclick="downloadReport()">üì• –°–∫–∞—á–∞—Ç—å –æ—Ç—á–µ—Ç</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // –î–∞–Ω–Ω—ã–µ –æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö –∫–∞—á–µ—Å—Ç–≤–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∑–∞–≥–æ—Ç–æ–≤–æ–∫
        const blankData = {
            'casting_sand': { 
                rz: { small: 800, medium: 900, large: 1000 },
                t: { small: 0, medium: 0, large: 0 },
                name: '–õ–∏—Ç—å–µ –≤ –ø–µ—Å—á–∞–Ω—ã–µ —Ñ–æ—Ä–º—ã'
            },
            'casting_mold': { 
                rz: { small: 200, medium: 200, large: 200 },
                t: { small: 250, medium: 250, large: 250 },
                name: '–õ–∏—Ç—å–µ –≤ –∫–æ–∫–∏–ª—å'
            },
            'casting_shell': { 
                rz: { small: 40, medium: 40, large: 40 },
                t: { small: 200, medium: 200, large: 200 },
                name: '–õ–∏—Ç—å–µ –≤ –æ–±–æ–ª–æ—á–∫–æ–≤—ã–µ —Ñ–æ—Ä–º—ã'
            },
            'casting_wax': { 
                rz: { small: 30, medium: 32, large: 32 },
                t: { small: 140, medium: 170, large: 170 },
                name: '–õ–∏—Ç—å–µ –ø–æ –≤—ã–ø–ª–∞–≤–ª—è–µ–º—ã–º –º–æ–¥–µ–ª—è–º'
            },
            'casting_pressure': { 
                rz: { small: 50, medium: 50, large: 50 },
                t: { small: 100, medium: 100, large: 100 },
                name: '–õ–∏—Ç—å–µ –ø–æ–¥ –¥–∞–≤–ª–µ–Ω–∏–µ–º'
            },
            'forging_hammer': { 
                rz: { small: 80, medium: 160, large: 200 },
                t: { small: 150, medium: 200, large: 250 },
                name: '–®—Ç–∞–º–ø–æ–≤–∫–∞ –Ω–∞ –º–æ–ª–æ—Ç–∞—Ö'
            },
            'forging_press': { 
                rz: { small: 50, medium: 50, large: 50 },
                t: { small: 75, medium: 75, large: 75 },
                name: '–®—Ç–∞–º–ø–æ–≤–∫–∞ –Ω–∞ –ø—Ä–µ—Å—Å–∞—Ö'
            },
            'rolling_hot': { 
                rz: { small: 150, medium: 150, large: 200 },
                t: { small: 150, medium: 250, large: 300 },
                name: '–ì–æ—Ä—è—á–µ–∫–∞—Ç–∞–Ω—ã–π –ø—Ä–æ–∫–∞—Ç'
            },
            'rolling_calibrated': { 
                rz: { small: 60, medium: 60, large: 60 },
                t: { small: 60, medium: 75, large: 75 },
                name: '–ö–∞–ª–∏–±—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ–∫–∞—Ç'
            }
        };

        // –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –º–µ—Ç–æ–¥–æ–≤ –æ–±—Ä–∞–±–æ—Ç–∫–∏
        const processingData = {
            'rough_turning': {
                name: '–ß–µ—Ä–Ω–æ–≤–æ–µ —Ç–æ—á–µ–Ω–∏–µ',
                rz: 50,
                t: 50,
                ky: 0.06,
                type: 'turning'
            },
            'semifinish_turning': {
                name: '–ü–æ–ª—É—á–∏—Å—Ç–æ–≤–æ–µ —Ç–æ—á–µ–Ω–∏–µ',
                rz: 25,
                t: 25,
                ky: 0.05,
                type: 'turning'
            },
            'finish_turning': {
                name: '–ß–∏—Å—Ç–æ–≤–æ–µ —Ç–æ—á–µ–Ω–∏–µ',
                rz: 10,
                t: 20,
                ky: 0.04,
                type: 'turning'
            },
            'fine_turning': {
                name: '–¢–æ–Ω–∫–æ–µ —Ç–æ—á–µ–Ω–∏–µ',
                rz: 5,
                t: 5,
                ky: 0.02,
                type: 'turning'
            },
            'rough_milling': {
                name: '–ß–µ—Ä–Ω–æ–≤–æ–µ —Ñ—Ä–µ–∑–µ—Ä–æ–≤–∞–Ω–∏–µ',
                rz: 50,
                t: 50,
                ky: 0.06,
                type: 'milling'
            },
            'semifinish_milling': {
                name: '–ü–æ–ª—É—á–∏—Å—Ç–æ–≤–æ–µ —Ñ—Ä–µ–∑–µ—Ä–æ–≤–∞–Ω–∏–µ',
                rz: 25,
                t: 25,
                ky: 0.05,
                type: 'milling'
            },
            'finish_milling': {
                name: '–ß–∏—Å—Ç–æ–≤–æ–µ —Ñ—Ä–µ–∑–µ—Ä–æ–≤–∞–Ω–∏–µ',
                rz: 10,
                t: 15,
                ky: 0.04,
                type: 'milling'
            },
            'rough_grinding': {
                name: '–ß–µ—Ä–Ω–æ–≤–æ–µ —à–ª–∏—Ñ–æ–≤–∞–Ω–∏–µ',
                rz: 10,
                t: 20,
                ky: 0.03,
                type: 'grinding'
            },
            'finish_grinding': {
                name: '–ß–∏—Å—Ç–æ–≤–æ–µ —à–ª–∏—Ñ–æ–≤–∞–Ω–∏–µ',
                rz: 5,
                t: 15,
                ky: 0.02,
                type: 'grinding'
            },
            'fine_grinding': {
                name: '–¢–æ–Ω–∫–æ–µ —à–ª–∏—Ñ–æ–≤–∞–Ω–∏–µ',
                rz: 2.5,
                t: 5,
                ky: 0.01,
                type: 'grinding'
            },
            'surface_grinding_rough': {
                name: '–ü–ª–æ—Å–∫–æ—à–ª–∏—Ñ–æ–≤–∞–Ω–∏–µ —á–µ—Ä–Ω–æ–≤–æ–µ',
                rz: 10,
                t: 20,
                ky: 0.03,
                type: 'surface_grinding'
            },
            'surface_grinding_finish': {
                name: '–ü–ª–æ—Å–∫–æ—à–ª–∏—Ñ–æ–≤–∞–Ω–∏–µ —á–∏—Å—Ç–æ–≤–æ–µ',
                rz: 2.5,
                t: 10,
                ky: 0.02,
                type: 'surface_grinding'
            },
            'polishing': {
                name: '–ü–æ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ',
                rz: 0.63,
                t: 0,
                ky: 0,
                type: 'polishing'
            }
        };

        let currentStep = 1;
        let transitionCount = 0;
        let calculationData = {};

        // –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —à–∞–≥–∞–º
        function goToStep(step) {
            if (step > currentStep && !validateStep(currentStep)) {
                return;
            }

            document.querySelectorAll('.step').forEach(s => s.classList.remove('active', 'completed'));
            document.querySelectorAll('.step-content').forEach(c => c.classList.remove('active'));

            for (let i = 1; i < step; i++) {
                document.querySelector(`.step[data-step="${i}"]`).classList.add('completed');
            }

            document.querySelector(`.step[data-step="${step}"]`).classList.add('active');
            document.querySelector(`.step-content[data-step="${step}"]`).classList.add('active');

            currentStep = step;
        }

        // –í–∞–ª–∏–¥–∞—Ü–∏—è —à–∞–≥–∞
        function validateStep(step) {
            if (step === 1) {
                const blankType = document.getElementById('blankType').value;
                const blankSize = document.getElementById('blankSize').value;
                const partLength = document.getElementById('partLength').value;
                
                if (!blankType || !blankSize || !partLength) {
                    alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è!');
                    return false;
                }
            }

            if (step === 2) {
                if (transitionCount === 0) {
                    alert('–î–æ–±–∞–≤—å—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Ö–æ–¥!');
                    return false;
                }
            }

            if (step === 3) {
                const nominalSize = document.getElementById('nominalSize').value;
                if (!nominalSize) {
                    alert('–£–∫–∞–∂–∏—Ç–µ –Ω–æ–º–∏–Ω–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –¥–µ—Ç–∞–ª–∏!');
                    return false;
                }
            }

            return true;
        }

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ—Ö–æ–¥–∞
        function addTransition() {
            transitionCount++;
            const container = document.getElementById('transitionsContainer');
            
            const transitionDiv = document.createElement('div');
            transitionDiv.className = 'transition-item';
            transitionDiv.id = `transition-${transitionCount}`;
            
            transitionDiv.innerHTML = `
                <div class="transition-header">
                    <div class="transition-number">${transitionCount}</div>
                    <button class="remove-transition" onclick="removeTransition(${transitionCount})">–£–¥–∞–ª–∏—Ç—å</button>
                </div>
                <div class="form-group">
                    <label>–ú–µ—Ç–æ–¥ –æ–±—Ä–∞–±–æ—Ç–∫–∏:</label>
                    <select class="transition-method">
                        <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ –º–µ—Ç–æ–¥ --</option>
                        <optgroup label="–¢–æ–∫–∞—Ä–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞">
                            <option value="rough_turning">–ß–µ—Ä–Ω–æ–≤–æ–µ —Ç–æ—á–µ–Ω–∏–µ</option>
                            <option value="semifinish_turning">–ü–æ–ª—É—á–∏—Å—Ç–æ–≤–æ–µ —Ç–æ—á–µ–Ω–∏–µ</option>
                            <option value="finish_turning">–ß–∏—Å—Ç–æ–≤–æ–µ —Ç–æ—á–µ–Ω–∏–µ</option>
                            <option value="fine_turning">–¢–æ–Ω–∫–æ–µ —Ç–æ—á–µ–Ω–∏–µ</option>
                        </optgroup>
                        <optgroup label="–§—Ä–µ–∑–µ—Ä–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞">
                            <option value="rough_milling">–ß–µ—Ä–Ω–æ–≤–æ–µ —Ñ—Ä–µ–∑–µ—Ä–æ–≤–∞–Ω–∏–µ</option>
                            <option value="semifinish_milling">–ü–æ–ª—É—á–∏—Å—Ç–æ–≤–æ–µ —Ñ—Ä–µ–∑–µ—Ä–æ–≤–∞–Ω–∏–µ</option>
                            <option value="finish_milling">–ß–∏—Å—Ç–æ–≤–æ–µ —Ñ—Ä–µ–∑–µ—Ä–æ–≤–∞–Ω–∏–µ</option>
                        </optgroup>
                        <optgroup label="–®–ª–∏—Ñ–æ–≤–∞–Ω–∏–µ">
                            <option value="rough_grinding">–ß–µ—Ä–Ω–æ–≤–æ–µ —à–ª–∏—Ñ–æ–≤–∞–Ω–∏–µ (–∫—Ä—É–≥–ª–æ–µ)</option>
                            <option value="finish_grinding">–ß–∏—Å—Ç–æ–≤–æ–µ —à–ª–∏—Ñ–æ–≤–∞–Ω–∏–µ (–∫—Ä—É–≥–ª–æ–µ)</option>
                            <option value="fine_grinding">–¢–æ–Ω–∫–æ–µ —à–ª–∏—Ñ–æ–≤–∞–Ω–∏–µ (–∫—Ä—É–≥–ª–æ–µ)</option>
                            <option value="surface_grinding_rough">–ü–ª–æ—Å–∫–æ—à–ª–∏—Ñ–æ–≤–∞–Ω–∏–µ —á–µ—Ä–Ω–æ–≤–æ–µ</option>
                            <option value="surface_grinding_finish">–ü–ª–æ—Å–∫–æ—à–ª–∏—Ñ–æ–≤–∞–Ω–∏–µ —á–∏—Å—Ç–æ–≤–æ–µ</option>
                        </optgroup>
                        <optgroup label="–û—Ç–¥–µ–ª–æ—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞">
                            <option value="polishing">–ü–æ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ</option>
                        </optgroup>
                    </select>
                </div>
                <div class="form-group">
                    <label>–û–ø–∏—Å–∞–Ω–∏–µ –ø–µ—Ä–µ—Ö–æ–¥–∞ (–±–∞–∑–∞, —Ä–∞–∑–º–µ—Ä):</label>
                    <input type="text" class="transition-description" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ü–æ–¥—Ä–µ–∑–∞—Ç—å —Ç–æ—Ä–µ—Ü –ê, –≤—ã–¥–µ—Ä–∂–∞–≤ —Ä-—Ä 17">
                </div>
                <div class="form-group">
                    <label>–ü–æ–≥—Ä–µ—à–Ω–æ—Å—Ç—å –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–∏—è Œµ–∑, –º–∫–º:</label>
                    <input type="number" class="transition-epsilon" value="60" min="0" step="1">
                </div>
                <div class="form-group">
                    <label>–ü–æ–≥—Ä–µ—à–Ω–æ—Å—Ç—å –±–∞–∑–∏—Ä–æ–≤–∞–Ω–∏—è Œµ–±, –º–∫–º:</label>
                    <input type="number" class="transition-epsilon-b" value="0" min="0" step="1">
                </div>
            `;
            
            container.appendChild(transitionDiv);
        }

        // –£–¥–∞–ª–µ–Ω–∏–µ –ø–µ—Ä–µ—Ö–æ–¥–∞
        function removeTransition(id) {
            const element = document.getElementById(`transition-${id}`);
            if (element) {
                element.remove();
                transitionCount--;
                renumberTransitions();
            }
        }

        // –ü–µ—Ä–µ–Ω—É–º–µ—Ä–∞—Ü–∏—è –ø–µ—Ä–µ—Ö–æ–¥–æ–≤
        function renumberTransitions() {
            const transitions = document.querySelectorAll('.transition-item');
            transitions.forEach((trans, index) => {
                const number = trans.querySelector('.transition-number');
                if (number) {
                    number.textContent = index + 1;
                }
            });
        }

        // –û—Å–Ω–æ–≤–Ω–æ–π —Ä–∞—Å—á–µ—Ç
        function calculate() {
            if (!validateStep(3)) return;

            // –°–æ–±–∏—Ä–∞–µ–º –¥–∞–Ω–Ω—ã–µ
            const blankType = document.getElementById('blankType').value;
            const blankSize = parseFloat(document.getElementById('blankSize').value);
            const partLength = parseFloat(document.getElementById('partLength').value);
            const surfaceType = document.getElementById('surfaceType').value;
            const nominalSize = parseFloat(document.getElementById('nominalSize').value);
            const tolerance = parseFloat(document.getElementById('tolerance').value);
            const fitType = document.getElementById('fitType').value;

            // –ü–æ–ª—É—á–∞–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–≥–æ—Ç–æ–≤–∫–∏
            const blank = blankData[blankType];
            let sizeCategory = 'small';
            if (blankSize > 80) sizeCategory = 'large';
            else if (blankSize > 30) sizeCategory = 'medium';

            const initialRz = blank.rz[sizeCategory];
            const initialT = blank.t[sizeCategory];

            // –£–¥–µ–ª—å–Ω–∞—è –∫—Ä–∏–≤–∏–∑–Ω–∞ (–∏–∑ —Ç–∞–±–ª–∏—Ü—ã 2.27)
            let deltaK = 4; // –¥–ª—è –ª–∏—Ç—å—è –≤ –ø–µ—Å—á–∞–Ω—ã–µ —Ñ–æ—Ä–º—ã
            if (blankType.includes('forging')) deltaK = 2.4;
            if (blankType.includes('rolling_hot')) deltaK = 12;
            if (blankType.includes('rolling_calibrated')) deltaK = 4;

            const rhoKor = deltaK * partLength; // –ü–æ–≥—Ä–µ—à–Ω–æ—Å—Ç—å –∫–æ—Ä–æ–±–ª–µ–Ω–∏—è

            // –°–æ–±–∏—Ä–∞–µ–º –ø–µ—Ä–µ—Ö–æ–¥—ã
            const transitions = [];
            const transitionElements = document.querySelectorAll('.transition-item');
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–≥–æ—Ç–æ–≤–∫—É
            transitions.push({
                name: blank.name,
                rz: initialRz,
                t: initialT,
                rho: rhoKor,
                epsilon: 0,
                ky: 0
            });

            // –î–æ–±–∞–≤–ª—è–µ–º –ø–µ—Ä–µ—Ö–æ–¥—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏
            let currentRho = rhoKor;
            transitionElements.forEach((el, index) => {
                const method = el.querySelector('.transition-method').value;
                if (!method) return;

                const processData = processingData[method];
                const epsilonZ = parseFloat(el.querySelector('.transition-epsilon').value) || 0;
                const epsilonB = parseFloat(el.querySelector('.transition-epsilon-b').value) || 0;
                const description = el.querySelector('.transition-description')?.value || '';
                
                // –†–∞—Å—á–µ—Ç –æ—Å—Ç–∞—Ç–æ—á–Ω–æ–π –ø–æ–≥—Ä–µ—à–Ω–æ—Å—Ç–∏
                if (index > 0) {
                    currentRho = currentRho * transitions[index].ky;
                }

                const epsilonU = Math.sqrt(epsilonB * epsilonB + epsilonZ * epsilonZ);

                transitions.push({
                    name: processData.name,
                    rz: processData.rz,
                    t: processData.t,
                    rho: currentRho,
                    epsilon: epsilonU,
                    epsilonB: epsilonB,
                    epsilonZ: epsilonZ,
                    description: description,
                    ky: processData.ky
                });
            });

            // –†–∞—Å—á–µ—Ç –ø—Ä–∏–ø—É—Å–∫–æ–≤
            const results = [];
            let currentSize = nominalSize;

            // –ü–æ—Å–ª–µ–¥–Ω–∏–π –ø–µ—Ä–µ—Ö–æ–¥ (–≥–æ—Ç–æ–≤–∞—è –¥–µ—Ç–∞–ª—å)
            const finalTolerance = tolerance * 2;
            results.push({
                transition: transitions[transitions.length - 1].name,
                rz: transitions[transitions.length - 1].rz,
                t: transitions[transitions.length - 1].t,
                rho: 0,
                epsilon: 0,
                allowance: 0,
                tolerance: finalTolerance,
                sizeMin: nominalSize,
                sizeMax: nominalSize + (fitType === 'H' ? finalTolerance : 0) - (fitType === 'h' ? finalTolerance : 0)
            });

            // –†–∞—Å—á–µ—Ç –æ—Ç –∫–æ–Ω—Ü–∞ –∫ –Ω–∞—á–∞–ª—É
            for (let i = transitions.length - 2; i >= 0; i--) {
                const trans = transitions[i];
                const prevResult = results[results.length - 1];
                
                // –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–∏–ø—É—Å–∫ –ø–æ —Ñ–æ—Ä–º—É–ª–µ
                let zMin;
                if (trans.name.includes('–ü–æ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ')) {
                    zMin = 2 * trans.rz;
                } else {
                    const sqrtPart = Math.sqrt(trans.rho * trans.rho + trans.epsilon * trans.epsilon);
                    zMin = 2 * (trans.rz + trans.t + sqrtPart);
                }

                // –û–∫—Ä—É–≥–ª–µ–Ω–∏–µ –ø—Ä–∏–ø—É—Å–∫–∞
                zMin = Math.ceil(zMin);

                // –†–∞—Å—á–µ—Ç –¥–æ–ø—É—Å–∫–∞ –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞
                let transitionTolerance;
                if (i === 0) {
                    // –î–æ–ø—É—Å–∫ –∑–∞–≥–æ—Ç–æ–≤–∫–∏
                    transitionTolerance = blankSize * 0.04; // –ø—Ä–∏–º–µ—Ä–Ω–æ 4% –æ—Ç —Ä–∞–∑–º–µ—Ä–∞
                } else {
                    // –î–æ–ø—É—Å–∫ –º–µ—Ö–∞–Ω–∏—á–µ—Å–∫–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
                    if (trans.name.includes('–ß–µ—Ä–Ω–æ–≤–æ–µ')) transitionTolerance = 0.21;
                    else if (trans.name.includes('–ü–æ–ª—É—á–∏—Å—Ç–æ–≤–æ–µ')) transitionTolerance = 0.13;
                    else if (trans.name.includes('–ß–∏—Å—Ç–æ–≤–æ–µ')) transitionTolerance = 0.08;
                    else if (trans.name.includes('–¢–æ–Ω–∫–æ–µ')) transitionTolerance = 0.052;
                    else transitionTolerance = 0.13;
                }

                // –†–∞—Å—á–µ—Ç —Ä–∞–∑–º–µ—Ä–æ–≤
                let newSizeMin, newSizeMax;
                if (surfaceType === 'external' || surfaceType === 'flat') {
                    newSizeMin = prevResult.sizeMin + zMin / 1000;
                    newSizeMax = newSizeMin + transitionTolerance;
                } else {
                    newSizeMax = prevResult.sizeMax - zMin / 1000;
                    newSizeMin = newSizeMax - transitionTolerance;
                }

                results.push({
                    transition: trans.name,
                    rz: trans.rz,
                    t: trans.t,
                    rho: trans.rho,
                    epsilon: trans.epsilon,
                    epsilonB: trans.epsilonB || 0,
                    epsilonZ: trans.epsilonZ || 0,
                    description: trans.description || '',
                    allowance: zMin,
                    tolerance: transitionTolerance,
                    sizeMin: newSizeMin,
                    sizeMax: newSizeMax
                });
            }

            // –ü–µ—Ä–µ–≤–æ—Ä–∞—á–∏–≤–∞–µ–º –º–∞—Å—Å–∏–≤ –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞
            results.reverse();

            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –æ—Ç—á–µ—Ç–∞
            calculationData = {
                blank: blank.name,
                blankSize: blankSize,
                partLength: partLength,
                surfaceType: surfaceType,
                nominalSize: nominalSize,
                tolerance: tolerance,
                fitType: fitType,
                results: results,
                deltaK: deltaK,
                rhoKor: rhoKor
            };

            // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
            displayResults(results);
            goToStep(4);
        }

        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
// –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è displayResults —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º–∏ —Ä–∞—Å—á–µ—Ç–∞–º–∏
function displayResults(results) {
    const container = document.getElementById('resultsContainer');
    
    let html = '<div class="operation-block">';
    html += '<div class="operation-title">–†–ê–°–ß–ï–¢ –ü–†–ò–ü–£–°–ö–û–í –ù–ê –ú–ï–•–ê–ù–ò–ß–ï–°–ö–£–Æ –û–ë–†–ê–ë–û–¢–ö–£</div>';
    
    // –ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
    html += '<h3>–ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</h3>';
    html += '<div class="info-box">';
    html += `<p><strong>–¢–∏–ø –∑–∞–≥–æ—Ç–æ–≤–∫–∏:</strong> ${calculationData.blank}</p>`;
    html += `<p><strong>–†–∞–∑–º–µ—Ä –∑–∞–≥–æ—Ç–æ–≤–∫–∏:</strong> ${calculationData.blankSize} –º–º</p>`;
    html += `<p><strong>–î–ª–∏–Ω–∞ –¥–µ—Ç–∞–ª–∏:</strong> ${calculationData.partLength} –º–º</p>`;
    html += `<p><strong>–¢–∏–ø –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏:</strong> ${calculationData.surfaceType === 'external' ? '–ù–∞—Ä—É–∂–Ω–∞—è —Ü–∏–ª–∏–Ω–¥—Ä–∏—á–µ—Å–∫–∞—è' : calculationData.surfaceType === 'internal' ? '–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Ü–∏–ª–∏–Ω–¥—Ä–∏—á–µ—Å–∫–∞—è' : '–ü–ª–æ—Å–∫–∞—è'}</p>`;
    html += `<p><strong>–ù–æ–º–∏–Ω–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –¥–µ—Ç–∞–ª–∏:</strong> ${calculationData.nominalSize} –º–º</p>`;
    html += '</div>';
    
    // –†–∞—Å—á–µ—Ç –ø–æ –∫–∞–∂–¥–æ–º—É –ø–µ—Ä–µ—Ö–æ–¥—É
    results.forEach((res, index) => {
        if (index === results.length - 1) return; // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–π (–≥–æ—Ç–æ–≤–∞—è –¥–µ—Ç–∞–ª—å)
        
        const nextRes = results[index + 1];
        if (!nextRes) return;
        
        html += '<div class="transition-calc">';
        html += `<div class="transition-title">–ü–ï–†–ï–•–û–î ${index + 1}: ${res.transition}</div>`;
        
        if (res.description) {
            html += `<p style="margin-bottom: 15px;"><em>${res.description}</em></p>`;
        }
        
        // 1. –û–ø—Ä–µ–¥–µ–ª—è–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–∏–ø—É—Å–∫
        html += '<div class="calc-step">';
        html += '<div class="calc-step-title">1. –û–ø—Ä–µ–¥–µ–ª—è–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–∏–ø—É—Å–∫</div>';
        
        // –§–æ—Ä–º—É–ª–∞
        if (calculationData.surfaceType === 'flat') {
            html += '<div class="formula">z<sub>min</sub> = (Rz + h)<sub>i-1</sub> + œÅ + Œµ<sub>yi</sub>, –º–∫–º</div>';
        } else {
            html += '<div class="formula">2z<sub>min</sub> = 2[(Rz + h)<sub>i-1</sub> + ‚àö(œÅ¬≤ + Œµ<sub>yi</sub>¬≤)], –º–∫–º</div>';
        }
        
        // –∞) –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–∞—á–µ—Å—Ç–≤–∞ –∑–∞–≥–æ—Ç–æ–≤–∫–∏
        html += '<div class="param-explain">';
        html += `–∞) (Rz + h)<sub>i-1</sub> = ${Math.round(res.rz + res.t)} –º–∫–º`;
        html += ` ‚Äî ${res.transition}`;
        if (index === 0) {
            html += ' (–∑–∞–≥–æ—Ç–æ–≤–∫–∞)';
        }
        html += '<div class="reference">—Ç.6, —Å. 182, –°–¢–ú1</div>';
        html += '</div>';
        
        // –±) –ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è
        html += '<div class="param-explain">';
        html += '–±) –°—É–º–º–∞—Ä–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã—Ö –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–π';
        if (index === 0) {
            html += '<div class="formula" style="margin-top: 5px;">';
            html += `œÅ = Œî<sub>–∫</sub> √ó L = ${calculationData.deltaK} √ó ${calculationData.partLength} = ${Math.round(res.rho)} –º–∫–º`;
            html += '</div>';
            html += `<div style="padding-left: 15px; margin-top: 5px;">–≥–¥–µ: Œî'<sub>–∫</sub> = ${calculationData.deltaK} –º–∫–º/–º–º`;
            html += '<div class="reference">—Ç.8, —Å.183, –°–¢–ú1</div>';
            html += `<div>L = ${calculationData.partLength} –º–º ‚Äî –¥–ª–∏–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏</div>`;
            html += '</div>';
        } else {
            html += `<div class="formula" style="margin-top: 5px;">œÅ = ${Math.round(res.rho)} –º–∫–º (—É—Ç–æ—á–Ω–µ–Ω–∏–µ –ø–æ—Å–ª–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞)</div>`;
        }
        html += '</div>';
        
        // –≤) –ü–æ–≥—Ä–µ—à–Ω–æ—Å—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫–∏
        html += '<div class="param-explain">';
        html += '–≤) –ü–æ–≥—Ä–µ—à–Ω–æ—Å—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫–∏';
        html += '<div class="formula" style="margin-top: 5px;">';
        html += `Œµ<sub>yi</sub> = ‚àö(Œµ<sub>–±</sub>¬≤ + Œµ<sub>–∑</sub>¬≤) = ‚àö(${Math.round(res.epsilonB || 0)}¬≤ + ${Math.round(res.epsilonZ || 0)}¬≤) = ${Math.round(res.epsilon)} –º–∫–º`;
        html += '</div>';
        html += `<div style="padding-left: 15px; margin-top: 5px;">–≥–¥–µ: Œµ<sub>–±</sub> = ${Math.round(res.epsilonB || 0)} –º–∫–º ‚Äî –ø–æ–≥—Ä–µ—à–Ω–æ—Å—Ç—å –±–∞–∑–∏—Ä–æ–≤–∞–Ω–∏—è`;
        html += '<div class="reference">—Ç.11, —Å. 130, –°–¢–ú1</div>';
        html += `<div>Œµ<sub>–∑</sub> = ${Math.round(res.epsilonZ || 0)} –º–∫–º ‚Äî –ø–æ–≥—Ä–µ—à–Ω–æ—Å—Ç—å –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–∏—è`;
        html += '<div class="reference">—Ç.13, —Å. 42, –°–¢–ú1</div>';
        html += '</div>';
        html += '</div>';
        
        // –ò—Ç–æ–≥
        let zFormula;
        if (calculationData.surfaceType === 'flat') {
            zFormula = `z<sub>min</sub> = ${Math.round(res.rz + res.t)} + ${Math.round(res.rho)} + ${Math.round(res.epsilon)} = ${Math.round(res.allowance / 2)} –º–∫–º`;
        } else {
            const sqrtPart = Math.sqrt(res.rho * res.rho + res.epsilon * res.epsilon);
            zFormula = `2z<sub>min</sub> = 2[${Math.round(res.rz + res.t)} + ‚àö(${Math.round(res.rho)}¬≤ + ${Math.round(res.epsilon)}¬≤)] = 2[${Math.round(res.rz + res.t)} + ${Math.round(sqrtPart)}] = ${Math.round(res.allowance)} –º–∫–º`;
        }
        html += `<div class="formula-result">${zFormula}</div>`;
        html += '</div>';
        
        // 2. –û–ø—Ä–µ–¥–µ–ª—è–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–∏–ø—É—Å–∫
        html += '<div class="calc-step">';
        html += '<div class="calc-step-title">2. –û–ø—Ä–µ–¥–µ–ª—è–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–∏–ø—É—Å–∫</div>';
        
        const prevTolerance = res.tolerance * 1000; // –≤ –º–∫–º
        const currentTolerance = nextRes.tolerance * 1000; // –≤ –º–∫–º
        const zMax = res.allowance + prevTolerance - currentTolerance;
        
        if (calculationData.surfaceType === 'flat') {
            html += '<div class="formula">';
            html += `z<sub>max</sub> = z<sub>min</sub> + TD<sub>i-1</sub> - TD<sub>i</sub> = ${Math.round(res.allowance / 2)} + ${Math.round(prevTolerance)} - ${Math.round(currentTolerance)} = ${Math.round(zMax / 2)} –º–∫–º`;
            html += '</div>';
        } else {
            html += '<div class="formula">';
            html += `2z<sub>max</sub> = 2z<sub>min</sub> + TD<sub>i-1</sub> - TD<sub>i</sub> = ${Math.round(res.allowance)} + ${Math.round(prevTolerance)} - ${Math.round(currentTolerance)} = ${Math.round(zMax)} –º–∫–º`;
            html += '</div>';
        }
        
        html += '<div class="param-explain">';
        html += `–≥–¥–µ: TD<sub>i-1</sub> = ${Math.round(prevTolerance)} –º–∫–º ‚Äî –¥–æ–ø—É—Å–∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞`;
        html += '<div class="reference">—Ç.4, —Å. 8, –°–¢–ú1</div>';
        html += `<div>TD<sub>i</sub> = ${Math.round(currentTolerance)} –º–∫–º ‚Äî –¥–æ–ø—É—Å–∫ —Ç–µ–∫—É—â–µ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞`;
        html += '<div class="reference">—Ç.4, —Å. 8, –°–¢–ú1</div>';
        html += '</div>';
        html += '</div>';
        
        // 3. –ü—Ä–∏–Ω–∏–º–∞–µ–º –ø—Ä–∏–ø—É—Å–∫
        html += '<div class="calc-step">';
        html += '<div class="calc-step-title">3. –ü—Ä–∏–Ω–∏–º–∞–µ–º –ø—Ä–∏–ø—É—Å–∫</div>';
        const adoptedAllowance = (res.allowance / 1000).toFixed(1);
        if (calculationData.surfaceType === 'flat') {
            html += `<div class="formula-result">z<sub>max</sub> = ${adoptedAllowance} –º–º</div>`;
        } else {
            html += `<div class="formula-result">2z<sub>max</sub> = ${adoptedAllowance} –º–º</div>`;
        }
        html += '</div>';
        
        html += '</div>'; // end transition-calc
    });
    
    // –ò—Ç–æ–≥–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞
    html += '<h3 style="margin-top: 30px;">üìä –ò—Ç–æ–≥–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Ä–∞—Å—á–µ—Ç–∞</h3>';
    html += '<table class="summary-table">';
    html += '<tr>';
    html += '<th>‚Ññ</th>';
    html += '<th>–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Ö–æ–¥</th>';
    html += '<th>Rz, –º–∫–º</th>';
    html += '<th>T, –º–∫–º</th>';
    html += '<th>œÅ, –º–∫–º</th>';
    html += '<th>Œµ, –º–∫–º</th>';
    html += '<th>' + (calculationData.surfaceType === 'flat' ? 'z' : '2z') + '<sub>min</sub>, –º–∫–º</th>';
    html += '<th>–î–æ–ø—É—Å–∫, –º–º</th>';
    html += '<th>–†–∞–∑–º–µ—Ä, –º–º</th>';
    html += '</tr>';

    results.forEach((res, index) => {
        html += '<tr>';
        html += `<td>${index + 1}</td>`;
        html += `<td><strong>${res.transition}</strong></td>`;
        html += `<td>${res.rz.toFixed(1)}</td>`;
        html += `<td>${res.t.toFixed(1)}</td>`;
        html += `<td>${Math.round(res.rho)}</td>`;
        html += `<td>${Math.round(res.epsilon)}</td>`;
        html += `<td><strong>${calculationData.surfaceType === 'flat' ? Math.round(res.allowance / 2) : Math.round(res.allowance)}</strong></td>`;
        html += `<td>${res.tolerance.toFixed(3)}</td>`;
        
        // –†–∞–∑–º–µ—Ä —Å –¥–æ–ø—É—Å–∫–æ–º
        let sizeStr;
        if (calculationData.surfaceType === 'external' || calculationData.surfaceType === 'flat') {
            sizeStr = `${res.sizeMin.toFixed(2)} +${(res.sizeMax - res.sizeMin).toFixed(3)}`;
        } else {
            sizeStr = `${res.sizeMax.toFixed(2)} -${(res.sizeMax - res.sizeMin).toFixed(3)}`;
        }
        html += `<td>${sizeStr}</td>`;
        html += '</tr>';
    });

    html += '</table>';
    html += '</div>'; // end operation-block

    container.innerHTML = html;
}

        // –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–∞
        function downloadReport() {
            let report = '=================================================\n';
            report += '   –†–ê–°–ß–ï–¢ –ü–†–ò–ü–£–°–ö–û–í –ù–ê –ú–ï–•–ê–ù–ò–ß–ï–°–ö–£–Æ –û–ë–†–ê–ë–û–¢–ö–£\n';
            report += '=================================================\n\n';
            
            report += '–ò–°–•–û–î–ù–´–ï –î–ê–ù–ù–´–ï:\n';
            report += '‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n';
            report += `–¢–∏–ø –∑–∞–≥–æ—Ç–æ–≤–∫–∏: ${calculationData.blank}\n`;
            report += `–†–∞–∑–º–µ—Ä –∑–∞–≥–æ—Ç–æ–≤–∫–∏: ${calculationData.blankSize} –º–º\n`;
            report += `–î–ª–∏–Ω–∞ –¥–µ—Ç–∞–ª–∏: ${calculationData.partLength} –º–º\n`;
            report += `–¢–∏–ø –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏: ${calculationData.surfaceType === 'external' ? '–ù–∞—Ä—É–∂–Ω–∞—è —Ü–∏–ª–∏–Ω–¥—Ä–∏—á–µ—Å–∫–∞—è' : calculationData.surfaceType === 'internal' ? '–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Ü–∏–ª–∏–Ω–¥—Ä–∏—á–µ—Å–∫–∞—è' : '–ü–ª–æ—Å–∫–∞—è'}\n`;
            report += `–ù–æ–º–∏–Ω–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –¥–µ—Ç–∞–ª–∏: ${calculationData.nominalSize} –º–º\n`;
            report += `–î–æ–ø—É—Å–∫: ¬±${calculationData.tolerance} –º–º\n\n`;

            // –ü–æ–¥—Ä–æ–±–Ω—ã–π —Ä–∞—Å—á–µ—Ç –ø–æ –∫–∞–∂–¥–æ–º—É –ø–µ—Ä–µ—Ö–æ–¥—É
            const results = calculationData.results;
            
            results.forEach((res, index) => {
                if (index === results.length - 1) return; // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–π
                
                const nextRes = results[index + 1];
                if (!nextRes) return;
                
                report += '\n' + '='.repeat(60) + '\n';
                report += `–ü–ï–†–ï–•–û–î ${index + 1}: ${res.transition.toUpperCase()}\n`;
                report += '='.repeat(60) + '\n';
                
                if (res.description) {
                    report += `–ë–∞–∑–∞/–û–ø–∏—Å–∞–Ω–∏–µ: ${res.description}\n\n`;
                }
                
                // 1. –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–∏–ø—É—Å–∫
                report += '__1. –û–ø—Ä–µ–¥–µ–ª—è–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–∏–ø—É—Å–∫__\n\n';
                
                if (calculationData.surfaceType === 'flat') {
                    report += 'z_min = (Rz + h)_{i-1} + œÅ + Œµ_yi, –º–∫–º\n\n';
                } else {
                    report += '2z_min = 2[(Rz + h)_{i-1} + ‚àö(œÅ¬≤ + Œµ_yi¬≤)], –º–∫–º\n\n';
                }
                
                // a) –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–∞—á–µ—Å—Ç–≤–∞
                report += `–∞) (Rz + h)_{i-1} = ${Math.round(res.rz + res.t)} –º–∫–º ‚Äî ${res.transition}`;
                if (index === 0) {
                    report += ' (–∑–∞–≥–æ—Ç–æ–≤–∫–∞)';
                }
                report += '\n';
                report += '   —Ç.6, —Å. 182, –°–¢–ú1\n\n';
                
                // –±) –ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è
                report += '–±) –°—É–º–º–∞—Ä–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã—Ö –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–π\n';
                if (index === 0) {
                    report += `   œÅ = Œî–∫ √ó L = ${calculationData.deltaK} √ó ${calculationData.partLength} = ${Math.round(res.rho)} –º–∫–º\n`;
                    report += `   –≥–¥–µ: Œî'–∫ = ${calculationData.deltaK} –º–∫–º/–º–º (—Ç.8, —Å.183, –°–¢–ú1)\n`;
                    report += `        L = ${calculationData.partLength} –º–º ‚Äî –¥–ª–∏–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏\n\n`;
                } else {
                    report += `   œÅ = ${Math.round(res.rho)} –º–∫–º (—É—Ç–æ—á–Ω–µ–Ω–∏–µ –ø–æ—Å–ª–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞)\n\n`;
                }
                
                // –≤) –ü–æ–≥—Ä–µ—à–Ω–æ—Å—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫–∏
                report += '–≤) –ü–æ–≥—Ä–µ—à–Ω–æ—Å—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫–∏\n';
                report += `   Œµ_yi = ‚àö(Œµ_–±¬≤ + Œµ_–∑¬≤) = ‚àö(${Math.round(res.epsilonB || 0)}¬≤ + ${Math.round(res.epsilonZ || 0)}¬≤) = ${Math.round(res.epsilon)} –º–∫–º\n`;
                report += `   –≥–¥–µ: Œµ_–± = ${Math.round(res.epsilonB || 0)} –º–∫–º ‚Äî –ø–æ–≥—Ä–µ—à–Ω–æ—Å—Ç—å –±–∞–∑–∏—Ä–æ–≤–∞–Ω–∏—è (—Ç.11, —Å. 130, –°–¢–ú1)\n`;
                report += `        Œµ_–∑ = ${Math.round(res.epsilonZ || 0)} –º–∫–º ‚Äî –ø–æ–≥—Ä–µ—à–Ω–æ—Å—Ç—å –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–∏—è (—Ç.13, —Å. 42, –°–¢–ú1)\n\n`;
                
                // –ò—Ç–æ–≥–æ–≤—ã–π —Ä–∞—Å—á–µ—Ç
                if (calculationData.surfaceType === 'flat') {
                    report += `z_min = ${Math.round(res.rz + res.t)} + ${Math.round(res.rho)} + ${Math.round(res.epsilon)} = ${Math.round(res.allowance / 2)} –º–∫–º\n\n`;
                } else {
                    const sqrtPart = Math.sqrt(res.rho * res.rho + res.epsilon * res.epsilon);
                    report += `2z_min = 2[${Math.round(res.rz + res.t)} + ‚àö(${Math.round(res.rho)}¬≤ + ${Math.round(res.epsilon)}¬≤)]\n`;
                    report += `2z_min = 2[${Math.round(res.rz + res.t)} + ${Math.round(sqrtPart)}] = ${Math.round(res.allowance)} –º–∫–º\n\n`;
                }
                
                // 2. –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–∏–ø—É—Å–∫
                report += '__2. –û–ø—Ä–µ–¥–µ–ª—è–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–∏–ø—É—Å–∫__\n\n';
                
                const prevTolerance = res.tolerance * 1000;
                const currentTolerance = nextRes.tolerance * 1000;
                const zMax = res.allowance + prevTolerance - currentTolerance;
                
                if (calculationData.surfaceType === 'flat') {
                    report += `z_max = z_min + TD_{i-1} - TD_i = ${Math.round(res.allowance / 2)} + ${Math.round(prevTolerance)} - ${Math.round(currentTolerance)} = ${Math.round(zMax / 2)} –º–∫–º\n\n`;
                } else {
                    report += `2z_max = 2z_min + TD_{i-1} - TD_i = ${Math.round(res.allowance)} + ${Math.round(prevTolerance)} - ${Math.round(currentTolerance)} = ${Math.round(zMax)} –º–∫–º\n\n`;
                }
                
                report += `–≥–¥–µ: TD_{i-1} = ${Math.round(prevTolerance)} –º–∫–º ‚Äî –¥–æ–ø—É—Å–∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞ (—Ç.4, —Å. 8, –°–¢–ú1)\n`;
                report += `     TD_i = ${Math.round(currentTolerance)} –º–∫–º ‚Äî –¥–æ–ø—É—Å–∫ —Ç–µ–∫—É—â–µ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞ (—Ç.4, —Å. 8, –°–¢–ú1)\n\n`;
                
                // 3. –ü—Ä–∏–Ω–∏–º–∞–µ–º –ø—Ä–∏–ø—É—Å–∫
                report += '__3. –ü—Ä–∏–Ω–∏–º–∞–µ–º –ø—Ä–∏–ø—É—Å–∫__\n\n';
                const adoptedAllowance = (res.allowance / 1000).toFixed(1);
                if (calculationData.surfaceType === 'flat') {
                    report += `z_max = ${adoptedAllowance} –º–º\n\n`;
                } else {
                    report += `2z_max = ${adoptedAllowance} –º–º\n\n`;
                }
            });

            // –ò—Ç–æ–≥–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞
            report += '\n' + '='.repeat(60) + '\n';
            report += '–ò–¢–û–ì–û–í–ê–Ø –¢–ê–ë–õ–ò–¶–ê –†–ê–°–ß–ï–¢–ê –ü–†–ò–ü–£–°–ö–û–í\n';
            report += '='.repeat(60) + '\n\n';
            report += String.prototype.padEnd.call('–ü–µ—Ä–µ—Ö–æ–¥', 25) + ' | ';
            report += String.prototype.padEnd.call('Rz', 6) + ' | ';
            report += String.prototype.padEnd.call('T', 6) + ' | ';
            report += String.prototype.padEnd.call('œÅ', 6) + ' | ';
            report += String.prototype.padEnd.call('Œµ', 6) + ' | ';
            report += String.prototype.padEnd.call(calculationData.surfaceType === 'flat' ? 'zmin' : '2zmin', 8) + ' | ';
            report += String.prototype.padEnd.call('–î–æ–ø—É—Å–∫', 8) + ' | ';
            report += String.prototype.padEnd.call('–†–∞–∑–º–µ—Ä', 15) + '\n';
            report += '-'.repeat(100) + '\n';

            results.forEach((res, index) => {
                report += String.prototype.padEnd.call(`${index + 1}. ${res.transition}`, 25) + ' | ';
                report += String.prototype.padEnd.call(res.rz.toFixed(1), 6) + ' | ';
                report += String.prototype.padEnd.call(res.t.toFixed(1), 6) + ' | ';
                report += String.prototype.padEnd.call(Math.round(res.rho).toString(), 6) + ' | ';
                report += String.prototype.padEnd.call(Math.round(res.epsilon).toString(), 6) + ' | ';
                const allowanceVal = calculationData.surfaceType === 'flat' ? Math.round(res.allowance / 2) : Math.round(res.allowance);
                report += String.prototype.padEnd.call(allowanceVal.toString(), 8) + ' | ';
                report += String.prototype.padEnd.call(res.tolerance.toFixed(3), 8) + ' | ';
                
                let sizeStr;
                if (calculationData.surfaceType === 'external' || calculationData.surfaceType === 'flat') {
                    sizeStr = `${res.sizeMin.toFixed(2)} +${(res.sizeMax - res.sizeMin).toFixed(3)}`;
                } else {
                    sizeStr = `${res.sizeMax.toFixed(2)} -${(res.sizeMax - res.sizeMin).toFixed(3)}`;
                }
                report += String.prototype.padEnd.call(sizeStr, 15) + '\n';
            });

            report += '-'.repeat(100) + '\n\n';

            report += '‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n';
            report += '–†–∞—Å—á–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –ì–û–°–¢\n';
            report += '–ú–µ—Ç–æ–¥–∏—á–µ—Å–∫–∏–µ —É–∫–∞–∑–∞–Ω–∏—è –ø–æ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –º–∞—à–∏–Ω–æ—Å—Ç—Ä–æ–µ–Ω–∏—è\n';
            report += `–î–∞—Ç–∞ —Ä–∞—Å—á–µ—Ç–∞: ${new Date().toLocaleString('ru-RU')}\n`;
            report += '=================================================\n';

            // –°–æ–∑–¥–∞–µ–º blob –∏ —Å–∫–∞—á–∏–≤–∞–µ–º
            const blob = new Blob([report], { type: 'text/plain;charset=utf-8' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `–†–∞—Å—á–µ—Ç_–ø—Ä–∏–ø—É—Å–∫–æ–≤_${Date.now()}.txt`;
            link.click();
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', () => {
            console.log('–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ø—Ä–∏–ø—É—Å–∫–æ–≤ –∑–∞–≥—Ä—É–∂–µ–Ω');
        });
    </script>
</body>
</html>
