<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üé• –í–∏–¥–µ–æ–∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏ –º–∏–ª–ª–∏–∞—Ä–¥–µ—Ä–æ–≤</title>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    
    <!-- Jitsi Meet API -->
    <script src='https://meet.jit.si/external_api.js'></script>
    
    <!-- React -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .app-container {
            max-width: 1400px;
            margin: 0 auto;
            min-height: 90vh;
        }

        .header {
            background: linear-gradient(135deg, #d4af37 0%, #f4d03f 100%);
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 30px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        }

        .header h1 {
            color: #1a1a2e;
            font-size: 36px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .header p {
            color: #1a1a2e;
            font-size: 16px;
            opacity: 0.8;
        }

        .header-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
        }

        .user-badge {
            background: rgba(26, 26, 46, 0.2);
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: 600;
            font-size: 14px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
        }

        .btn-primary {
            background: #e91e63;
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(233, 30, 99, 0.4);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.2);
            color: white;
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .lobby-container {
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 30px;
        }

        .rooms-section {
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .section-title {
            font-size: 24px;
            color: #1a1a2e;
            font-weight: 700;
        }

        .rooms-grid {
            display: grid;
            gap: 20px;
        }

        .room-card {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 25px;
            border-radius: 15px;
            border: 2px solid transparent;
            transition: all 0.3s;
            cursor: pointer;
        }

        .room-card:hover {
            border-color: #d4af37;
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(212, 175, 55, 0.3);
        }

        .room-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 15px;
        }

        .room-name {
            font-size: 20px;
            font-weight: 700;
            color: #1a1a2e;
            margin-bottom: 5px;
        }

        .room-creator {
            font-size: 12px;
            color: #666;
        }

        .room-participants {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #4caf50;
            font-weight: 600;
            font-size: 14px;
        }

        .participant-count {
            background: #4caf50;
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
        }

        .room-description {
            color: #666;
            font-size: 14px;
            margin-bottom: 15px;
            line-height: 1.5;
        }

        .room-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .room-time {
            font-size: 12px;
            color: #999;
        }

        .join-btn {
            padding: 8px 20px;
            background: linear-gradient(135deg, #d4af37 0%, #f4d03f 100%);
            color: #1a1a2e;
            border: none;
            border-radius: 20px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
        }

        .join-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(212, 175, 55, 0.4);
        }

        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .create-room-card {
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
        }

        .create-room-card h3 {
            color: #1a1a2e;
            margin-bottom: 20px;
            font-size: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-label {
            display: block;
            color: #666;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .form-input,
        .form-textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 14px;
            transition: all 0.3s;
            font-family: inherit;
        }

        .form-input:focus,
        .form-textarea:focus {
            outline: none;
            border-color: #d4af37;
            box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.1);
        }

        .form-textarea {
            resize: vertical;
            min-height: 80px;
        }

        .stats-card {
            background: rgba(255, 255, 255, 0.95);
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
        }

        .stats-card h3 {
            color: #1a1a2e;
            margin-bottom: 20px;
            font-size: 18px;
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #e0e0e0;
        }

        .stat-item:last-child {
            border-bottom: none;
        }

        .stat-label {
            color: #666;
            font-size: 14px;
        }

        .stat-value {
            font-weight: 700;
            color: #1a1a2e;
            font-size: 18px;
        }

        .video-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            z-index: 1000;
            display: flex;
            flex-direction: column;
        }

        .video-header {
            background: linear-gradient(135deg, #d4af37 0%, #f4d03f 100%);
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .video-header h2 {
            color: #1a1a2e;
            font-size: 20px;
        }

        .leave-btn {
            padding: 10px 20px;
            background: #e91e63;
            color: white;
            border: none;
            border-radius: 20px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
        }

        .leave-btn:hover {
            background: #c2185b;
        }

        .jitsi-wrapper {
            flex: 1;
        }

        .login-container {
            max-width: 500px;
            margin: 100px auto;
            background: rgba(255, 255, 255, 0.95);
            padding: 50px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            text-align: center;
        }

        .login-container h2 {
            color: #1a1a2e;
            margin-bottom: 15px;
            font-size: 32px;
        }

        .login-container p {
            color: #666;
            margin-bottom: 35px;
            font-size: 16px;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #999;
        }

        .empty-state-icon {
            font-size: 64px;
            margin-bottom: 20px;
        }

        .empty-state-text {
            font-size: 18px;
            margin-bottom: 10px;
        }

        .empty-state-hint {
            font-size: 14px;
        }

        .error-message {
            background: #ffebee;
            color: #c62828;
            padding: 12px 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
        }

        @media (max-width: 968px) {
            .lobby-container {
                grid-template-columns: 1fr;
            }

            .header h1 {
                font-size: 24px;
            }

            .header-controls {
                flex-direction: column;
                gap: 10px;
                align-items: stretch;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // Firebase –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
        const firebaseConfig = {
            apiKey: "AIzaSyCBHjuNA9S_wGHX3sWVrhaUTuNbwaE__HM",
            authDomain: "chat-millionairov.firebaseapp.com",
            databaseURL: "https://chat-millionairov-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "chat-millionairov",
            storageBucket: "chat-millionairov.firebasestorage.app",
            messagingSenderId: "861766095966",
            appId: "1:861766095966:web:9b8e24f87a26c89bc7d0cf"
        };

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Firebase
        let database = null;
        try {
            if (!firebase.apps.length) {
                firebase.initializeApp(firebaseConfig);
            }
            database = firebase.database();
            console.log('‚úÖ Firebase –ø–æ–¥–∫–ª—é—á–µ–Ω');
        } catch (error) {
            console.error('‚ùå –û—à–∏–±–∫–∞ Firebase:', error);
        }

        const App = () => {
            const [currentUser, setCurrentUser] = useState(null);
            const [rooms, setRooms] = useState([]);
            const [currentRoom, setCurrentRoom] = useState(null);
            const [loading, setLoading] = useState(false);
            const [error, setError] = useState('');
            
            // –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–º–Ω–∞—Ç—ã
            const [roomName, setRoomName] = useState('');
            const [roomDescription, setRoomDescription] = useState('');
            
            const jitsiApi = useRef(null);

            // –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∫–æ–º–Ω–∞—Ç—ã
            useEffect(() => {
                if (!database || !currentUser) return;

                const roomsRef = database.ref('videoRooms');
                
                const handleRooms = (snapshot) => {
                    const data = snapshot.val();
                    if (data) {
                        const roomsList = Object.entries(data)
                            .map(([key, value]) => ({ id: key, ...value }))
                            .sort((a, b) => b.createdAt - a.createdAt);
                        setRooms(roomsList);
                    } else {
                        setRooms([]);
                    }
                };

                roomsRef.on('value', handleRooms);
                return () => roomsRef.off('value', handleRooms);
            }, [currentUser]);

            // –í—Ö–æ–¥
            const handleLogin = async (name) => {
                if (!name.trim()) {
                    setError('–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è');
                    return;
                }
                if (!database) {
                    setError('–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Firebase');
                    return;
                }
                setLoading(true);
                setError('');
                
                try {
                    setCurrentUser(name.trim());
                } catch (err) {
                    setError('–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞: ' + err.message);
                } finally {
                    setLoading(false);
                }
            };

            // –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã
            const handleCreateRoom = async (e) => {
                e.preventDefault();
                
                if (!roomName.trim()) {
                    setError('–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã');
                    return;
                }

                setLoading(true);
                setError('');

                try {
                    const roomsRef = database.ref('videoRooms');
                    const newRoom = {
                        name: roomName.trim(),
                        description: roomDescription.trim() || '–í–∏–¥–µ–æ–∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—è',
                        creator: currentUser,
                        createdAt: Date.now(),
                        participants: {
                            [currentUser]: {
                                name: currentUser,
                                joinedAt: Date.now()
                            }
                        }
                    };

                    const roomRef = await roomsRef.push(newRoom);
                    
                    // –û—á–∏—Å—Ç–∫–∞ —Ñ–æ—Ä–º—ã
                    setRoomName('');
                    setRoomDescription('');
                    
                    // –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ –∫–æ–º–Ω–∞—Ç–µ
                    joinRoom({ id: roomRef.key, ...newRoom });
                } catch (err) {
                    setError('–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–º–Ω–∞—Ç—ã: ' + err.message);
                } finally {
                    setLoading(false);
                }
            };

            // –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ –∫–æ–º–Ω–∞—Ç–µ
            const joinRoom = async (room) => {
                try {
                    // –î–æ–±–∞–≤–ª—è–µ–º —Å–µ–±—è –≤ —É—á–∞—Å—Ç–Ω–∏–∫–∏
                    const roomRef = database.ref(`videoRooms/${room.id}/participants/${currentUser}`);
                    await roomRef.set({
                        name: currentUser,
                        joinedAt: Date.now()
                    });

                    setCurrentRoom(room);

                    // –ó–∞–ø—É—Å–∫ Jitsi
                    setTimeout(() => {
                        const domain = 'meet.jit.si';
                        const options = {
                            roomName: `millionaires-${room.id}`,
                            width: '100%',
                            height: '100%',
                            parentNode: document.querySelector('#jitsi-container'),
                            userInfo: {
                                displayName: currentUser
                            },
                            configOverwrite: {
                                startWithAudioMuted: false,
                                startWithVideoMuted: false,
                                enableWelcomePage: false
                            },
                            interfaceConfigOverwrite: {
                                TOOLBAR_BUTTONS: [
                                    'microphone', 'camera', 'closedcaptions', 'desktop',
                                    'fullscreen', 'fodeviceselection', 'profile',
                                    'chat', 'recording', 'livestreaming',
                                    'settings', 'raisehand', 'videoquality', 'filmstrip',
                                    'stats', 'shortcuts', 'tileview', 'help'
                                ],
                                SHOW_JITSI_WATERMARK: false
                            }
                        };
                        
                        jitsiApi.current = new JitsiMeetExternalAPI(domain, options);

                        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã—Ö–æ–¥–∞ –∏–∑ –∫–æ–º–Ω–∞—Ç—ã
                        jitsiApi.current.addEventListener('readyToClose', () => {
                            leaveRoom();
                        });
                    }, 100);
                } catch (err) {
                    setError('–û—à–∏–±–∫–∞ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è: ' + err.message);
                }
            };

            // –í—ã—Ö–æ–¥ –∏–∑ –∫–æ–º–Ω–∞—Ç—ã
            const leaveRoom = async () => {
                if (!currentRoom) return;

                try {
                    // –£–¥–∞–ª—è–µ–º —Å–µ–±—è –∏–∑ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
                    const participantRef = database.ref(`videoRooms/${currentRoom.id}/participants/${currentUser}`);
                    await participantRef.remove();

                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –µ—â–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏
                    const roomRef = database.ref(`videoRooms/${currentRoom.id}/participants`);
                    const snapshot = await roomRef.once('value');
                    
                    // –ï—Å–ª–∏ –Ω–∏–∫–æ–≥–æ –Ω–µ—Ç - —É–¥–∞–ª—è–µ–º –∫–æ–º–Ω–∞—Ç—É
                    if (!snapshot.exists()) {
                        await database.ref(`videoRooms/${currentRoom.id}`).remove();
                    }

                    // –ó–∞–∫—Ä—ã–≤–∞–µ–º Jitsi
                    if (jitsiApi.current) {
                        jitsiApi.current.dispose();
                        jitsiApi.current = null;
                    }

                    setCurrentRoom(null);
                } catch (err) {
                    console.error('–û—à–∏–±–∫–∞ –≤—ã—Ö–æ–¥–∞:', err);
                }
            };

            // –í—ã—Ö–æ–¥ –∏–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
            const handleLogout = () => {
                if (currentRoom) {
                    leaveRoom();
                }
                setCurrentUser(null);
                setRooms([]);
            };

            const formatTime = (timestamp) => {
                const date = new Date(timestamp);
                const now = new Date();
                const diff = now - date;
                
                if (diff < 60000) return '—Ç–æ–ª—å–∫–æ —á—Ç–æ';
                if (diff < 3600000) return Math.floor(diff / 60000) + ' –º–∏–Ω –Ω–∞–∑–∞–¥';
                if (diff < 86400000) return Math.floor(diff / 3600000) + ' —á –Ω–∞–∑–∞–¥';
                return date.toLocaleDateString('ru-RU');
            };

            const getParticipantCount = (room) => {
                return room.participants ? Object.keys(room.participants).length : 0;
            };

            // –≠–∫—Ä–∞–Ω –≤—Ö–æ–¥–∞
            if (!currentUser) {
                return <LoginScreen onLogin={handleLogin} loading={loading} error={error} />;
            }

            // –í–∏–¥–µ–æ–∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—è
            if (currentRoom) {
                return (
                    <div className="video-container">
                        <div className="video-header">
                            <h2>üé• {currentRoom.name}</h2>
                            <button className="leave-btn" onClick={leaveRoom}>
                                –ü–æ–∫–∏–Ω—É—Ç—å –∫–æ–º–Ω–∞—Ç—É
                            </button>
                        </div>
                        <div id="jitsi-container" className="jitsi-wrapper"></div>
                    </div>
                );
            }

            // –õ–æ–±–±–∏
            return (
                <div className="app-container">
                    <div className="header">
                        <h1>üé• –í–∏–¥–µ–æ–∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏ –º–∏–ª–ª–∏–∞—Ä–¥–µ—Ä–æ–≤</h1>
                        <p>–°–æ–∑–¥–∞–≤–∞–π—Ç–µ –∫–æ–º–Ω–∞—Ç—ã –∏ –æ–±—â–∞–π—Ç–µ—Å—å —Å –∫–æ–ª–ª–µ–≥–∞–º–∏ –≤ HD –∫–∞—á–µ—Å—Ç–≤–µ</p>
                        <div className="header-controls">
                            <div className="user-badge">
                                üë§ {currentUser}
                            </div>
                            <button className="btn btn-secondary" onClick={handleLogout}>
                                –í—ã–π—Ç–∏
                            </button>
                        </div>
                    </div>

                    <div className="lobby-container">
                        {/* –°–ø–∏—Å–æ–∫ –∫–æ–º–Ω–∞—Ç */}
                        <div className="rooms-section">
                            <div className="section-header">
                                <h2 className="section-title">–ê–∫—Ç–∏–≤–Ω—ã–µ –∫–æ–º–Ω–∞—Ç—ã</h2>
                                <span style={{ color: '#4caf50', fontWeight: '600' }}>
                                    {rooms.length} {rooms.length === 1 ? '–∫–æ–º–Ω–∞—Ç–∞' : '–∫–æ–º–Ω–∞—Ç'}
                                </span>
                            </div>

                            {error && <div className="error-message">{error}</div>}

                            {rooms.length === 0 ? (
                                <div className="empty-state">
                                    <div className="empty-state-icon">üé•</div>
                                    <div className="empty-state-text">–ü–æ–∫–∞ –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–æ–º–Ω–∞—Ç</div>
                                    <div className="empty-state-hint">
                                        –°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—É—é –∫–æ–º–Ω–∞—Ç—É –∏ –ø—Ä–∏–≥–ª–∞—Å–∏—Ç–µ –∫–æ–ª–ª–µ–≥!
                                    </div>
                                </div>
                            ) : (
                                <div className="rooms-grid">
                                    {rooms.map((room) => (
                                        <div key={room.id} className="room-card" onClick={() => joinRoom(room)}>
                                            <div className="room-header">
                                                <div>
                                                    <div className="room-name">{room.name}</div>
                                                    <div className="room-creator">
                                                        –°–æ–∑–¥–∞–ª: {room.creator}
                                                    </div>
                                                </div>
                                                <div className="participant-count">
                                                    üë• {getParticipantCount(room)}
                                                </div>
                                            </div>
                                            <div className="room-description">
                                                {room.description}
                                            </div>
                                            <div className="room-footer">
                                                <div className="room-time">
                                                    {formatTime(room.createdAt)}
                                                </div>
                                                <button className="join-btn">
                                                    –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è
                                                </button>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            )}
                        </div>

                        {/* –°–∞–π–¥–±–∞—Ä */}
                        <div className="sidebar">
                            {/* –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã */}
                            <div className="create-room-card">
                                <h3>–°–æ–∑–¥–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É</h3>
                                <form onSubmit={handleCreateRoom}>
                                    <div className="form-group">
                                        <label className="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ</label>
                                        <input
                                            type="text"
                                            className="form-input"
                                            placeholder="–ü–ª–∞–Ω—ë—Ä–∫–∞ –∫–æ–º–∞–Ω–¥—ã"
                                            value={roomName}
                                            onChange={(e) => setRoomName(e.target.value)}
                                            maxLength={50}
                                        />
                                    </div>
                                    <div className="form-group">
                                        <label className="form-label">–û–ø–∏—Å–∞–Ω–∏–µ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
                                        <textarea
                                            className="form-textarea"
                                            placeholder="–û–±—Å—É–∂–¥–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞..."
                                            value={roomDescription}
                                            onChange={(e) => setRoomDescription(e.target.value)}
                                            maxLength={200}
                                        />
                                    </div>
                                    <button 
                                        type="submit" 
                                        className="btn btn-primary" 
                                        style={{ width: '100%' }}
                                        disabled={loading}
                                    >
                                        {loading ? '–°–æ–∑–¥–∞–Ω–∏–µ...' : '–°–æ–∑–¥–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É'}
                                    </button>
                                </form>
                            </div>

                            {/* –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ */}
                            <div className="stats-card">
                                <h3>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
                                <div className="stat-item">
                                    <span className="stat-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö –∫–æ–º–Ω–∞—Ç</span>
                                    <span className="stat-value">{rooms.length}</span>
                                </div>
                                <div className="stat-item">
                                    <span className="stat-label">–£—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –æ–Ω–ª–∞–π–Ω</span>
                                    <span className="stat-value">
                                        {rooms.reduce((sum, room) => sum + getParticipantCount(room), 0)}
                                    </span>
                                </div>
                                <div className="stat-item">
                                    <span className="stat-label">–í–∞—à –ø—Ä–æ—Ñ–∏–ª—å</span>
                                    <span className="stat-value">üë§ {currentUser}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const LoginScreen = ({ onLogin, loading, error }) => {
            const [name, setName] = useState('');

            const handleSubmit = (e) => {
                e.preventDefault();
                onLogin(name);
            };

            return (
                <div className="app-container">
                    <div className="header">
                        <h1>üé• –í–∏–¥–µ–æ–∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏ –º–∏–ª–ª–∏–∞—Ä–¥–µ—Ä–æ–≤</h1>
                        <p>HD –≤–∏–¥–µ–æ–∑–≤–æ–Ω–∫–∏ ‚Ä¢ –ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è ‚Ä¢ –ë–µ—Å–ø–ª–∞—Ç–Ω–æ</p>
                    </div>

                    <div className="login-container">
                        <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</h2>
                        <p>–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è –¥–ª—è –Ω–∞—á–∞–ª–∞</p>

                        {error && <div className="error-message">{error}</div>}

                        <form onSubmit={handleSubmit}>
                            <div className="form-group">
                                <input
                                    type="text"
                                    className="form-input"
                                    placeholder="–í–∞—à–µ –∏–º—è"
                                    value={name}
                                    onChange={(e) => setName(e.target.value)}
                                    maxLength={20}
                                    disabled={loading}
                                    autoFocus
                                    style={{ textAlign: 'center', fontSize: '16px' }}
                                />
                            </div>
                            <button 
                                type="submit" 
                                className="btn btn-primary"
                                style={{ width: '100%', padding: '15px' }}
                                disabled={loading || !name.trim()}
                            >
                                {loading ? '–í—Ö–æ–¥...' : '–ù–∞—á–∞—Ç—å'}
                            </button>
                        </form>

                        <div style={{ 
                            marginTop: '30px', 
                            padding: '20px', 
                            background: 'rgba(76, 175, 80, 0.1)', 
                            borderRadius: '15px', 
                            fontSize: '14px',
                            textAlign: 'left'
                        }}>
                            <strong style={{ color: '#2e7d32' }}>‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:</strong>
                            <div style={{ marginTop: '10px', color: '#666', lineHeight: '1.8' }}>
                                üé• HD –≤–∏–¥–µ–æ –∏ –∞—É–¥–∏–æ<br/>
                                üë• –ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤<br/>
                                üñ•Ô∏è –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —ç–∫—Ä–∞–Ω–∞<br/>
                                üí¨ –¢–µ–∫—Å—Ç–æ–≤—ã–π —á–∞—Ç –≤ –≤–∏–¥–µ–æ<br/>
                                üîí –ó–∞—â–∏—â—ë–Ω–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ<br/>
                                üì± –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö<br/>
                                ‚è∞ –ë–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –ø–æ –≤—Ä–µ–º–µ–Ω–∏
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
