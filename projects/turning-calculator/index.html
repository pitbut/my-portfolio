<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Ä–µ–∂–∏–º–æ–≤ —Ä–µ–∑–∞–Ω–∏—è - –¢–æ–∫–∞—Ä–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ v1.0</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 14px;
            opacity: 0.9;
        }

        .content {
            padding: 30px;
        }

        .form-section {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .form-section h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 18px;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        label {
            font-weight: 600;
            margin-bottom: 5px;
            color: #333;
            font-size: 14px;
        }

        input, select {
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s;
        }

        input:focus, select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .button-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
            transform: translateY(-2px);
        }

        .btn-info {
            background: #17a2b8;
            color: white;
        }

        .btn-info:hover {
            background: #138496;
            transform: translateY(-2px);
        }

        .btn-warning {
            background: #ffc107;
            color: #212529;
        }

        .btn-warning:hover {
            background: #e0a800;
            transform: translateY(-2px);
        }

        .results {
            display: none;
            margin-top: 30px;
        }

        .results.active {
            display: block;
        }

        .result-card {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
        }

        .result-card h4 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 16px;
        }

        .result-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid rgba(0,0,0,0.1);
        }

        .result-item:last-child {
            border-bottom: none;
        }

        .result-label {
            font-weight: 600;
            color: #555;
        }

        .result-value {
            color: #333;
            font-weight: 700;
        }

        .power-check-success {
            background: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #28a745;
        }

        .power-check-fail {
            background: #f8d7da;
            color: #721c24;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #dc3545;
        }

        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #333;
            color: white;
            padding: 15px 20px;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.3s;
            z-index: 1000;
        }

        .toast.show {
            opacity: 1;
            transform: translateY(0);
        }

        .toast.success { background: #28a745; }
        .toast.error { background: #dc3545; }
        .toast.warning { background: #ffc107; color: #212529; }
        .toast.info { background: #17a2b8; }

        @media (max-width: 768px) {
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .button-group {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>‚öôÔ∏è –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Ä–µ–∂–∏–º–æ–≤ —Ä–µ–∑–∞–Ω–∏—è</h1>
            <p>–¢–æ–∫–∞—Ä–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ v1.0 | –° —Ç–∞–±–ª–∏—Ü–∞–º–∏ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤ –∏–∑ –º–µ—Ç–æ–¥–∏—á–∫–∏</p>
        </div>

        <div class="content">
            <!-- –¢–∏–ø –æ–±—Ä–∞–±–æ—Ç–∫–∏ -->
            <div class="form-section">
                <h3>üîß –¢–∏–ø –æ–±—Ä–∞–±–æ—Ç–∫–∏</h3>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="operationType">–û–ø–µ—Ä–∞—Ü–∏—è:</label>
                        <select id="operationType">
                            <option>–ù–∞—Ä—É–∂–Ω–æ–µ –ø—Ä–æ–¥–æ–ª—å–Ω–æ–µ —Ç–æ—á–µ–Ω–∏–µ –ø—Ä–æ—Ö–æ–¥–Ω—ã–º–∏ —Ä–µ–∑—Ü–∞–º–∏</option>
                            <option>–ù–∞—Ä—É–∂–Ω–æ–µ –ø—Ä–æ–¥–æ–ª—å–Ω–æ–µ —Ç–æ—á–µ–Ω–∏–µ —Ä–µ–∑—Ü–∞–º–∏ —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º –ª–µ–∑–≤–∏–µ–º</option>
                            <option>–†–∞—Å—Ç–∞—á–∏–≤–∞–Ω–∏–µ</option>
                            <option>–ü–æ–¥—Ä–µ–∑–∞–Ω–∏–µ —Ç–æ—Ä—Ü–∞</option>
                            <option>–û—Ç—Ä–µ–∑–∞–Ω–∏–µ</option>
                            <option>–ü—Ä–æ—Ä–µ–∑–∞–Ω–∏–µ</option>
                            <option>–§–∞—Å–æ–Ω–Ω–æ–µ —Ç–æ—á–µ–Ω–∏–µ</option>
                            <option>–ù–∞—Ä–µ–∑–∞–Ω–∏–µ –∫—Ä–µ–ø–µ–∂–Ω–æ–π —Ä–µ–∑—å–±—ã (—á–µ—Ä–Ω–æ–≤—ã–µ —Ö–æ–¥—ã)</option>
                            <option>–ù–∞—Ä–µ–∑–∞–Ω–∏–µ –∫—Ä–µ–ø–µ–∂–Ω–æ–π —Ä–µ–∑—å–±—ã (—á–∏—Å—Ç–æ–≤—ã–µ —Ö–æ–¥—ã)</option>
                            <option>–í–∏—Ö—Ä–µ–≤–æ–µ –Ω–∞—Ä–µ–∑–∞–Ω–∏–µ —Ä–µ–∑—å–±—ã</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- –ú–∞—Ç–µ—Ä–∏–∞–ª—ã -->
            <div class="form-section">
                <h3>üî© –ú–∞—Ç–µ—Ä–∏–∞–ª—ã</h3>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="material">–ú–∞—Ç–µ—Ä–∏–∞–ª –¥–µ—Ç–∞–ª–∏:</label>
                        <select id="material">
                            <option>–°—Ç–∞–ª—å –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–æ–Ω–Ω–∞—è (œÉ–≤ = 750 –ú–ü–∞)</option>
                            <option>–°—Ç–∞–ª—å –∂–∞—Ä–æ–ø—Ä–æ—á–Ω–∞—è 12–•18–ù9–¢ (141 –ù–í)</option>
                            <option>–ß—É–≥—É–Ω —Å–µ—Ä—ã–π (190 –ù–í)</option>
                            <option>–ß—É–≥—É–Ω –∫–æ–≤–∫–∏–π (150 –ù–í)</option>
                            <option>–ú–µ–¥–Ω—ã–µ –≥–µ—Ç–µ—Ä–æ–≥–µ–Ω–Ω—ã–µ —Å–ø–ª–∞–≤—ã (120 –ù–í)</option>
                            <option>–°–∏–ª—É–º–∏–Ω –∏ –ª–∏—Ç–µ–π–Ω—ã–µ –∞–ª—é–º–∏–Ω–∏–µ–≤—ã–µ —Å–ø–ª–∞–≤—ã</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="toolMaterial">–ú–∞—Ç–µ—Ä–∏–∞–ª –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞:</label>
                        <select id="toolMaterial">
                            <option>–¢–≤–µ—Ä–¥—ã–π —Å–ø–ª–∞–≤ –¢15–ö6</option>
                            <option>–¢–≤–µ—Ä–¥—ã–π —Å–ø–ª–∞–≤ –¢5–ö10</option>
                            <option>–¢–≤–µ—Ä–¥—ã–π —Å–ø–ª–∞–≤ –¢14–ö8</option>
                            <option>–¢–≤–µ—Ä–¥—ã–π —Å–ø–ª–∞–≤ –¢30–ö4</option>
                            <option>–¢–≤–µ—Ä–¥—ã–π —Å–ø–ª–∞–≤ –í–ö8</option>
                            <option>–¢–≤–µ—Ä–¥—ã–π —Å–ø–ª–∞–≤ –í–ö6</option>
                            <option>–¢–≤–µ—Ä–¥—ã–π —Å–ø–ª–∞–≤ –í–ö4</option>
                            <option>–ë—ã—Å—Ç—Ä–æ—Ä–µ–∂—É—â–∞—è —Å—Ç–∞–ª—å –†18</option>
                            <option>–ë—ã—Å—Ç—Ä–æ—Ä–µ–∂—É—â–∞—è —Å—Ç–∞–ª—å –†6–ú5</option>
                            <option>–ë—ã—Å—Ç—Ä–æ—Ä–µ–∂—É—â–∞—è —Å—Ç–∞–ª—å –†9</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ -->
            <div class="form-section">
                <h3>üìã –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏</h3>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="machiningType">–í–∏–¥ –æ–±—Ä–∞–±–æ—Ç–∫–∏:</label>
                        <select id="machiningType">
                            <option>–ß–µ—Ä–Ω–æ–≤–∞—è</option>
                            <option>–ü–æ–ª—É—á–∏—Å—Ç–æ–≤–∞—è</option>
                            <option>–ß–∏—Å—Ç–æ–≤–∞—è</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="surfaceCondition">–°–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏:</label>
                        <select id="surfaceCondition">
                            <option>–ß–∏—Å—Ç–∞—è –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—å</option>
                            <option>–ü–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—å —Å –∫–æ—Ä–∫–æ–π</option>
                            <option>–ü—Ä–æ–∫–∞—Ç–Ω–∞—è –æ–∫–∞–ª–∏–Ω–∞</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="cooling">–û—Ö–ª–∞–∂–¥–µ–Ω–∏–µ:</label>
                        <select id="cooling">
                            <option>–° –æ—Ö–ª–∞–∂–¥–µ–Ω–∏–µ–º</option>
                            <option>–ë–µ–∑ –æ—Ö–ª–∞–∂–¥–µ–Ω–∏—è</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- –ì–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã -->
            <div class="form-section">
                <h3>üìê –ì–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã</h3>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="diameter">–î–∏–∞–º–µ—Ç—Ä —Ç–æ—á–µ–Ω–∏—è D, –º–º:</label>
                        <input type="number" id="diameter" value="50" step="0.1">
                    </div>
                    <div class="form-group">
                        <label for="depth">–ì–ª—É–±–∏–Ω–∞ —Ä–µ–∑–∞–Ω–∏—è t, –º–º:</label>
                        <input type="number" id="depth" value="2.0" step="0.1">
                    </div>
                    <div class="form-group">
                        <label for="feed">–ü–æ–¥–∞—á–∞ S, –º–º/–æ–±:</label>
                        <input type="number" id="feed" value="0.3" step="0.01">
                    </div>
                    <div class="form-group">
                        <label for="length">–î–ª–∏–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ l, –º–º:</label>
                        <input type="number" id="length" value="100" step="1">
                    </div>
                    <div class="form-group">
                        <label for="approach">–í—Ä–µ–∑–∞–Ω–∏–µ l‚ÇÅ, –º–º:</label>
                        <input type="number" id="approach" value="3" step="0.1">
                    </div>
                    <div class="form-group">
                        <label for="overtravel">–ü–µ—Ä–µ–±–µ–≥ l‚ÇÇ, –º–º:</label>
                        <input type="number" id="overtravel" value="3" step="0.1">
                    </div>
                </div>
            </div>

            <!-- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–ø–µ—Ä–∞—Ü–∏–∏ -->
            <div class="form-section">
                <h3>üî¢ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–ø–µ—Ä–∞—Ü–∏–∏</h3>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="operationNumber">–ù–æ–º–µ—Ä –æ–ø–µ—Ä–∞—Ü–∏–∏:</label>
                        <input type="text" id="operationNumber" value="I">
                    </div>
                    <div class="form-group">
                        <label for="transitionNumber">–ù–æ–º–µ—Ä –ø–µ—Ä–µ—Ö–æ–¥–∞:</label>
                        <input type="number" id="transitionNumber" value="1">
                    </div>
                    <div class="form-group">
                        <label for="toolLife">–°—Ç–æ–π–∫–æ—Å—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ T, –º–∏–Ω:</label>
                        <input type="number" id="toolLife" value="90" step="1">
                    </div>
                </div>
            </div>

            <!-- –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ -->
            <div class="form-section">
                <h3>üè≠ –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ</h3>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="machine">–°—Ç–∞–Ω–æ–∫:</label>
                        <select id="machine">
                            <option>–¢–æ–∫–∞—Ä–Ω–æ-–≤–∏–Ω—Ç–æ—Ä–µ–∑–Ω—ã–π 1–ö62</option>
                            <option>–¢–æ–∫–∞—Ä–Ω–æ-–≤–∏–Ω—Ç–æ—Ä–µ–∑–Ω—ã–π 16–ö20</option>
                            <option>–¢–æ–∫–∞—Ä–Ω–æ-–≤–∏–Ω—Ç–æ—Ä–µ–∑–Ω—ã–π 1–ê62</option>
                            <option>–¢–æ–∫–∞—Ä–Ω—ã–π –∞–≤—Ç–æ–º–∞—Ç 1–ê240</option>
                            <option>–¢–æ–∫–∞—Ä–Ω—ã–π –ø–æ–ª—É–∞–≤—Ç–æ–º–∞—Ç 1–ë240</option>
                            <option>–¢–æ–∫–∞—Ä–Ω—ã–π —Å –ß–ü–£ 16–ö20–§3</option>
                            <option>–¢–æ–∫–∞—Ä–Ω—ã–π —Å –ß–ü–£ 16–ê20–§3</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="machinePower">–ú–æ—â–Ω–æ—Å—Ç—å —Å—Ç–∞–Ω–∫–∞ N, –∫–í—Ç:</label>
                        <input type="number" id="machinePower" value="10" step="0.1">
                    </div>
                    <div class="form-group">
                        <label for="efficiency">–ö–ü–î —Å—Ç–∞–Ω–∫–∞ Œ∑:</label>
                        <input type="number" id="efficiency" value="0.8" step="0.01" min="0" max="1">
                    </div>
                </div>
            </div>

            <!-- –ü—Ä–∏—Å–ø–æ—Å–æ–±–ª–µ–Ω–∏–µ -->
            <div class="form-section">
                <h3>üîß –ü—Ä–∏—Å–ø–æ—Å–æ–±–ª–µ–Ω–∏–µ –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç</h3>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="fixture">–ü—Ä–∏—Å–ø–æ—Å–æ–±–ª–µ–Ω–∏–µ:</label>
                        <input type="text" id="fixture" value="3—Ö-–∫—É–ª–∞—á–∫–æ–≤—ã–π –ø–∞—Ç—Ä–æ–Ω">
                    </div>
                    <div class="form-group">
                        <label for="toolGost">–ì–û–°–¢ —Ä–µ–∑—Ü–∞:</label>
                        <input type="text" id="toolGost" value="–ì–û–°–¢ 18880-70">
                    </div>
                </div>
            </div>

            <!-- –ö–Ω–æ–ø–∫–∏ -->
            <div class="form-section" style="grid-column: 1 / -1;">
                <div class="button-group">
                    <button class="btn btn-primary" onclick="calculate()">
                        üìä –í—ã–ø–æ–ª–Ω–∏—Ç—å —Ä–∞—Å—á–µ—Ç
                    </button>
                    <button class="btn btn-secondary" onclick="generateReport()">
                        üìÑ –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á–µ—Ç
                    </button>
                    <button class="btn btn-info" onclick="saveData()">
                        üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
                    </button>
                    <button class="btn btn-info" onclick="loadData()">
                        üìÇ –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
                    </button>
                    <button class="btn btn-warning" onclick="clearResults()">
                        üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å
                    </button>
                </div>
            </div>

            <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã -->
            <div class="results" id="results">
                <div class="form-section">
                    <h3>üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å—á–µ—Ç–∞</h3>
                    <div id="resultsContent"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="toast" id="toast"></div>

    <script>
        // –ì–ª–æ–±–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
        let calculationResults = null;

        // –¢–∞–±–ª–∏—Ü—ã –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤ –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏ —Ä–µ–∑–∞–Ω–∏—è
        function getCuttingSpeedCoefficients(material, toolMaterial, machiningType, feed_s, depth_p = null) {
            // –°–¢–ê–õ–¨ –ö–û–ù–°–¢–†–£–ö–¶–ò–û–ù–ù–ê–Ø œÉ–≤ = 750 –ú–ü–∞
            if (material.includes("–°—Ç–∞–ª—å") && material.includes("750")) {
                // –ù–∞—Ä—É–∂–Ω–æ–µ –ø—Ä–æ–¥–æ–ª—å–Ω–æ–µ —Ç–æ—á–µ–Ω–∏–µ –ø—Ä–æ—Ö–æ–¥–Ω—ã–º–∏ —Ä–µ–∑—Ü–∞–º–∏
                if (machiningType.includes("–ø—Ä–æ–¥–æ–ª—å–Ω–æ–µ") && machiningType.includes("–ø—Ä–æ—Ö–æ–¥–Ω")) {
                    if (toolMaterial.includes("–¢15–ö6")) {
                        if (feed_s <= 0.3) return { Cv: 350, x: 0, y: 0.20, m: 0.20 };
                        else if (feed_s <= 0.7) return { Cv: 290, x: 0.15, y: 0.35, m: 0.20 };
                        else return { Cv: 280, x: 0, y: 0.45, m: 0.20 };
                    }
                }
                
                // –¢–æ—á–µ–Ω–∏–µ —Ä–µ–∑—Ü–∞–º–∏ —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º –ª–µ–∑–≤–∏–µ–º
                if (machiningType.includes("–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω") && machiningType.includes("–ª–µ–∑–≤–∏")) {
                    if (toolMaterial.includes("–¢15–ö6")) {
                        if (feed_s <= (depth_p || 1.0)) return { Cv: 250, x: 0.30, y: 0.15, m: 0.18 };
                        else return { Cv: 250, x: 0.15, y: 0.30, m: 0.18 };
                    }
                }
                
                // –û—Ç—Ä–µ–∑–∞–Ω–∏–µ
                if (machiningType.includes("–û—Ç—Ä–µ–∑–∞–Ω")) {
                    if (toolMaterial.includes("–¢5–ö10")) return { Cv: 47, x: 0, y: 0.80, m: 0.20 };
                    else if (toolMaterial.includes("–†18")) return { Cv: 23.7, x: 0, y: 0.66, m: 0.25 };
                }
                
                // –§–∞—Å–æ–Ω–Ω–æ–µ —Ç–æ—á–µ–Ω–∏–µ
                if (machiningType.includes("–§–∞—Å–æ–Ω–Ω")) {
                    if (toolMaterial.includes("–†18")) return { Cv: 22.7, x: 0, y: 0.50, m: 0.30 };
                }
                
                // –ù–∞—Ä–µ–∑–∞–Ω–∏–µ —Ä–µ–∑—å–±—ã
                if (machiningType.includes("–ù–∞—Ä–µ–∑–∞–Ω") && machiningType.includes("—Ä–µ–∑—å–±")) {
                    if (toolMaterial.includes("–¢15–ö6")) return { Cv: 244, x: 0.23, y: 0.30, m: 0.20 };
                    else if (toolMaterial.includes("–†6–ú5")) {
                        if (machiningType.includes("—á–µ—Ä–Ω–æ–≤")) {
                            if (depth_p && depth_p <= 2) return { Cv: 14.8, x: 0.70, y: 0.30, m: 0.11 };
                            else return { Cv: 30, x: 0.60, y: 0.25, m: 0.08 };
                        } else {
                            return { Cv: 41.8, x: 0.45, y: 0.30, m: 0.13 };
                        }
                    }
                }
                
                // –í–∏—Ö—Ä–µ–≤–æ–µ –Ω–∞—Ä–µ–∑–∞–Ω–∏–µ
                if (machiningType.includes("–í–∏—Ö—Ä–µ–≤")) {
                    if (toolMaterial.includes("–¢15–ö6")) return { Cv: 2330, x: 0.50, y: 0.50, m: 0.50 };
                }
            }
            
            // –ß–£–ì–£–ù –°–ï–†–´–ô 190–ù–í
            else if (material.includes("–ß—É–≥—É–Ω —Å–µ—Ä—ã–π") || (material.includes("–ß—É–≥—É–Ω") && material.includes("190"))) {
                if (machiningType.includes("–ø—Ä–æ–¥–æ–ª—å–Ω–æ–µ") && machiningType.includes("–ø—Ä–æ—Ö–æ–¥–Ω")) {
                    if (toolMaterial.includes("–í–ö6")) {
                        if (feed_s <= 0.40) return { Cv: 292, x: 0.15, y: 0.20, m: 0.20 };
                        else return { Cv: 243, x: 0.15, y: 0.40, m: 0.20 };
                    }
                }
                
                if (machiningType.includes("–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω")) {
                    if (toolMaterial.includes("–í–ö6")) {
                        if (feed_s >= (depth_p || 1.0)) return { Cv: 240, x: 0.40, y: 0.20, m: 0.28 };
                        else return { Cv: 240, x: 0.20, y: 0.40, m: 0.28 };
                    }
                }
                
                if (machiningType.includes("–û—Ç—Ä–µ–∑–∞–Ω")) {
                    if (toolMaterial.includes("–í–ö6")) return { Cv: 68.5, x: 0, y: 0.40, m: 0.20 };
                }
                
                if (machiningType.includes("–ù–∞—Ä–µ–∑–∞–Ω") && machiningType.includes("—Ä–µ–∑—å–±")) {
                    if (toolMaterial.includes("–í–ö6")) return { Cv: 83, x: 0.45, y: 0, m: 0.33 };
                }
            }
            
            // –ß–£–ì–£–ù –ö–û–í–ö–ò–ô 150–ù–í
            else if (material.includes("–ß—É–≥—É–Ω –∫–æ–≤–∫–∏–π") || (material.includes("–ß—É–≥—É–Ω") && material.includes("150"))) {
                if (machiningType.includes("–ø—Ä–æ–¥–æ–ª—å–Ω–æ–µ") && machiningType.includes("–ø—Ä–æ—Ö–æ–¥–Ω")) {
                    if (toolMaterial.includes("–í–ö8")) {
                        if (feed_s <= 0.40) return { Cv: 317, x: 0.15, y: 0.20, m: 0.20 };
                        else return { Cv: 215, x: 0.15, y: 0.45, m: 0.20 };
                    }
                }
                
                if (machiningType.includes("–û—Ç—Ä–µ–∑–∞–Ω")) {
                    if (toolMaterial.includes("–í–ö6")) return { Cv: 86, x: 0, y: 0.4, m: 0.20 };
                }
            }
            
            // –ú–ï–î–ù–´–ï –°–ü–õ–ê–í–´
            else if (material.includes("–ú–µ–¥–Ω")) {
                if (toolMaterial.includes("–†18")) {
                    if (feed_s <= 0.20) return { Cv: 270, x: 0.12, y: 0.25, m: 0.23 };
                    else return { Cv: 182, x: 0.12, y: 0.30, m: 0.23 };
                }
            }
            
            // –°–ò–õ–£–ú–ò–ù –ò –ê–õ–Æ–ú–ò–ù–ò–ô
            else if (material.includes("–°–∏–ª—É–º–∏–Ω") || material.includes("–ê–ª—é–º–∏–Ω–∏–µ–≤")) {
                if (toolMaterial.includes("–†18")) {
                    if (feed_s <= 0.20) return { Cv: 485, x: 0.12, y: 0.25, m: 0.28 };
                    else return { Cv: 328, x: 0.12, y: 0.50, m: 0.28 };
                }
            }
            
            // –ó–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            return { Cv: 317, x: 0.15, y: 0.20, m: 0.20 };
        }

        // –¢–∞–±–ª–∏—Ü—ã –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤ –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ —Å–∏–ª—ã —Ä–µ–∑–∞–Ω–∏—è
        function getCuttingForceCoefficients(material, toolMaterial, machiningType, forceComponent) {
            // –°–¢–ê–õ–¨ –ö–û–ù–°–¢–†–£–ö–¶–ò–û–ù–ù–ê–Ø œÉ–≤ = 750 –ú–ü–∞
            if (material.includes("–°—Ç–∞–ª—å") && material.includes("750")) {
                if (toolMaterial.includes("–¢–≤–µ—Ä–¥—ã–π —Å–ø–ª–∞–≤") || toolMaterial.includes("–¢15–ö6") || toolMaterial.includes("–í–ö")) {
                    if (machiningType.includes("–ø—Ä–æ–¥–æ–ª—å–Ω") || machiningType.includes("–ø–æ–ø–µ—Ä–µ—á–Ω") || machiningType.includes("—Ä–∞—Å—Ç–∞—á")) {
                        if (forceComponent === 'Pz') return { Cp: 300, x: 1.0, y: 0.75, n: -0.15 };
                        else if (forceComponent === 'Py') return { Cp: 243, x: 0.9, y: 0.6, n: -0.15 };
                        else if (forceComponent === 'Px') return { Cp: 339, x: 1.0, y: 0.5, n: -0.15 };
                    }
                    
                    if (machiningType.includes("–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω")) {
                        if (forceComponent === 'Pz') return { Cp: 384, x: 0.90, y: 0.90, n: -0.15 };
                        else if (forceComponent === 'Py') return { Cp: 355, x: 0.6, y: 0.8, n: -0.3 };
                        else if (forceComponent === 'Px') return { Cp: 241, x: 1.05, y: 0.2, n: -0.4 };
                    }
                    
                    if (machiningType.includes("–û—Ç—Ä–µ–∑–∞–Ω") || machiningType.includes("–ü—Ä–æ—Ä–µ–∑–∞–Ω")) {
                        if (forceComponent === 'Pz') return { Cp: 408, x: 0.72, y: 0.8, n: 0 };
                        else if (forceComponent === 'Py') return { Cp: 173, x: 0.73, y: 0.67, n: 0 };
                    }
                    
                    if (machiningType.includes("–ù–∞—Ä–µ–∑–∞–Ω") && machiningType.includes("—Ä–µ–∑—å–±")) {
                        if (forceComponent === 'Pz') return { Cp: 148, x: 0, y: 1.7, n: 0.71 };
                    }
                }
                
                else if (toolMaterial.includes("–ë—ã—Å—Ç—Ä–æ—Ä–µ–∂—É—â–∞—è") || toolMaterial.includes("–†18") || toolMaterial.includes("–†6–ú5")) {
                    if (machiningType.includes("–ø—Ä–æ–¥–æ–ª—å–Ω") || machiningType.includes("–ø–æ–¥—Ä–µ–∑–∞–Ω") || machiningType.includes("—Ä–∞—Å—Ç–∞—á")) {
                        if (forceComponent === 'Pz') return { Cp: 200, x: 1.0, y: 0.75, n: 0 };
                        else if (forceComponent === 'Py') return { Cp: 125, x: 0.9, y: 0.75, n: 0 };
                        else if (forceComponent === 'Px') return { Cp: 67, x: 1.2, y: 0.65, n: 0 };
                    }
                    
                    if (machiningType.includes("–û—Ç—Ä–µ–∑–∞–Ω") || machiningType.includes("–ü—Ä–æ—Ä–µ–∑–∞–Ω")) {
                        if (forceComponent === 'Pz') return { Cp: 247, x: 0, y: 1.0, n: 0 };
                    }
                    
                    if (machiningType.includes("–§–∞—Å–æ–Ω–Ω")) {
                        if (forceComponent === 'Pz') return { Cp: 212, x: 0, y: 1.0, n: 0 };
                    }
                }
            }
            
            // –ß–£–ì–£–ù –°–ï–†–´–ô 190–ù–í
            else if (material.includes("–ß—É–≥—É–Ω —Å–µ—Ä—ã–π") || (material.includes("–ß—É–≥—É–Ω") && material.includes("190"))) {
                if (toolMaterial.includes("–¢–≤–µ—Ä–¥—ã–π —Å–ø–ª–∞–≤") || toolMaterial.includes("–í–ö")) {
                    if (machiningType.includes("–ø—Ä–æ–¥–æ–ª—å–Ω") || machiningType.includes("–ø–æ–ø–µ—Ä–µ—á–Ω") || machiningType.includes("—Ä–∞—Å—Ç–∞—á")) {
                        if (forceComponent === 'Pz') return { Cp: 92, x: 1.0, y: 0.75, n: 0 };
                        else if (forceComponent === 'Py') return { Cp: 54, x: 0.9, y: 0.75, n: 0 };
                        else if (forceComponent === 'Px') return { Cp: 46, x: 1.0, y: 0.4, n: 0 };
                    }
                    
                    if (machiningType.includes("–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω")) {
                        if (forceComponent === 'Pz') return { Cp: 123, x: 1.0, y: 0.85, n: 0 };
                        else if (forceComponent === 'Py') return { Cp: 61, x: 0.6, y: 0.5, n: 0 };
                        else if (forceComponent === 'Px') return { Cp: 24, x: 1.05, y: 0.2, n: 0 };
                    }
                    
                    if (machiningType.includes("–ù–∞—Ä–µ–∑–∞–Ω") && machiningType.includes("—Ä–µ–∑—å–±")) {
                        if (forceComponent === 'Pz') return { Cp: 103, x: 0, y: 1.8, n: 0.82 };
                    }
                }
                
                else if (toolMaterial.includes("–ë—ã—Å—Ç—Ä–æ—Ä–µ–∂—É—â–∞—è") || toolMaterial.includes("–†18")) {
                    if (machiningType.includes("–û—Ç—Ä–µ–∑–∞–Ω") || machiningType.includes("–ü—Ä–æ—Ä–µ–∑–∞–Ω")) {
                        if (forceComponent === 'Pz') return { Cp: 158, x: 0, y: 1.0, n: 0 };
                    }
                }
            }
            
            // –ß–£–ì–£–ù –ö–û–í–ö–ò–ô 150–ù–í
            else if (material.includes("–ß—É–≥—É–Ω –∫–æ–≤–∫–∏–π") || (material.includes("–ß—É–≥—É–Ω") && material.includes("150"))) {
                if (toolMaterial.includes("–¢–≤–µ—Ä–¥—ã–π —Å–ø–ª–∞–≤") || toolMaterial.includes("–í–ö")) {
                    if (machiningType.includes("–ø—Ä–æ–¥–æ–ª—å–Ω") || machiningType.includes("–ø–æ–ø–µ—Ä–µ—á–Ω") || machiningType.includes("—Ä–∞—Å—Ç–∞—á")) {
                        if (forceComponent === 'Pz') return { Cp: 81, x: 1.0, y: 0.75, n: 0 };
                        else if (forceComponent === 'Py') return { Cp: 43, x: 0.9, y: 0.75, n: 0 };
                        else if (forceComponent === 'Px') return { Cp: 38, x: 1.0, y: 0.4, n: 0 };
                    }
                    
                    if (machiningType.includes("–û—Ç—Ä–µ–∑–∞–Ω") || machiningType.includes("–ü—Ä–æ—Ä–µ–∑–∞–Ω")) {
                        if (forceComponent === 'Pz') return { Cp: 139, x: 0, y: 1.0, n: 0 };
                    }
                }
            }
            
            // –ú–ï–î–ù–´–ï –°–ü–õ–ê–í–´
            else if (material.includes("–ú–µ–¥–Ω")) {
                if (toolMaterial.includes("–ë—ã—Å—Ç—Ä–æ—Ä–µ–∂—É—â–∞—è") || toolMaterial.includes("–†18")) {
                    if (machiningType.includes("–ø—Ä–æ–¥–æ–ª—å–Ω") || machiningType.includes("–ø–æ–ø–µ—Ä–µ—á–Ω") || machiningType.includes("—Ä–∞—Å—Ç–∞—á")) {
                        if (forceComponent === 'Pz') return { Cp: 55, x: 1.0, y: 0.66, n: 0 };
                    }
                    
                    if (machiningType.includes("–û—Ç—Ä–µ–∑–∞–Ω") || machiningType.includes("–ü—Ä–æ—Ä–µ–∑–∞–Ω")) {
                        if (forceComponent === 'Pz') return { Cp: 75, x: 0, y: 1.0, n: 0 };
                    }
                }
            }
            
            // –ê–õ–Æ–ú–ò–ù–ò–ô –ò –°–ò–õ–£–ú–ò–ù
            else if (material.includes("–ê–ª—é–º–∏–Ω–∏–π") || material.includes("–°–∏–ª—É–º–∏–Ω")) {
                if (toolMaterial.includes("–ë—ã—Å—Ç—Ä–æ—Ä–µ–∂—É—â–∞—è") || toolMaterial.includes("–†18")) {
                    if (machiningType.includes("–ø—Ä–æ–¥–æ–ª—å–Ω") || machiningType.includes("–ø–æ–ø–µ—Ä–µ—á–Ω") || 
                        machiningType.includes("—Ä–∞—Å—Ç–∞—á") || machiningType.includes("–ø–æ–¥—Ä–µ–∑–∞–Ω")) {
                        if (forceComponent === 'Pz') return { Cp: 40, x: 1.0, y: 0.75, n: 0 };
                    }
                    
                    if (machiningType.includes("–û—Ç—Ä–µ–∑–∞–Ω") || machiningType.includes("–ü—Ä–æ—Ä–µ–∑–∞–Ω")) {
                        if (forceComponent === 'Pz') return { Cp: 50, x: 0, y: 1.0, n: 0 };
                    }
                }
            }
            
            // –ó–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            if (forceComponent === 'Pz') return { Cp: 300, x: 1.0, y: 0.75, n: 0 };
            else if (forceComponent === 'Py') return { Cp: 243, x: 0.9, y: 0.6, n: 0 };
            else if (forceComponent === 'Px') return { Cp: 339, x: 1.0, y: 0.5, n: 0 };
            return { Cp: 300, x: 1.0, y: 0.75, n: 0 };
        }

        // –ü–æ–ø—Ä–∞–≤–æ—á–Ω—ã–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã
        function getKv(material, toolMaterial, surfaceCondition, cooling) {
            let Kmv = 1.0;  // –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –º–∞—Ç–µ—Ä–∏–∞–ª–∞
            let Kpv = 1.0;  // –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏
            let Kiv = 1.0;  // –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞
            let Klv = 1.0;  // –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –æ—Ö–ª–∞–∂–¥–µ–Ω–∏—è
            
            // –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –º–∞—Ç–µ—Ä–∏–∞–ª–∞ (–ø—Ä–∏–º–µ—Ä–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è)
            if (material.includes("–°—Ç–∞–ª—å") && material.includes("750")) Kmv = 1.0;
            else if (material.includes("–∂–∞—Ä–æ–ø—Ä–æ—á–Ω")) Kmv = 0.7;
            else if (material.includes("–ß—É–≥—É–Ω")) Kmv = 1.1;
            else if (material.includes("–ú–µ–¥–Ω")) Kmv = 1.3;
            else if (material.includes("–ê–ª—é–º–∏–Ω–∏–µ–≤") || material.includes("–°–∏–ª—É–º–∏–Ω")) Kmv = 1.5;
            
            // –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏
            if (surfaceCondition.includes("–ß–∏—Å—Ç–∞—è")) Kpv = 1.0;
            else if (surfaceCondition.includes("–∫–æ—Ä–∫–æ–π")) Kpv = 0.8;
            else if (surfaceCondition.includes("–æ–∫–∞–ª–∏–Ω–∞")) Kpv = 0.65;
            
            // –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞
            if (toolMaterial.includes("–¢15–ö6")) Kiv = 1.0;
            else if (toolMaterial.includes("–¢5–ö10")) Kiv = 0.85;
            else if (toolMaterial.includes("–í–ö6")) Kiv = 1.0;
            else if (toolMaterial.includes("–í–ö8")) Kiv = 0.95;
            else if (toolMaterial.includes("–†18") || toolMaterial.includes("–†6–ú5")) Kiv = 0.7;
            
            // –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –æ—Ö–ª–∞–∂–¥–µ–Ω–∏—è
            if (cooling.includes("–° –æ—Ö–ª–∞–∂–¥–µ–Ω–∏–µ–º")) Klv = 1.0;
            else Klv = 0.9;
            
            return Kmv * Kpv * Kiv * Klv;
        }

        function getKp() {
            // –ü–æ–ø—Ä–∞–≤–æ—á–Ω—ã–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –¥–ª—è —Å–∏–ª—ã —Ä–µ–∑–∞–Ω–∏—è (—É–ø—Ä–æ—â–µ–Ω–Ω–æ)
            return 1.0;
        }

        // –†–∞—Å—á–µ—Ç —Ä–µ–∂–∏–º–æ–≤ —Ä–µ–∑–∞–Ω–∏—è
        function calculate() {
            try {
                // –ü–æ–ª—É—á–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ —Ñ–æ—Ä–º—ã
                const operationType = document.getElementById('operationType').value;
                const material = document.getElementById('material').value;
                const toolMaterial = document.getElementById('toolMaterial').value;
                const machiningType = document.getElementById('machiningType').value;
                const surfaceCondition = document.getElementById('surfaceCondition').value;
                const cooling = document.getElementById('cooling').value;
                
                const D = parseFloat(document.getElementById('diameter').value);
                const t = parseFloat(document.getElementById('depth').value);
                const S = parseFloat(document.getElementById('feed').value);
                const l = parseFloat(document.getElementById('length').value);
                const l1 = parseFloat(document.getElementById('approach').value);
                const l2 = parseFloat(document.getElementById('overtravel').value);
                const T = parseFloat(document.getElementById('toolLife').value);
                
                const operationNum = document.getElementById('operationNumber').value;
                const transitionNum = parseInt(document.getElementById('transitionNumber').value);
                const machine = document.getElementById('machine').value;
                const N_st = parseFloat(document.getElementById('machinePower').value);
                const eta = parseFloat(document.getElementById('efficiency').value);
                const fixture = document.getElementById('fixture').value;
                const toolGost = document.getElementById('toolGost').value;
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö
                if (isNaN(D) || isNaN(t) || isNaN(S) || isNaN(l) || isNaN(T) || isNaN(N_st)) {
                    showToast('‚ö†Ô∏è –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–≤–µ–¥–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ!', 'warning');
                    return;
                }
                
                // –ü–æ–ª—É—á–∞–µ–º –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã —Å–∫–æ—Ä–æ—Å—Ç–∏ —Ä–µ–∑–∞–Ω–∏—è
                const speedCoeffs = getCuttingSpeedCoefficients(material, toolMaterial, operationType, S, t);
                const { Cv, x: x_v, y: y_v, m } = speedCoeffs;
                
                // –ü–æ–ª—É—á–∞–µ–º –ø–æ–ø—Ä–∞–≤–æ—á–Ω—ã–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã
                const Kv = getKv(material, toolMaterial, surfaceCondition, cooling);
                
                // –†–∞—Å—á–µ—Ç —Å–∫–æ—Ä–æ—Å—Ç–∏ —Ä–µ–∑–∞–Ω–∏—è
                const V = (Cv / (Math.pow(T, m) * Math.pow(t, x_v) * Math.pow(S, y_v))) * Kv;
                
                // –†–∞—Å—á–µ—Ç–Ω–æ–µ —á–∏—Å–ª–æ –æ–±–æ—Ä–æ—Ç–æ–≤
                const n_calc = (1000 * V) / (Math.PI * D);
                
                // –ü—Ä–∏–Ω—è—Ç–æ–µ —á–∏—Å–ª–æ –æ–±–æ—Ä–æ—Ç–æ–≤ (–æ–∫—Ä—É–≥–ª—è–µ–º –¥–æ –±–ª–∏–∂–∞–π—à–µ–≥–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ)
                const standardSpeeds = [10, 12.5, 16, 20, 25, 31.5, 40, 50, 63, 80, 100, 125, 160, 200, 250, 315, 400, 500, 630, 800, 1000, 1250, 1600, 2000];
                let n_accepted = standardSpeeds[0];
                for (let speed of standardSpeeds) {
                    if (speed >= n_calc) {
                        n_accepted = speed;
                        break;
                    }
                    n_accepted = speed;
                }
                
                // –§–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å —Ä–µ–∑–∞–Ω–∏—è
                const Vf = (Math.PI * D * n_accepted) / 1000;
                
                // –ü–æ–ª—É—á–∞–µ–º –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã —Å–∏–ª—ã —Ä–µ–∑–∞–Ω–∏—è
                const forceCoeffs = getCuttingForceCoefficients(material, toolMaterial, operationType, 'Pz');
                const { Cp, x: x_p, y: y_p, n: n_p } = forceCoeffs;
                
                // –ü–æ–ø—Ä–∞–≤–æ—á–Ω—ã–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —Å–∏–ª—ã
                const Kp = getKp();
                
                // –†–∞—Å—á–µ—Ç —Å–∏–ª—ã —Ä–µ–∑–∞–Ω–∏—è Pz
                const Pz = 10 * Cp * Math.pow(t, x_p) * Math.pow(S, y_p) * Math.pow(Vf, n_p) * Kp;
                
                // –ú–æ—â–Ω–æ—Å—Ç—å —Ä–µ–∑–∞–Ω–∏—è
                const N_rez = (Pz * Vf) / 61200;
                
                // –¢—Ä–µ–±—É–µ–º–∞—è –º–æ—â–Ω–æ—Å—Ç—å –Ω–∞ –ø—Ä–∏–≤–æ–¥–µ
                const N_trebuemaya = N_rez / eta;
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ –º–æ—â–Ω–æ—Å—Ç–∏
                const powerCheck = N_trebuemaya <= N_st;
                
                // –û—Å–Ω–æ–≤–Ω–æ–µ –≤—Ä–µ–º—è
                const To = (l + l1 + l2) / (S * n_accepted);
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
                calculationResults = {
                    operationType, material, toolMaterial, machiningType,
                    surfaceCondition, cooling, D, t, S, l, l1, l2, T,
                    operationNum, transitionNum, machine, N_st, eta,
                    fixture, toolGost,
                    Cv, x_v, y_v, m, Kv, V, n_calc, n_accepted, Vf,
                    Cp, x_p, y_p, n_p, Kp, Pz,
                    N_rez, N_trebuemaya, powerCheck, To
                };
                
                // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
                displayResults();
                showToast('‚úÖ –†–∞—Å—á–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ!', 'success');
                
            } catch (error) {
                showToast('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–∞—Å—á–µ—Ç–µ: ' + error.message, 'error');
                console.error(error);
            }
        }

        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
        function displayResults() {
            if (!calculationResults) return;
            
            const r = calculationResults;
            
            let html = `
                <div class="result-card">
                    <h4>üìã –ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</h4>
                    <div class="result-item">
                        <span class="result-label">–û–ø–µ—Ä–∞—Ü–∏—è:</span>
                        <span class="result-value">${r.operationType}</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">–ú–∞—Ç–µ—Ä–∏–∞–ª –¥–µ—Ç–∞–ª–∏:</span>
                        <span class="result-value">${r.material}</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç:</span>
                        <span class="result-value">${r.toolMaterial}</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">–î–∏–∞–º–µ—Ç—Ä D:</span>
                        <span class="result-value">${r.D} –º–º</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">–ì–ª—É–±–∏–Ω–∞ —Ä–µ–∑–∞–Ω–∏—è t:</span>
                        <span class="result-value">${r.t} –º–º</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">–ü–æ–¥–∞—á–∞ S:</span>
                        <span class="result-value">${r.S} –º–º/–æ–±</span>
                    </div>
                </div>

                <div class="result-card">
                    <h4>‚ö° –°–∫–æ—Ä–æ—Å—Ç—å —Ä–µ–∑–∞–Ω–∏—è</h4>
                    <div class="result-item">
                        <span class="result-label">–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç Cv:</span>
                        <span class="result-value">${r.Cv}</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">–°—Ç–æ–π–∫–æ—Å—Ç—å T:</span>
                        <span class="result-value">${r.T} –º–∏–Ω</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">–ü–æ–∫–∞–∑–∞—Ç–µ–ª–∏ —Å—Ç–µ–ø–µ–Ω–∏ (x, y, m):</span>
                        <span class="result-value">${r.x_v}, ${r.y_v}, ${r.m}</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">–ü–æ–ø—Ä–∞–≤–æ—á–Ω—ã–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç Kv:</span>
                        <span class="result-value">${r.Kv.toFixed(3)}</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">–†–∞—Å—á–µ—Ç–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å V:</span>
                        <span class="result-value">${r.V.toFixed(2)} –º/–º–∏–Ω</span>
                    </div>
                </div>

                <div class="result-card">
                    <h4>üîÑ –ß–∏—Å–ª–æ –æ–±–æ—Ä–æ—Ç–æ–≤</h4>
                    <div class="result-item">
                        <span class="result-label">–†–∞—Å—á–µ—Ç–Ω–æ–µ n:</span>
                        <span class="result-value">${r.n_calc.toFixed(1)} –æ–±/–º–∏–Ω</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">–ü—Ä–∏–Ω—è—Ç–æ–µ n:</span>
                        <span class="result-value">${r.n_accepted} –æ–±/–º–∏–Ω</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">–§–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å V—Ñ:</span>
                        <span class="result-value">${r.Vf.toFixed(2)} –º/–º–∏–Ω</span>
                    </div>
                </div>

                <div class="result-card">
                    <h4>üí™ –°–∏–ª–∞ —Ä–µ–∑–∞–Ω–∏—è</h4>
                    <div class="result-item">
                        <span class="result-label">–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç Cp:</span>
                        <span class="result-value">${r.Cp}</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">–ü–æ–∫–∞–∑–∞—Ç–µ–ª–∏ —Å—Ç–µ–ø–µ–Ω–∏ (x, y, n):</span>
                        <span class="result-value">${r.x_p}, ${r.y_p}, ${r.n_p}</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">–¢–∞–Ω–≥–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è —Å–∏–ª–∞ Pz:</span>
                        <span class="result-value">${r.Pz.toFixed(1)} –ù</span>
                    </div>
                </div>

                <div class="result-card">
                    <h4>‚ö° –ú–æ—â–Ω–æ—Å—Ç—å</h4>
                    <div class="result-item">
                        <span class="result-label">–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –º–æ—â–Ω–æ—Å—Ç—å N—ç:</span>
                        <span class="result-value">${r.N_rez.toFixed(3)} –∫–í—Ç</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">–¢—Ä–µ–±—É–µ–º–∞—è –º–æ—â–Ω–æ—Å—Ç—å N—Ç—Ä:</span>
                        <span class="result-value">${r.N_trebuemaya.toFixed(3)} –∫–í—Ç</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">–ú–æ—â–Ω–æ—Å—Ç—å —Å—Ç–∞–Ω–∫–∞ N:</span>
                        <span class="result-value">${r.N_st} –∫–í—Ç</span>
                    </div>
                    <div class="${r.powerCheck ? 'power-check-success' : 'power-check-fail'}">
                        <strong>${r.powerCheck ? '‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–π–¥–µ–Ω–∞' : '‚ùå –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ –ø—Ä–æ–π–¥–µ–Ω–∞'}</strong><br>
                        ${r.powerCheck ? '–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–æ–∑–º–æ–∂–Ω–∞' : '–û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–∞ - –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è –º–æ—â–Ω–æ—Å—Ç—å —Å—Ç–∞–Ω–∫–∞'}
                    </div>
                </div>

                <div class="result-card">
                    <h4>‚è±Ô∏è –û—Å–Ω–æ–≤–Ω–æ–µ –≤—Ä–µ–º—è</h4>
                    <div class="result-item">
                        <span class="result-label">–û—Å–Ω–æ–≤–Ω–æ–µ –≤—Ä–µ–º—è To:</span>
                        <span class="result-value">${r.To.toFixed(3)} –º–∏–Ω (${(r.To * 60).toFixed(1)} —Å–µ–∫)</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">–î–ª–∏–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏:</span>
                        <span class="result-value">${r.l} –º–º</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">–í—Ä–µ–∑–∞–Ω–∏–µ + –ü–µ—Ä–µ–±–µ–≥:</span>
                        <span class="result-value">${r.l1} + ${r.l2} = ${(r.l1 + r.l2).toFixed(1)} –º–º</span>
                    </div>
                </div>
            `;
            
            document.getElementById('resultsContent').innerHTML = html;
            document.getElementById('results').classList.add('active');
        }

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ –æ–±—Ä–∞–∑—Ü–∞ Word-–¥–æ–∫—É–º–µ–Ω—Ç–∞
        function generateReport() {
            if (!calculationResults) {
                showToast('‚ö†Ô∏è –°–Ω–∞—á–∞–ª–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Ä–∞—Å—á–µ—Ç!', 'warning');
                return;
            }

            const r = calculationResults;
            
            // –§–æ—Ä–º–∏—Ä—É–µ–º –æ—Ç—á–µ—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ –æ–±—Ä–∞–∑—Ü–∞ I_–æ–ø–µ—Ä–∞—Ü–∏—è.docx
            const reportContent = `${r.operationNum} –æ–ø–µ—Ä–∞—Ü–∏—è : –¢–û–ö–ê–†–ù–ê–Ø

–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ: ${r.machine}, N—Å—Ç=${r.N_st} –∫–í—Ç.
–ü—Ä–∏—Å–ø–æ—Å–æ–±–ª–µ–Ω–∏–µ: ${r.fixture}.

${r.transitionNum} –ø–µ—Ä–µ—Ö–æ–¥: ${r.operationType}.

–†–µ–∂—É—â–∏–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç: –†–µ–∑–µ—Ü —Å ${r.toolMaterial}, ${r.toolGost}.

–ì–ª—É–±–∏–Ω–∞ —Ä–µ–∑–∞–Ω–∏—è: t = ${r.t} –º–º

–ü–æ–¥–∞—á–∞: S = ${r.S} –º–º/–æ–±

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

–î–æ–ø—É—Å–∫–∞–µ–º–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å —Ä–µ–∑–∞–Ω–∏—è

                V = Cv / (T^m √ó t^x √ó S^y) √ó Kv,  –º/–º–∏–Ω

T = ${r.T} –º–∏–Ω ‚Äî —Å—Ç–æ–π–∫–æ—Å—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞

Kv = ${r.Kv.toFixed(3)} ‚Äî –ø–æ–ø—Ä–∞–≤–æ—á–Ω—ã–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç
Kmv ‚Äî –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç, —É—á–∏—Ç—ã–≤–∞—é—â–∏–π –≤–ª–∏—è–Ω–∏–µ —Ñ–∏–∑–∏–∫–æ-–º–µ—Ö. —Å–≤-–≤ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º–æ–≥–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞
Kpv ‚Äî –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç, —É—á–∏—Ç—ã–≤–∞—é—â–∏–π –≤–ª–∏—è–Ω–∏–µ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ –∑–∞–≥–æ—Ç–æ–≤–∫–∏
Kiv ‚Äî –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç, —É—á–∏—Ç—ã–≤–∞—é—â–∏–π –≤–ª–∏—è–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞
Klv ‚Äî –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç, —É—á–∏—Ç—ã–≤–∞—é—â–∏–π –æ—Ö–ª–∞–∂–¥–µ–Ω–∏–µ

–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –∏–∑ —Ç–∞–±–ª–∏—Ü –º–µ—Ç–æ–¥–∏—á–∫–∏:
Cv = ${r.Cv}; m = ${r.m}; x = ${r.x_v}; y = ${r.y_v}

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
V = ${r.V.toFixed(2)} –º/–º–∏–Ω
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

–†–∞—Å—á–µ—Ç–Ω–æ–µ —á–∏—Å–ª–æ –æ–±–æ—Ä–æ—Ç–æ–≤

                n = (1000 √ó V) / (œÄ √ó D),  –æ–±/–º–∏–Ω

n —Ä–∞—Å—á = ${r.n_calc.toFixed(1)} –æ–±/–º–∏–Ω

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

–ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —Å—Ç–∞–Ω–∫—É

n—Å—Ç = ${r.n_accepted} –æ–±/–º–∏–Ω;  S—Å—Ç = ${r.S} –º–º/–æ–±

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

–û–ø—Ä–µ–¥–µ–ª—è–µ–º –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—É—é —Å–∫–æ—Ä–æ—Å—Ç—å —Ä–µ–∑–∞–Ω–∏—è

                V—Ñ = (œÄ √ó D √ó n) / 1000,  –º/–º–∏–Ω

V—Ñ = ${r.Vf.toFixed(2)} –º/–º–∏–Ω

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

–°–∏–ª–∞ —Ä–µ–∑–∞–Ω–∏—è

                PZ = 10 √ó Cp √ó t^x √ó S^y √ó V^n √ó Kp,  –ù

Kp = ${r.Kp.toFixed(3)} ‚Äî –ø–æ–ø—Ä–∞–≤–æ—á–Ω—ã–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —É—Å–ª–æ–≤–∏–π —Ä–µ–∑–∞–Ω–∏—è

–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –∏–∑ —Ç–∞–±–ª–∏—Ü –º–µ—Ç–æ–¥–∏—á–∫–∏:
Cp = ${r.Cp}; x = ${r.x_p}; y = ${r.y_p}; n = ${r.n_p}

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
PZ = ${r.Pz.toFixed(2)} –ù
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

–ú–æ—â–Ω–æ—Å—Ç—å —Ä–µ–∑–∞–Ω–∏—è

                N—ç = (Pz √ó V—Ñ) / 61200,  –∫–í—Ç

N—ç = ${r.N_rez.toFixed(3)} –∫–í—Ç

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

–ú–æ—â–Ω–æ—Å—Ç—å –Ω–∞ –ø—Ä–∏–≤–æ–¥–µ

                N—Ç—Ä = N—ç / Œ∑,  –∫–í—Ç

Œ∑ = ${r.eta} ‚Äî –ö–ü–î —Å—Ç–∞–Ω–∫–∞

N—Ç—Ä = ${r.N_trebuemaya.toFixed(3)} –∫–í—Ç

${r.powerCheck ? '‚úì' : '‚úó'} –£—Å–ª–æ–≤–∏–µ N—Ç—Ä ‚â§ N—Å—Ç ${r.powerCheck ? '–≤—ã–ø–æ–ª–Ω–µ–Ω–æ' : '–ù–ï –≤—ã–ø–æ–ª–Ω–µ–Ω–æ'}, –æ–±—Ä–∞–±–æ—Ç–∫–∞ ${r.powerCheck ? '–≤–æ–∑–º–æ–∂–Ω–∞' : '–Ω–µ–≤–æ–∑–º–æ–∂–Ω–∞'}

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–µ –≤—Ä–µ–º—è

                To = (l + l‚ÇÅ + l‚ÇÇ) / (S √ó n),  –º–∏–Ω

–≥–¥–µ: l = ${r.l} –º–º ‚Äî –¥–ª–∏–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ (–∏–∑ —á–µ—Ä—Ç–µ–∂–∞);
     l‚ÇÅ = ${r.l1} –º–º ‚Äî –≤–µ–ª–∏—á–∏–Ω–∞ –≤—Ä–µ–∑–∞–Ω–∏—è;
     l‚ÇÇ = ${r.l2} –º–º ‚Äî –≤–µ–ª–∏—á–∏–Ω–∞ –ø–µ—Ä–µ–±–µ–≥–∞.

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
To = ${r.To.toFixed(3)} –º–∏–Ω
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ


‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
–ò–¢–û–ì–û–í–´–ï –†–ï–ñ–ò–ú–´ –†–ï–ó–ê–ù–ò–Ø:
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

–ì–ª—É–±–∏–Ω–∞ —Ä–µ–∑–∞–Ω–∏—è t      = ${r.t} –º–º
–ü–æ–¥–∞—á–∞ S               = ${r.S} –º–º/–æ–±
–°–∫–æ—Ä–æ—Å—Ç—å —Ä–µ–∑–∞–Ω–∏—è V     = ${r.Vf.toFixed(2)} –º/–º–∏–Ω
–ß–∏—Å–ª–æ –æ–±–æ—Ä–æ—Ç–æ–≤ n       = ${r.n_accepted} –æ–±/–º–∏–Ω
–°–∏–ª–∞ —Ä–µ–∑–∞–Ω–∏—è Pz        = ${r.Pz.toFixed(1)} –ù
–ú–æ—â–Ω–æ—Å—Ç—å —Ä–µ–∑–∞–Ω–∏—è N—ç    = ${r.N_rez.toFixed(3)} –∫–í—Ç
–û—Å–Ω–æ–≤–Ω–æ–µ –≤—Ä–µ–º—è To      = ${r.To.toFixed(3)} –º–∏–Ω

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
–†–∞—Å—á–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω: ${new Date().toLocaleString('ru-RU')}
–ü—Ä–æ–≥—Ä–∞–º–º–∞: –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Ä–µ–∂–∏–º–æ–≤ —Ä–µ–∑–∞–Ω–∏—è –¥–ª—è —Ç–æ–∫–∞—Ä–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ v1.0
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
`;

            // –°–æ–∑–¥–∞–µ–º —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
            const blob = new Blob([reportContent], { type: 'text/plain; charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `–¢–æ–∫–∞—Ä–Ω–∞—è_–æ–±—Ä–∞–±–æ—Ç–∫–∞_${new Date().toISOString().slice(0, 10)}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);

            showToast('üìÑ –û—Ç—á–µ—Ç —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω –∏ –∑–∞–≥—Ä—É–∂–µ–Ω!');
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ LocalStorage
        function saveData() {
            const data = {
                operationType: document.getElementById('operationType').value,
                material: document.getElementById('material').value,
                toolMaterial: document.getElementById('toolMaterial').value,
                machiningType: document.getElementById('machiningType').value,
                surfaceCondition: document.getElementById('surfaceCondition').value,
                cooling: document.getElementById('cooling').value,
                diameter: document.getElementById('diameter').value,
                depth: document.getElementById('depth').value,
                feed: document.getElementById('feed').value,
                length: document.getElementById('length').value,
                approach: document.getElementById('approach').value,
                overtravel: document.getElementById('overtravel').value,
                operationNumber: document.getElementById('operationNumber').value,
                transitionNumber: document.getElementById('transitionNumber').value,
                toolLife: document.getElementById('toolLife').value,
                machine: document.getElementById('machine').value,
                machinePower: document.getElementById('machinePower').value,
                efficiency: document.getElementById('efficiency').value,
                fixture: document.getElementById('fixture').value,
                toolGost: document.getElementById('toolGost').value
            };
            
            localStorage.setItem('turningCalculatorData', JSON.stringify(data));
            showToast('üíæ –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!', 'success');
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ LocalStorage
        function loadData() {
            const savedData = localStorage.getItem('turningCalculatorData');
            if (!savedData) {
                showToast('‚ö†Ô∏è –ù–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö!', 'warning');
                return;
            }
            
            try {
                const data = JSON.parse(savedData);
                
                document.getElementById('operationType').value = data.operationType || '';
                document.getElementById('material').value = data.material || '';
                document.getElementById('toolMaterial').value = data.toolMaterial || '';
                document.getElementById('machiningType').value = data.machiningType || '';
                document.getElementById('surfaceCondition').value = data.surfaceCondition || '';
                document.getElementById('cooling').value = data.cooling || '';
                document.getElementById('diameter').value = data.diameter || '';
                document.getElementById('depth').value = data.depth || '';
                document.getElementById('feed').value = data.feed || '';
                document.getElementById('length').value = data.length || '';
                document.getElementById('approach').value = data.approach || '';
                document.getElementById('overtravel').value = data.overtravel || '';
                document.getElementById('operationNumber').value = data.operationNumber || '';
                document.getElementById('transitionNumber').value = data.transitionNumber || '';
                document.getElementById('toolLife').value = data.toolLife || '';
                document.getElementById('machine').value = data.machine || '';
                document.getElementById('machinePower').value = data.machinePower || '';
                document.getElementById('efficiency').value = data.efficiency || '';
                document.getElementById('fixture').value = data.fixture || '';
                document.getElementById('toolGost').value = data.toolGost || '';
                
                showToast('üìÇ –î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã!', 'success');
            } catch (error) {
                showToast('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö!', 'error');
            }
        }

        // –û—á–∏—Å—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
        function clearResults() {
            calculationResults = null;
            document.getElementById('results').classList.remove('active');
            document.getElementById('resultsContent').innerHTML = '';
            showToast('üóëÔ∏è –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ—á–∏—â–µ–Ω—ã!', 'info');
        }

        // –ü–æ–∫–∞–∑ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
        function showToast(message, type = 'info') {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.className = 'toast ' + type + ' show';
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
        window.addEventListener('load', () => {
            const savedData = localStorage.getItem('turningCalculatorData');
            if (savedData) {
                console.log('–ù–∞–π–¥–µ–Ω—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ');
            }
        });
    </script>
</body>
</html>
