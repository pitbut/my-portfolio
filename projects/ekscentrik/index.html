<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ò–Ω–∂–µ–Ω–µ—Ä–Ω—ã–µ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä—ã –¥–ª—è –º–µ—Ö–∞–Ω–∏—á–µ—Å–∫–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 32px;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 16px;
            opacity: 0.9;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .tab-button {
            padding: 12px 25px;
            background: rgba(255,255,255,0.2);
            color: white;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s;
        }

        .tab-button:hover {
            background: rgba(255,255,255,0.3);
        }

        .tab-button.active {
            background: white;
            color: #1e3c72;
            border-color: white;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .calculators {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(450px, 1fr));
            gap: 25px;
        }

        .calc-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
        }

        .calc-title {
            font-size: 20px;
            color: #1e3c72;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #2a5298;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .calc-title::before {
            content: 'üîß';
            font-size: 24px;
        }

        .method-selector {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #2196F3;
        }

        .method-selector label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: #1976D2;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }

        input[type="number"],
        select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s;
        }

        input[type="number"]:focus,
        select:focus {
            outline: none;
            border-color: #2a5298;
            box-shadow: 0 0 8px rgba(42, 82, 152, 0.2);
        }

        input[type="radio"] {
            margin-right: 8px;
        }

        .radio-group {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .radio-option {
            display: flex;
            align-items: center;
            cursor: pointer;
        }

        .input-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        button {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #2a5298 0%, #1e3c72 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(42, 82, 152, 0.4);
        }

        button:active {
            transform: translateY(0);
        }

        .results {
            background: #f0f4f8;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
        }

        .results h3 {
            color: #1e3c72;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .results h3::before {
            content: 'üìä';
        }

        .result-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #ddd;
        }

        .result-item:last-child {
            border-bottom: none;
        }

        .result-label {
            font-weight: 500;
            color: #555;
        }

        .result-value {
            font-weight: 700;
            color: #2a5298;
        }

        .formula-box {
            background: #fff9e6;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin-top: 15px;
            border-radius: 4px;
        }

        .formula-box h4 {
            color: #f57c00;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .formula {
            font-family: 'Courier New', monospace;
            font-size: 14px;
            color: #333;
            margin: 5px 0;
        }

        .comparison-box {
            background: #f3e5f5;
            border-left: 4px solid #9c27b0;
            padding: 15px;
            margin-top: 15px;
            border-radius: 4px;
        }

        .comparison-box h4 {
            color: #7b1fa2;
            margin-bottom: 10px;
        }

        .comparison-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            font-size: 14px;
        }

        .recommendations {
            background: #e8f5e9;
            border-left: 4px solid #4caf50;
            padding: 15px;
            margin-top: 15px;
            border-radius: 4px;
        }

        .recommendations h4 {
            color: #2e7d32;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .table-container {
            margin-top: 20px;
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 12px;
            background: white;
        }

        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }

        th {
            background: #2a5298;
            color: white;
            font-weight: 600;
        }

        tr:nth-child(even) {
            background: #f9f9f9;
        }

        tr:hover {
            background: #e3f2fd;
        }

        .highlight-row {
            background: #fff9c4 !important;
            font-weight: bold;
        }

        .info-box {
            background: #e3f2fd;
            border-left: 4px solid #2196F3;
            padding: 15px;
            margin-top: 15px;
            border-radius: 4px;
            font-size: 14px;
        }

        .warning {
            background: #fff3cd;
            border-left: 4px solid #ff9800;
            padding: 12px;
            margin-top: 15px;
            border-radius: 4px;
            color: #856404;
        }

        .canvas-container {
            text-align: center;
            margin-top: 20px;
            padding: 20px;
            background: white;
            border-radius: 8px;
            border: 2px solid #e0e0e0;
        }

        canvas {
            max-width: 100%;
            height: auto;
        }

        .full-width {
            grid-column: 1 / -1;
        }

        @media (max-width: 768px) {
            .calculators {
                grid-template-columns: 1fr;
            }
            
            .input-row {
                grid-template-columns: 1fr;
            }
            
            .tabs {
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üîß –ò–Ω–∂–µ–Ω–µ—Ä–Ω—ã–µ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä—ã –¥–ª—è –º–µ—Ö–∞–Ω–∏—á–µ—Å–∫–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏</h1>
            <p>–¢–æ—á–Ω—ã–µ —Ä–∞—Å—á–µ—Ç—ã –¥–ª—è —Ç–æ–∫–∞—Ä–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–µ—Ç–∞–ª–µ–π</p>
        </div>

        <div class="tabs">
            <button class="tab-button active" onclick="switchTab('eccentric')">
                –†–∞—Å—á–µ—Ç —ç–∫—Å—Ü–µ–Ω—Ç—Ä–∏–∫–∞
            </button>
            <button class="tab-button" onclick="switchTab('rectangle')">
                –ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∞—è –¥–µ—Ç–∞–ª—å (–æ—Ç–≤–µ—Ä—Å—Ç–∏–µ)
            </button>
            <button class="tab-button" onclick="switchTab('rectangleChuck')">
                –ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∞—è –¥–µ—Ç–∞–ª—å (–∑–∞–∂–∏–º)
            </button>
            <button class="tab-button" onclick="switchTab('table')">
                –¢–∞–±–ª–∏—Ü–∞ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤
            </button>
            <button class="tab-button" onclick="switchTab('overview')">
                –û–±—â–∞—è —Å—Ö–µ–º–∞
            </button>
        </div>

        <!-- –í–∫–ª–∞–¥–∫–∞: –†–∞—Å—á–µ—Ç —ç–∫—Å—Ü–µ–Ω—Ç—Ä–∏–∫–∞ -->
        <div id="eccentric" class="tab-content active">
            <div class="calculators">
                <div class="calc-card">
                    <h2 class="calc-title">–†–∞—Å—á–µ—Ç —Ç–æ–ª—â–∏–Ω—ã –ø–æ–¥–∫–ª–∞–¥–∫–∏</h2>
                    
                    <div class="method-selector">
                        <label>–í—ã–±–µ—Ä–∏—Ç–µ –º–µ—Ç–æ–¥ —Ä–∞—Å—á–µ—Ç–∞:</label>
                        <div class="radio-group">
                            <label class="radio-option">
                                <input type="radio" name="method" value="table" checked onchange="updateMethod()">
                                <span>üìä –¢–∞–±–ª–∏—á–Ω—ã–π (—Ç–æ—á–Ω—ã–π –¥–ª—è –æ—Å—Ç—Ä—ã—Ö –∫—É–ª–∞—á–∫–æ–≤)</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="method" value="simple" onchange="updateMethod()">
                                <span>‚ö° –£–ø—Ä–æ—â–µ–Ω–Ω—ã–π (–±—ã—Å—Ç—Ä—ã–π)</span>
                            </label>
                        </div>
                    </div>

                    <div class="input-row">
                        <div class="form-group">
                            <label for="diameter">–î–∏–∞–º–µ—Ç—Ä –∑–∞–≥–æ—Ç–æ–≤–∫–∏ D (–º–º):</label>
                            <input type="number" id="diameter" value="50" step="0.1" min="0.1">
                        </div>
                        
                        <div class="form-group">
                            <label for="eccentricity">–≠–∫—Å—Ü–µ–Ω—Ç—Ä–∏—Å–∏—Ç–µ—Ç e (–º–º):</label>
                            <input type="number" id="eccentricity" value="5" step="0.01" min="0.01">
                        </div>
                    </div>

                    <div id="simpleMethodOptions" style="display:none;">
                        <div class="form-group">
                            <label for="chuckType">–¢–∏–ø –ø–∞—Ç—Ä–æ–Ω–∞:</label>
                            <select id="chuckType">
                                <option value="2">–î–≤—É—Ö–∫—É–ª–∞—á–∫–æ–≤—ã–π (k=1.0)</option>
                                <option value="3" selected>–¢—Ä–µ—Ö–∫—É–ª–∞—á–∫–æ–≤—ã–π (k=1.5)</option>
                                <option value="4">–ß–µ—Ç—ã—Ä–µ—Ö–∫—É–ª–∞—á–∫–æ–≤—ã–π (k=1.414)</option>
                            </select>
                        </div>
                    </div>

                    <button onclick="calculateEccentric()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å —Ç–æ–ª—â–∏–Ω—É –ø–æ–¥–∫–ª–∞–¥–∫–∏</button>

                    <div id="eccResults" class="results" style="display:none;">
                        <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å—á–µ—Ç–∞:</h3>
                        
                        <div class="result-item">
                            <span class="result-label">–û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π —ç–∫—Å—Ü–µ–Ω—Ç—Ä–∏—Å–∏—Ç–µ—Ç A:</span>
                            <span class="result-value" id="relativeEcc">-</span>
                        </div>
                        
                        <div class="result-item" id="coefficientRow" style="display:none;">
                            <span class="result-label">–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç k (–ø–æ —Ç–∞–±–ª–∏—Ü–µ):</span>
                            <span class="result-value" id="coefficient">-</span>
                        </div>
                        
                        <div class="result-item">
                            <span class="result-label">–¢–æ–ª—â–∏–Ω–∞ –ø–æ–¥–∫–ª–∞–¥–∫–∏ t:</span>
                            <span class="result-value" id="thickness" style="font-size: 1.3em; color: #d32f2f;">-</span>
                        </div>

                        <div class="formula-box">
                            <h4>üí° –§–æ—Ä–º—É–ª—ã —Ä–∞—Å—á–µ—Ç–∞:</h4>
                            <div id="formulaText"></div>
                        </div>

                        <div id="comparisonBox" class="comparison-box" style="display:none;">
                            <h4>üìê –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤:</h4>
                            <div id="comparisonContent"></div>
                        </div>

                        <div class="recommendations">
                            <h4>‚úì –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:</h4>
                            <div id="recommendations"></div>
                        </div>
                    </div>
                </div>

                <div class="calc-card">
                    <h2 class="calc-title">–°—Ö–µ–º–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –¥–µ—Ç–∞–ª–∏</h2>
                    <div class="canvas-container">
                        <canvas id="schemaCanvas" width="400" height="400"></canvas>
                    </div>
                    <div class="info-box">
                        –ö—Ä–∞—Å–Ω–∞—è –ø–ª–∞—Å—Ç–∏–Ω–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–¥–∫–ª–∞–¥–∫—É –ø–æ–¥ –æ–¥–∏–Ω –∏–∑ –∫—É–ª–∞—á–∫–æ–≤ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —ç–∫—Å—Ü–µ–Ω—Ç—Ä–∏—Å–∏—Ç–µ—Ç–∞.
                    </div>
                </div>
            </div>
        </div>

        <!-- –í–∫–ª–∞–¥–∫–∞: –ó–∞–∂–∏–º –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–æ–π –¥–µ—Ç–∞–ª–∏ –≤ —Ç—Ä–µ—Ö–∫—É–ª–∞—á–∫–æ–≤—ã–π –ø–∞—Ç—Ä–æ–Ω -->
        <div id="rectangleChuck" class="tab-content">
            <div class="calculators">
                <div class="calc-card">
                    <h2 class="calc-title">–ó–∞–∂–∏–º –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–æ–π –¥–µ—Ç–∞–ª–∏ –≤ —Ç—Ä–µ—Ö–∫—É–ª–∞—á–∫–æ–≤—ã–π –ø–∞—Ç—Ä–æ–Ω</h2>
                    
                    <div class="info-box">
                        –ü—Ä–∏ –∑–∞–∂–∏–º–µ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–æ–π –¥–µ—Ç–∞–ª–∏ –≤ —Ç—Ä–µ—Ö–∫—É–ª–∞—á–∫–æ–≤—ã–π –ø–∞—Ç—Ä–æ–Ω –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–¥–ª–æ–∂–∏—Ç—å –ø–æ–¥–∫–ª–∞–¥–∫–∏ –ø–æ–¥ –¥–≤–∞ –∫—É–ª–∞—á–∫–∞ –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –Ω–∞–¥–µ–∂–Ω–æ–≥–æ –∑–∞–∂–∏–º–∞.
                    </div>

                    <div class="input-row">
                        <div class="form-group">
                            <label for="rectWidth">–®–∏—Ä–∏–Ω–∞ –¥–µ—Ç–∞–ª–∏ a (–º–º):</label>
                            <input type="number" id="rectWidth" value="50" step="0.1" min="0.1">
                        </div>
                        
                        <div class="form-group">
                            <label for="rectHeight">–í—ã—Å–æ—Ç–∞ –¥–µ—Ç–∞–ª–∏ b (–º–º):</label>
                            <input type="number" id="rectHeight" value="30" step="0.1" min="0.1">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="chuckOrientation">–û—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è –¥–µ—Ç–∞–ª–∏:</label>
                        <select id="chuckOrientation">
                            <option value="flat">–ü–ª–æ—Å–∫–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ –∫ –∫—É–ª–∞—á–∫—É</option>
                            <option value="corner">–£–≥–æ–ª –∫ –∫—É–ª–∞—á–∫—É</option>
                        </select>
                    </div>

                    <button onclick="calculateRectangleChuck()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å –ø–æ–¥–∫–ª–∞–¥–∫–∏</button>

                    <div id="rectChuckResults" class="results" style="display:none;">
                        <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å—á–µ—Ç–∞:</h3>
                        
                        <div class="result-item">
                            <span class="result-label">–†–∞–¥–∏—É—Å –æ–ø–∏—Å–∞–Ω–Ω–æ–π –æ–∫—Ä—É–∂–Ω–æ—Å—Ç–∏ R:</span>
                            <span class="result-value" id="rectChuckRadius">-</span>
                        </div>
                        
                        <div class="result-item">
                            <span class="result-label">–¢–æ–ª—â–∏–Ω–∞ –ø–æ–¥–∫–ª–∞–¥–∫–∏ t‚ÇÅ:</span>
                            <span class="result-value" id="rectChuckT1" style="font-size: 1.2em; color: #d32f2f;">-</span>
                        </div>
                        
                        <div class="result-item">
                            <span class="result-label">–¢–æ–ª—â–∏–Ω–∞ –ø–æ–¥–∫–ª–∞–¥–∫–∏ t‚ÇÇ:</span>
                            <span class="result-value" id="rectChuckT2" style="font-size: 1.2em; color: #d32f2f;">-</span>
                        </div>

                        <div class="formula-box">
                            <h4>üí° –§–æ—Ä–º—É–ª—ã —Ä–∞—Å—á–µ—Ç–∞:</h4>
                            <div id="rectChuckFormula"></div>
                        </div>

                        <div class="recommendations">
                            <h4>‚úì –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:</h4>
                            <div id="rectChuckRecommendations"></div>
                        </div>
                    </div>
                </div>

                <div class="calc-card">
                    <h2 class="calc-title">–°—Ö–µ–º–∞ –∑–∞–∂–∏–º–∞</h2>
                    <div class="canvas-container">
                        <canvas id="rectChuckCanvas" width="400" height="400"></canvas>
                    </div>
                    <div class="info-box">
                        –ö—Ä–∞—Å–Ω—ã–µ –ø–æ–¥–∫–ª–∞–¥–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —Ç–æ–ª—â–∏–Ω—É –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –Ω–∞–¥–µ–∂–Ω–æ–≥–æ –∑–∞–∂–∏–º–∞ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–æ–π –¥–µ—Ç–∞–ª–∏.
                    </div>
                </div>
            </div>
        </div>

        <!-- –í–∫–ª–∞–¥–∫–∞: –ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∞—è –¥–µ—Ç–∞–ª—å -->
        <div id="rectangle" class="tab-content">
            <div class="calculators">
                <div class="calc-card">
                    <h2 class="calc-title">–û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–æ–π –¥–µ—Ç–∞–ª–∏</h2>
                    
                    <div class="input-row">
                        <div class="form-group">
                            <label for="lengthA">–î–ª–∏–Ω–∞ –¥–µ—Ç–∞–ª–∏ A (–º–º):</label>
                            <input type="number" id="lengthA" value="100" step="0.1">
                        </div>
                        
                        <div class="form-group">
                            <label for="widthB">–®–∏—Ä–∏–Ω–∞ –¥–µ—Ç–∞–ª–∏ B (–º–º):</label>
                            <input type="number" id="widthB" value="60" step="0.1">
                        </div>
                    </div>

                    <div class="input-row">
                        <div class="form-group">
                            <label for="holeD">–î–∏–∞–º–µ—Ç—Ä –æ—Ç–≤–µ—Ä—Å—Ç–∏—è d (–º–º):</label>
                            <input type="number" id="holeD" value="20" step="0.1">
                        </div>
                        
                        <div class="form-group">
                            <label for="offsetC">–°–º–µ—â–µ–Ω–∏–µ –æ—Ç —Ü–µ–Ω—Ç—Ä–∞ (–º–º):</label>
                            <input type="number" id="offsetC" value="0" step="0.1">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="clampOrientation">–û—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è –∑–∞–∂–∏–º–∞:</label>
                        <select id="clampOrientation">
                            <option value="A">–ü–æ –¥–ª–∏–Ω–µ (A)</option>
                            <option value="B">–ü–æ —à–∏—Ä–∏–Ω–µ (B)</option>
                        </select>
                    </div>

                    <button onclick="calculateRectangle()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å –ø–æ–¥–∫–ª–∞–¥–∫—É</button>

                    <div id="rectResults" class="results" style="display:none;">
                        <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å—á–µ—Ç–∞:</h3>
                        <div class="result-item">
                            <span class="result-label">–¢–æ–ª—â–∏–Ω–∞ –ø–æ–¥–∫–ª–∞–¥–∫–∏ S:</span>
                            <span class="result-value" id="rectThickness">-</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">–î–∏–∞–º–µ—Ç—Ä –æ–ø–∏—Å–∞–Ω–Ω–æ–π –æ–∫—Ä—É–∂–Ω–æ—Å—Ç–∏:</span>
                            <span class="result-value" id="circumRadius">-</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">–≠–∫—Å—Ü–µ–Ω—Ç—Ä–∏—Å–∏—Ç–µ—Ç e:</span>
                            <span class="result-value" id="rectEcc">-</span>
                        </div>

                        <div class="formula-box">
                            <h4>üí° –§–æ—Ä–º—É–ª—ã —Ä–∞—Å—á–µ—Ç–∞:</h4>
                            <div class="formula">R = ‚àö[(A/2)¬≤ + (B/2)¬≤]</div>
                            <div class="formula" id="rectFormula">-</div>
                        </div>
                    </div>
                </div>

                <div class="calc-card">
                    <h2 class="calc-title">–°—Ö–µ–º–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏</h2>
                    <div class="canvas-container">
                        <canvas id="rectCanvas" width="400" height="300"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- –í–∫–ª–∞–¥–∫–∞: –¢–∞–±–ª–∏—Ü–∞ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤ -->
        <div id="table" class="tab-content">
            <div class="calc-card full-width">
                <h2 class="calc-title">–¢–∞–±–ª–∏—Ü–∞ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤ –¥–ª—è –æ—Å—Ç—Ä—ã—Ö –∫—É–ª–∞—á–∫–æ–≤</h2>
                
                <div class="info-box">
                    <strong>–ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ç–∞–±–ª–∏—Ü–µ–π:</strong><br>
                    1. –†–∞—Å—Å—á–∏—Ç–∞–π—Ç–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π —ç–∫—Å—Ü–µ–Ω—Ç—Ä–∏—Å–∏—Ç–µ—Ç: A = e / D<br>
                    2. –ù–∞–π–¥–∏—Ç–µ –±–ª–∏–∂–∞–π—à–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ A –≤ —Ç–∞–±–ª–∏—Ü–µ<br>
                    3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç k<br>
                    4. –¢–æ–ª—â–∏–Ω–∞ –ø–æ–¥–∫–ª–∞–¥–∫–∏: t = k √ó D
                </div>

                <div class="table-container">
                    <table id="coeffTable">
                        <thead>
                            <tr>
                                <th>A</th>
                                <th>k</th>
                                <th>A</th>
                                <th>k</th>
                                <th>A</th>
                                <th>k</th>
                                <th>A</th>
                                <th>k</th>
                            </tr>
                        </thead>
                        <tbody id="tableBody">
                        </tbody>
                    </table>
                </div>

                <div class="warning">
                    <strong>‚ö†Ô∏è –í–∞–∂–Ω–æ:</strong> –¢–∞–±–ª–∏—Ü–∞ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è –æ—Å—Ç—Ä—ã—Ö –∫—É–ª–∞—á–∫–æ–≤ —Ç—Ä–µ—Ö–∫—É–ª–∞—á–∫–æ–≤–æ–≥–æ –ø–∞—Ç—Ä–æ–Ω–∞. –î–ª—è –¥—Ä—É–≥–∏—Ö —Ç–∏–ø–æ–≤ –∫—É–ª–∞—á–∫–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —É–ø—Ä–æ—â–µ–Ω–Ω—ã–µ —Ñ–æ—Ä–º—É–ª—ã.
                </div>
            </div>
        </div>

        <!-- –í–∫–ª–∞–¥–∫–∞: –û–±—â–∞—è —Å—Ö–µ–º–∞ -->
        <div id="overview" class="tab-content">
            <div class="calc-card full-width">
                <h2 class="calc-title">–û–±—â–∞—è —Å—Ö–µ–º–∞ –≤—Å–µ—Ö –º–µ—Ç–æ–¥–æ–≤ —Ä–∞—Å—á–µ—Ç–∞</h2>
                
                <div style="margin-bottom: 20px; display: flex; gap: 10px; flex-wrap: wrap;">
                    <button onclick="exportToJSON()" style="flex: 1; min-width: 200px;">
                        üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ (JSON)
                    </button>
                    <button onclick="document.getElementById('importFile').click()" style="flex: 1; min-width: 200px;">
                        üìÇ –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ (JSON)
                    </button>
                    <input type="file" id="importFile" accept=".json" style="display:none;" onchange="importFromJSON(event)">
                </div>

                <div class="canvas-container">
                    <canvas id="overviewCanvas" width="800" height="600"></canvas>
                </div>

                <div class="info-box">
                    <strong>–°—Ö–µ–º–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:</strong><br>
                    ‚Ä¢ –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã —Ä–∞—Å—á–µ—Ç–∞ —Ç–æ–ª—â–∏–Ω—ã –ø–æ–¥–∫–ª–∞–¥–∫–∏<br>
                    ‚Ä¢ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –¥–µ—Ç–∞–ª–µ–π<br>
                    ‚Ä¢ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–∞–±–ª–∏—á–Ω–æ–≥–æ –∏ —É–ø—Ä–æ—â–µ–Ω–Ω–æ–≥–æ –º–µ—Ç–æ–¥–æ–≤<br>
                    ‚Ä¢ –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –∑–∞–∂–∏–º–∞
                </div>

                <div id="overviewSummary" style="margin-top: 20px;">
                </div>
            </div>
        </div>
    </div>

    <script>
        // –î–∞–Ω–Ω—ã–µ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è/–∑–∞–≥—Ä—É–∑–∫–∏
        let calculationHistory = {
            eccentric: [],
            rectangle: [],
            rectangleChuck: []
        };

        // –≠–∫—Å–ø–æ—Ä—Ç –≤ JSON
        function exportToJSON() {
            const data = {
                version: "4.0",
                date: new Date().toISOString(),
                history: calculationHistory,
                lastCalculations: {
                    diameter: document.getElementById('diameter').value,
                    eccentricity: document.getElementById('eccentricity').value,
                    lengthA: document.getElementById('lengthA').value,
                    widthB: document.getElementById('widthB').value,
                    rectWidth: document.getElementById('rectWidth').value,
                    rectHeight: document.getElementById('rectHeight').value
                }
            };
            
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `calculator_data_${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            URL.revokeObjectURL(url);
            
            alert('‚úÖ –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ —Ñ–∞–π–ª JSON!');
        }

        // –ò–º–ø–æ—Ä—Ç –∏–∑ JSON
        function importFromJSON(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    
                    if (data.lastCalculations) {
                        document.getElementById('diameter').value = data.lastCalculations.diameter || 50;
                        document.getElementById('eccentricity').value = data.lastCalculations.eccentricity || 5;
                        document.getElementById('lengthA').value = data.lastCalculations.lengthA || 100;
                        document.getElementById('widthB').value = data.lastCalculations.widthB || 60;
                        document.getElementById('rectWidth').value = data.lastCalculations.rectWidth || 50;
                        document.getElementById('rectHeight').value = data.lastCalculations.rectHeight || 30;
                    }
                    
                    if (data.history) {
                        calculationHistory = data.history;
                    }
                    
                    alert('‚úÖ –î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∏–∑ —Ñ–∞–π–ª–∞!');
                } catch (error) {
                    alert('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ñ–∞–π–ª–∞: ' + error.message);
                }
            };
            reader.readAsText(file);
        }

        // –¢–∞–±–ª–∏—Ü–∞ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤ –¥–ª—è –æ—Å—Ç—Ä—ã—Ö –∫—É–ª–∞—á–∫–æ–≤
        const coefficientsTable = [
            [0.005, 0.008], [0.055, 0.084], [0.105, 0.149], [0.155, 0.215],
            [0.010, 0.015], [0.060, 0.090], [0.110, 0.156], [0.160, 0.221],
            [0.015, 0.023], [0.065, 0.095], [0.115, 0.163], [0.165, 0.227],
            [0.020, 0.030], [0.070, 0.102], [0.120, 0.169], [0.170, 0.234],
            [0.025, 0.038], [0.075, 0.109], [0.125, 0.176], [0.175, 0.241],
            [0.030, 0.045], [0.080, 0.116], [0.130, 0.182], [0.180, 0.248],
            [0.035, 0.053], [0.085, 0.122], [0.135, 0.189], [0.185, 0.254],
            [0.040, 0.060], [0.090, 0.129], [0.140, 0.195], [0.190, 0.260],
            [0.045, 0.066], [0.095, 0.136], [0.145, 0.202], [0.195, 0.269],
            [0.050, 0.073], [0.100, 0.143], [0.150, 0.208], [0.200, 0.276]
        ];

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫
        function switchTab(tabName) {
            // –°–∫—Ä—ã—Ç—å –≤—Å–µ –≤–∫–ª–∞–¥–∫–∏
            const contents = document.querySelectorAll('.tab-content');
            contents.forEach(content => content.classList.remove('active'));
            
            // –î–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –∫–Ω–æ–ø–∫–∏
            const buttons = document.querySelectorAll('.tab-button');
            buttons.forEach(button => button.classList.remove('active'));
            
            // –ü–æ–∫–∞–∑–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—É—é –≤–∫–ª–∞–¥–∫—É
            document.getElementById(tabName).classList.add('active');
            
            // –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –∫–Ω–æ–ø–∫—É
            event.target.classList.add('active');
            
            // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –æ–±—â–µ–π —Å—Ö–µ–º—ã –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ —ç—Ç—É –≤–∫–ª–∞–¥–∫—É
            if (tabName === 'overview') {
                setTimeout(() => {
                    drawOverview();
                    updateOverviewSummary();
                }, 100);
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–≤–æ–¥–∫–∏ –Ω–∞ –≤–∫–ª–∞–¥–∫–µ "–û–±—â–∞—è —Å—Ö–µ–º–∞"
        function updateOverviewSummary() {
            const summary = document.getElementById('overviewSummary');
            if (!summary) return;
            
            let html = '<div class="results"><h3>–°–≤–æ–¥–∫–∞ —Ä–∞—Å—á–µ—Ç–æ–≤:</h3>';
            
            // –ü–æ—Å–ª–µ–¥–Ω–∏–µ —Ä–∞—Å—á–µ—Ç—ã —ç–∫—Å—Ü–µ–Ω—Ç—Ä–∏–∫–∞
            if (calculationHistory.eccentric.length > 0) {
                const last = calculationHistory.eccentric[calculationHistory.eccentric.length - 1];
                html += `
                    <div class="result-item">
                        <span class="result-label">–ü–æ—Å–ª–µ–¥–Ω–∏–π —Ä–∞—Å—á–µ—Ç —ç–∫—Å—Ü–µ–Ω—Ç—Ä–∏–∫–∞:</span>
                        <span class="result-value">D=${last.diameter}–º–º, e=${last.eccentricity}–º–º, t=${last.thickness.toFixed(2)}–º–º</span>
                    </div>
                `;
            }
            
            // –ü–æ—Å–ª–µ–¥–Ω–∏–µ —Ä–∞—Å—á–µ—Ç—ã –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–æ–π –¥–µ—Ç–∞–ª–∏
            if (calculationHistory.rectangleChuck.length > 0) {
                const last = calculationHistory.rectangleChuck[calculationHistory.rectangleChuck.length - 1];
                html += `
                    <div class="result-item">
                        <span class="result-label">–ü–æ—Å–ª–µ–¥–Ω–∏–π —Ä–∞—Å—á–µ—Ç –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–æ–π –¥–µ—Ç–∞–ª–∏:</span>
                        <span class="result-value">a=${last.width}–º–º, b=${last.height}–º–º, t=${Math.max(last.t1, last.t2).toFixed(2)}–º–º</span>
                    </div>
                `;
            }
            
            html += `
                <div class="result-item">
                    <span class="result-label">–í—Å–µ–≥–æ —Ä–∞—Å—á–µ—Ç–æ–≤:</span>
                    <span class="result-value">${calculationHistory.eccentric.length + calculationHistory.rectangle.length + calculationHistory.rectangleChuck.length}</span>
                </div>
            </div>`;
            
            summary.innerHTML = html;
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã
        function buildTable() {
            const tbody = document.getElementById('tableBody');
            tbody.innerHTML = '';
            
            const rows = coefficientsTable.length / 4;
            for (let i = 0; i < rows; i++) {
                const tr = document.createElement('tr');
                for (let j = 0; j < 4; j++) {
                    const idx = i + j * rows;
                    if (idx < coefficientsTable.length) {
                        const [a, k] = coefficientsTable[idx];
                        tr.innerHTML += `<td>${a.toFixed(3)}</td><td>${k.toFixed(3)}</td>`;
                    }
                }
                tbody.appendChild(tr);
            }
        }

        // –õ–∏–Ω–µ–π–Ω–∞—è –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞
        function getCoefficient(A) {
            let lower = null, upper = null;
            
            for (let i = 0; i < coefficientsTable.length; i++) {
                const [a, k] = coefficientsTable[i];
                if (a <= A) lower = [a, k];
                if (a >= A && !upper) {
                    upper = [a, k];
                    break;
                }
            }

            if (lower && lower[0] === A) return lower[1];
            if (upper && upper[0] === A) return upper[1];
            if (!lower) return coefficientsTable[0][1];
            if (!upper) return coefficientsTable[coefficientsTable.length - 1][1];

            const [a1, k1] = lower;
            const [a2, k2] = upper;
            const k = k1 + (k2 - k1) * (A - a1) / (a2 - a1);
            
            return k;
        }

        function updateMethod() {
            const method = document.querySelector('input[name="method"]:checked').value;
            const simpleOptions = document.getElementById('simpleMethodOptions');
            simpleOptions.style.display = method === 'simple' ? 'block' : 'none';
        }

        function calculateEccentric() {
            const D = parseFloat(document.getElementById('diameter').value);
            const e = parseFloat(document.getElementById('eccentricity').value);
            const method = document.querySelector('input[name="method"]:checked').value;

            if (isNaN(D) || isNaN(e) || D <= 0 || e <= 0) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è!');
                return;
            }

            const A = e / D;
            let t, k, formulaHtml;
            
            if (method === 'table') {
                k = getCoefficient(A);
                t = k * D;
                
                formulaHtml = `
                    <div class="formula">1. A = e / D = ${e} / ${D} = ${A.toFixed(4)}</div>
                    <div class="formula">2. –ü–æ —Ç–∞–±–ª–∏—Ü–µ: k = ${k.toFixed(3)}</div>
                    <div class="formula">3. t = k √ó D = ${k.toFixed(3)} √ó ${D} = ${t.toFixed(2)} –º–º</div>
                `;
                
                document.getElementById('coefficientRow').style.display = 'flex';
                document.getElementById('coefficient').textContent = k.toFixed(3);
                
                showComparison(e, D, t);
                
            } else {
                const chuckType = parseInt(document.getElementById('chuckType').value);
                
                switch(chuckType) {
                    case 2:
                        k = 1.0;
                        formulaHtml = `<div class="formula">t = e = ${e.toFixed(2)} –º–º</div>`;
                        break;
                    case 3:
                        k = 1.5;
                        formulaHtml = `<div class="formula">t = 1.5 √ó e = 1.5 √ó ${e} = ${(1.5 * e).toFixed(2)} –º–º</div>`;
                        break;
                    case 4:
                        k = Math.sqrt(2);
                        formulaHtml = `<div class="formula">t = ‚àö2 √ó e = 1.414 √ó ${e} = ${(k * e).toFixed(2)} –º–º</div>`;
                        break;
                }
                
                t = k * e;
                
                document.getElementById('coefficientRow').style.display = 'none';
                document.getElementById('comparisonBox').style.display = 'none';
            }

            document.getElementById('relativeEcc').textContent = A.toFixed(4);
            document.getElementById('thickness').textContent = t.toFixed(2) + ' –º–º';
            document.getElementById('formulaText').innerHTML = formulaHtml;

            generateRecommendations(t, e, D, A);
            highlightTableRow(A);
            drawSchema(D, e, t);

            // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∏—Å—Ç–æ—Ä–∏—é
            calculationHistory.eccentric.push({
                date: new Date().toISOString(),
                diameter: D,
                eccentricity: e,
                method: method,
                coefficient: k,
                thickness: t,
                relativeEcc: A
            });

            document.getElementById('eccResults').style.display = 'block';
        }

        function showComparison(e, D, tableResult) {
            const simple2 = e;
            const simple3 = 1.5 * e;
            const simple4 = Math.sqrt(2) * e;
            
            const html = `
                <div class="comparison-item">
                    <span>–¢–∞–±–ª–∏—á–Ω—ã–π –º–µ—Ç–æ–¥ (—Ç–æ—á–Ω—ã–π):</span>
                    <strong style="color: #d32f2f;">${tableResult.toFixed(2)} –º–º</strong>
                </div>
                <div class="comparison-item">
                    <span>–î–≤—É—Ö–∫—É–ª–∞—á–∫–æ–≤—ã–π (t = e):</span>
                    <span>${simple2.toFixed(2)} –º–º (—Ä–∞–∑–Ω–∏—Ü–∞: ${Math.abs(tableResult - simple2).toFixed(2)} –º–º)</span>
                </div>
                <div class="comparison-item">
                    <span>–¢—Ä–µ—Ö–∫—É–ª–∞—á–∫–æ–≤—ã–π (t = 1.5√óe):</span>
                    <span>${simple3.toFixed(2)} –º–º (—Ä–∞–∑–Ω–∏—Ü–∞: ${Math.abs(tableResult - simple3).toFixed(2)} –º–º)</span>
                </div>
                <div class="comparison-item">
                    <span>–ß–µ—Ç—ã—Ä–µ—Ö–∫—É–ª–∞—á–∫–æ–≤—ã–π (t = ‚àö2√óe):</span>
                    <span>${simple4.toFixed(2)} –º–º (—Ä–∞–∑–Ω–∏—Ü–∞: ${Math.abs(tableResult - simple4).toFixed(2)} –º–º)</span>
                </div>
            `;
            
            document.getElementById('comparisonContent').innerHTML = html;
            document.getElementById('comparisonBox').style.display = 'block';
        }

        function generateRecommendations(t, e, D, A) {
            let html = '';
            
            if (t > 15) {
                html += '‚ö†Ô∏è –¢–æ–ª—â–∏–Ω–∞ –ø–æ–¥–∫–ª–∞–¥–∫–∏ –ø—Ä–µ–≤—ã—à–∞–µ—Ç 15 –º–º. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–æ—Å—Ç–∞–≤–Ω—É—é –ø–æ–¥–∫–ª–∞–¥–∫—É.<br>';
            }
            
            if (A > 0.15) {
                html += '‚ö†Ô∏è –ë–æ–ª—å—à–æ–π –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π —ç–∫—Å—Ü–µ–Ω—Ç—Ä–∏—Å–∏—Ç–µ—Ç (A > 0.15). –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å –∫—Ä–µ–ø–ª–µ–Ω–∏—è.<br>';
            }
            
            if (t < 1) {
                html += '‚úì –ú–∞–ª–∞—è —Ç–æ–ª—â–∏–Ω–∞ –ø–æ–¥–∫–ª–∞–¥–∫–∏. –û–±–µ—Å–ø–µ—á—å—Ç–µ –ø–ª–æ—Ç–Ω–æ–µ –ø—Ä–∏–ª–µ–≥–∞–Ω–∏–µ –∫ –∫—É–ª–∞—á–∫—É.<br>';
            }
            
            html += '‚úì –ú–∞—Ç–µ—Ä–∏–∞–ª –ø–æ–¥–∫–ª–∞–¥–∫–∏: —Å—Ç–∞–ª—å 45, –∑–∞–∫–∞–ª–µ–Ω–Ω–∞—è –¥–æ HRC 45-50.<br>';
            html += '‚úì –¢–æ—á–Ω–æ—Å—Ç—å –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è: —Ç–æ–ª—â–∏–Ω–∞ ¬±0.05 –º–º, –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ—Å—Ç—å –≥—Ä–∞–Ω–µ–π 0.02 –º–º.<br>';
            html += '‚úì –ü–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—å –ø–æ–¥–∫–ª–∞–¥–∫–∏ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —á–∏—Å—Ç–æ–π –∏ –±–µ–∑ –∑–∞—É—Å–µ–Ω—Ü–µ–≤.';
            
            document.getElementById('recommendations').innerHTML = html;
        }

        function highlightTableRow(A) {
            const tbody = document.getElementById('tableBody');
            const rows = tbody.getElementsByTagName('tr');
            
            for (let row of rows) {
                row.classList.remove('highlight-row');
            }
            
            for (let row of rows) {
                const cells = row.getElementsByTagName('td');
                for (let i = 0; i < cells.length; i += 2) {
                    const cellA = parseFloat(cells[i].textContent);
                    if (Math.abs(cellA - A) < 0.01) {
                        row.classList.add('highlight-row');
                        return;
                    }
                }
            }
        }

        function drawSchema(D, e, t) {
            const canvas = document.getElementById('schemaCanvas');
            const ctx = canvas.getContext('2d');
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const scale = 100 / D;
            const radius = (D / 2) * scale;
            
            // –ü–∞—Ç—Ä–æ–Ω
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.arc(centerX, centerY, radius + 40, 0, 2 * Math.PI);
            ctx.stroke();

            // –î–µ—Ç–∞–ª—å
            const offsetX = e * scale;
            ctx.fillStyle = 'rgba(66, 165, 245, 0.3)';
            ctx.strokeStyle = '#1976D2';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.arc(centerX + offsetX, centerY, radius, 0, 2 * Math.PI);
            ctx.fill();
            ctx.stroke();

            // –¶–µ–Ω—Ç—Ä—ã
            ctx.fillStyle = '#d32f2f';
            ctx.beginPath();
            ctx.arc(centerX, centerY, 4, 0, 2 * Math.PI);
            ctx.fill();
            
            ctx.fillStyle = '#2196F3';
            ctx.beginPath();
            ctx.arc(centerX + offsetX, centerY, 4, 0, 2 * Math.PI);
            ctx.fill();

            // –õ–∏–Ω–∏—è —ç–∫—Å—Ü–µ–Ω—Ç—Ä–∏—Å–∏—Ç–µ—Ç–∞
            ctx.strokeStyle = '#d32f2f';
            ctx.setLineDash([5, 5]);
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(centerX, centerY);
            ctx.lineTo(centerX + offsetX, centerY);
            ctx.stroke();
            ctx.setLineDash([]);

            ctx.fillStyle = '#d32f2f';
            ctx.font = 'bold 14px Arial';
            ctx.fillText(`e = ${e} –º–º`, centerX + offsetX/2 - 25, centerY - 10);

            // –ö—É–ª–∞—á–∫–∏
            const angles = [0, 120, 240];
            for (let i = 0; i < 3; i++) {
                const angle = (angles[i] - 90) * Math.PI / 180;
                const x = centerX + Math.cos(angle) * (radius + 40);
                const y = centerY + Math.sin(angle) * (radius + 40);
                
                ctx.save();
                ctx.translate(x, y);
                ctx.rotate(angle + Math.PI/2);
                
                if (i === 0) {
                    ctx.fillStyle = '#d32f2f';
                    ctx.fillRect(-15, -5, 30, t * scale * 3);
                    
                    ctx.fillStyle = '#666';
                    ctx.fillRect(-15, t * scale * 3 - 5, 30, 20);
                    
                    ctx.restore();
                    ctx.fillStyle = '#d32f2f';
                    ctx.font = 'bold 12px Arial';
                    ctx.fillText(`t = ${t.toFixed(1)} –º–º`, x + 20, y);
                    ctx.save();
                    ctx.translate(x, y);
                    ctx.rotate(angle + Math.PI/2);
                } else {
                    ctx.fillStyle = '#666';
                    ctx.fillRect(-15, -5, 30, 20);
                }
                
                ctx.restore();
            }

            ctx.fillStyle = '#333';
            ctx.font = '14px Arial';
            ctx.fillText('–¶–µ–Ω—Ç—Ä –ø–∞—Ç—Ä–æ–Ω–∞', centerX - 50, centerY + radius + 70);
            ctx.fillText('–¶–µ–Ω—Ç—Ä –¥–µ—Ç–∞–ª–∏', centerX + offsetX - 45, centerY + radius + 70);
        }

        function calculateRectangle() {
            const A = parseFloat(document.getElementById('lengthA').value);
            const B = parseFloat(document.getElementById('widthB').value);
            const d = parseFloat(document.getElementById('holeD').value);
            const c = parseFloat(document.getElementById('offsetC').value);
            const orientation = document.getElementById('clampOrientation').value;

            if (isNaN(A) || isNaN(B) || isNaN(d)) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è!');
                return;
            }

            const R = Math.sqrt((A/2) * (A/2) + (B/2) * (B/2));
            const e = Math.abs(c);
            const S = 1.5 * e;

            document.getElementById('rectThickness').textContent = S.toFixed(2) + ' –º–º';
            document.getElementById('circumRadius').textContent = (R * 2).toFixed(2) + ' –º–º (√ò)';
            document.getElementById('rectEcc').textContent = e.toFixed(2) + ' –º–º';
            document.getElementById('rectFormula').textContent = 'S = 1.5 √ó e = 1.5 √ó ' + e.toFixed(2) + ' = ' + S.toFixed(2) + ' –º–º';

            drawRectangle(A, B, d, c, orientation);
            
            // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∏—Å—Ç–æ—Ä–∏—é
            calculationHistory.rectangle.push({
                date: new Date().toISOString(),
                lengthA: A,
                widthB: B,
                holeD: d,
                offset: c,
                orientation: orientation,
                thickness: S,
                radius: R,
                eccentricity: e
            });
            
            document.getElementById('rectResults').style.display = 'block';
        }

        function drawRectangle(A, B, d, c, orientation) {
            const canvas = document.getElementById('rectCanvas');
            const ctx = canvas.getContext('2d');
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            const scale = Math.min(300 / Math.max(A, B), 2);
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;

            const R = Math.sqrt((A/2) * (A/2) + (B/2) * (B/2)) * scale;
            ctx.strokeStyle = '#ccc';
            ctx.lineWidth = 1;
            ctx.setLineDash([5, 5]);
            ctx.beginPath();
            ctx.arc(centerX, centerY, R, 0, 2 * Math.PI);
            ctx.stroke();
            ctx.setLineDash([]);

            ctx.strokeStyle = '#333';
            ctx.lineWidth = 2;
            ctx.strokeRect(
                centerX - (A * scale) / 2,
                centerY - (B * scale) / 2,
                A * scale,
                B * scale
            );

            const holeX = centerX + c * scale * (orientation === 'A' ? 0 : 1);
            const holeY = centerY + c * scale * (orientation === 'A' ? 1 : 0);
            
            ctx.strokeStyle = '#d32f2f';
            ctx.fillStyle = 'rgba(211, 47, 47, 0.1)';
            ctx.beginPath();
            ctx.arc(holeX, holeY, (d * scale) / 2, 0, 2 * Math.PI);
            ctx.fill();
            ctx.stroke();

            ctx.fillStyle = '#2196F3';
            ctx.beginPath();
            ctx.arc(centerX, centerY, 3, 0, 2 * Math.PI);
            ctx.fill();

            ctx.fillStyle = '#d32f2f';
            ctx.beginPath();
            ctx.arc(holeX, holeY, 3, 0, 2 * Math.PI);
            ctx.fill();

            ctx.strokeStyle = '#666';
            ctx.lineWidth = 1;
            ctx.font = '12px Arial';
            ctx.fillStyle = '#333';

            const yOffset = centerY - (B * scale) / 2 - 20;
            ctx.beginPath();
            ctx.moveTo(centerX - (A * scale) / 2, yOffset);
            ctx.lineTo(centerX + (A * scale) / 2, yOffset);
            ctx.stroke();
            ctx.fillText(A + ' –º–º', centerX - 20, yOffset - 5);

            const xOffset = centerX + (A * scale) / 2 + 20;
            ctx.beginPath();
            ctx.moveTo(xOffset, centerY - (B * scale) / 2);
            ctx.lineTo(xOffset, centerY + (B * scale) / 2);
            ctx.stroke();
            ctx.save();
            ctx.translate(xOffset + 15, centerY);
            ctx.rotate(-Math.PI / 2);
            ctx.fillText(B + ' –º–º', -15, 0);
            ctx.restore();

            if (c !== 0) {
                ctx.strokeStyle = '#d32f2f';
                ctx.setLineDash([3, 3]);
                ctx.beginPath();
                ctx.moveTo(centerX, centerY);
                ctx.lineTo(holeX, holeY);
                ctx.stroke();
                ctx.setLineDash([]);
                
                const midX = (centerX + holeX) / 2;
                const midY = (centerY + holeY) / 2;
                ctx.fillStyle = '#d32f2f';
                ctx.fillText('c = ' + c + ' –º–º', midX + 5, midY - 5);
            }

            ctx.fillStyle = '#d32f2f';
            ctx.fillText('d = ' + d + ' –º–º', holeX - 20, holeY - (d * scale) / 2 - 10);
        }

        // –†–∞—Å—á–µ—Ç –¥–ª—è –∑–∞–∂–∏–º–∞ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–æ–π –¥–µ—Ç–∞–ª–∏ –≤ —Ç—Ä–µ—Ö–∫—É–ª–∞—á–∫–æ–≤—ã–π –ø–∞—Ç—Ä–æ–Ω
        function calculateRectangleChuck() {
            const a = parseFloat(document.getElementById('rectWidth').value);
            const b = parseFloat(document.getElementById('rectHeight').value);
            const orientation = document.getElementById('chuckOrientation').value;

            if (isNaN(a) || isNaN(b) || a <= 0 || b <= 0) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è!');
                return;
            }

            let R, t1, t2, formulaHtml;
            
            if (orientation === 'flat') {
                // –ü–ª–æ—Å–∫–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ –∫ –∫—É–ª–∞—á–∫—É
                R = Math.sqrt((a/2) * (a/2) + (b/2) * (b/2));
                
                // –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –æ—Ç —Ü–µ–Ω—Ç—Ä–∞ –¥–æ –ø–ª–æ—Å–∫–æ–π –≥—Ä–∞–Ω–∏
                const h1 = b / 2;
                const h2 = a / 2;
                
                // –î–ª—è —Ç—Ä–µ—Ö–∫—É–ª–∞—á–∫–æ–≤–æ–≥–æ –ø–∞—Ç—Ä–æ–Ω–∞
                // –û–¥–∏–Ω –∫—É–ª–∞—á–æ–∫ –Ω–∞ –ø–ª–æ—Å–∫–æ–π —Å—Ç–æ—Ä–æ–Ω–µ, –¥–≤–∞ –Ω–∞ —É–≥–ª–∞—Ö
                t1 = R - h1; // –ü–æ–¥–∫–ª–∞–¥–∫–∞ –ø–æ–¥ –∫—É–ª–∞—á–æ–∫ –Ω–∞ –ø–ª–æ—Å–∫–æ–π —Å—Ç–æ—Ä–æ–Ω–µ
                t2 = 0; // –£–≥–ª—ã –∑–∞–∂–∏–º–∞—é—Ç—Å—è –±–µ–∑ –ø–æ–¥–∫–ª–∞–¥–æ–∫
                
                formulaHtml = `
                    <div class="formula">R = ‚àö[(a/2)¬≤ + (b/2)¬≤] = ‚àö[(${a}/2)¬≤ + (${b}/2)¬≤] = ${R.toFixed(2)} –º–º</div>
                    <div class="formula">h = b/2 = ${b}/2 = ${h1.toFixed(2)} –º–º</div>
                    <div class="formula">t = R - h = ${R.toFixed(2)} - ${h1.toFixed(2)} = ${t1.toFixed(2)} –º–º</div>
                    <div style="margin-top: 10px; font-size: 12px;">
                        <strong>–°—Ö–µ–º–∞ –∑–∞–∂–∏–º–∞:</strong> –û–¥–∏–Ω –∫—É–ª–∞—á–æ–∫ —Å –ø–æ–¥–∫–ª–∞–¥–∫–æ–π –Ω–∞ –ø–ª–æ—Å–∫–æ–π —Å—Ç–æ—Ä–æ–Ω–µ, –¥–≤–∞ –∫—É–ª–∞—á–∫–∞ –±–µ–∑ –ø–æ–¥–∫–ª–∞–¥–æ–∫ –Ω–∞ —É–≥–ª–∞—Ö.
                    </div>
                `;
            } else {
                // –£–≥–æ–ª –∫ –∫—É–ª–∞—á–∫—É
                R = Math.sqrt((a/2) * (a/2) + (b/2) * (b/2));
                
                // –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –æ—Ç —Ü–µ–Ω—Ç—Ä–∞ –¥–æ —É–≥–ª–∞ - —ç—Ç–æ –∏ –µ—Å—Ç—å R
                // –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –æ—Ç —Ü–µ–Ω—Ç—Ä–∞ –¥–æ –ø–ª–æ—Å–∫–æ–π –≥—Ä–∞–Ω–∏
                const h = Math.min(a, b) / 2;
                
                // –î–≤–∞ –∫—É–ª–∞—á–∫–∞ –Ω–∞ —É–≥–ª–∞—Ö –±–µ–∑ –ø–æ–¥–∫–ª–∞–¥–æ–∫, –æ–¥–∏–Ω –Ω–∞ –ø–ª–æ—Å–∫–æ–π —Å—Ç–æ—Ä–æ–Ω–µ
                t1 = 0; // –£–≥–ª—ã –±–µ–∑ –ø–æ–¥–∫–ª–∞–¥–æ–∫
                t2 = R - h; // –ü–æ–¥–∫–ª–∞–¥–∫–∞ –ø–æ–¥ –∫—É–ª–∞—á–æ–∫ –Ω–∞ –ø–ª–æ—Å–∫–æ–π —Å—Ç–æ—Ä–æ–Ω–µ
                
                formulaHtml = `
                    <div class="formula">R = ‚àö[(a/2)¬≤ + (b/2)¬≤] = ‚àö[(${a}/2)¬≤ + (${b}/2)¬≤] = ${R.toFixed(2)} –º–º</div>
                    <div class="formula">h = min(a,b)/2 = ${Math.min(a,b)}/2 = ${h.toFixed(2)} –º–º</div>
                    <div class="formula">t = R - h = ${R.toFixed(2)} - ${h.toFixed(2)} = ${t2.toFixed(2)} –º–º</div>
                    <div style="margin-top: 10px; font-size: 12px;">
                        <strong>–°—Ö–µ–º–∞ –∑–∞–∂–∏–º–∞:</strong> –î–≤–∞ –∫—É–ª–∞—á–∫–∞ –±–µ–∑ –ø–æ–¥–∫–ª–∞–¥–æ–∫ –Ω–∞ —É–≥–ª–∞—Ö, –æ–¥–∏–Ω –∫—É–ª–∞—á–æ–∫ —Å –ø–æ–¥–∫–ª–∞–¥–∫–æ–π –Ω–∞ –ø–ª–æ—Å–∫–æ–π —Å—Ç–æ—Ä–æ–Ω–µ.
                    </div>
                `;
            }

            // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
            document.getElementById('rectChuckRadius').textContent = R.toFixed(2) + ' –º–º';
            document.getElementById('rectChuckT1').textContent = t1.toFixed(2) + ' –º–º' + (t1 === 0 ? ' (–±–µ–∑ –ø–æ–¥–∫–ª–∞–¥–∫–∏)' : ' (—Å –ø–æ–¥–∫–ª–∞–¥–∫–æ–π)');
            document.getElementById('rectChuckT2').textContent = t2.toFixed(2) + ' –º–º' + (t2 === 0 ? ' (–±–µ–∑ –ø–æ–¥–∫–ª–∞–¥–æ–∫)' : ' (—Å –ø–æ–¥–∫–ª–∞–¥–∫–æ–π)');
            document.getElementById('rectChuckFormula').innerHTML = formulaHtml;

            // –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
            let recommendations = '';
            const maxT = Math.max(t1, t2);
            
            if (maxT > 10) {
                recommendations += '‚ö†Ô∏è –ë–æ–ª—å—à–∞—è —Ç–æ–ª—â–∏–Ω–∞ –ø–æ–¥–∫–ª–∞–¥–∫–∏. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å –∑–∞–∂–∏–º–∞.<br>';
            } else if (maxT > 0) {
                recommendations += '‚úì –û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è —Ç–æ–ª—â–∏–Ω–∞ –ø–æ–¥–∫–ª–∞–¥–∫–∏.<br>';
            }
            
            recommendations += '‚úì –ú–∞—Ç–µ—Ä–∏–∞–ª –ø–æ–¥–∫–ª–∞–¥–æ–∫: —Å—Ç–∞–ª—å 45, –∑–∞–∫–∞–ª–µ–Ω–Ω–∞—è –¥–æ HRC 45-50.<br>';
            recommendations += '‚úì –û–±–µ—Å–ø–µ—á—å—Ç–µ —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ —É—Å–∏–ª–∏–µ –∑–∞–∂–∏–º–∞ –Ω–∞ –≤—Å–µ—Ö —Ç—Ä–µ—Ö –∫—É–ª–∞—á–∫–∞—Ö.<br>';
            recommendations += '‚úì –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∑–∞–∑–æ—Ä–æ–≤ –º–µ–∂–¥—É –¥–µ—Ç–∞–ª—å—é –∏ –∫—É–ª–∞—á–∫–∞–º–∏.<br>';
            
            if (a / b > 2 || b / a > 2) {
                recommendations += '‚ö†Ô∏è –ë–æ–ª—å—à–æ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Å—Ç–æ—Ä–æ–Ω. –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –æ–ø–æ—Ä.';
            }
            
            document.getElementById('rectChuckRecommendations').innerHTML = recommendations;

            // –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
            drawRectChuck(a, b, R, orientation === 'flat' ? t1 : t2);

            // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∏—Å—Ç–æ—Ä–∏—é
            calculationHistory.rectangleChuck.push({
                date: new Date().toISOString(),
                width: a,
                height: b,
                orientation: orientation,
                radius: R,
                t1: t1,
                t2: t2
            });

            document.getElementById('rectChuckResults').style.display = 'block';
        }

        // –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–∂–∏–º–∞ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–æ–π –¥–µ—Ç–∞–ª–∏
        function drawRectChuck(a, b, R, t) {
            const canvas = document.getElementById('rectChuckCanvas');
            const ctx = canvas.getContext('2d');
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const scale = Math.min(150 / Math.max(a, b), 2);

            // –û–∫—Ä—É–∂–Ω–æ—Å—Ç—å –ø–∞—Ç—Ä–æ–Ω–∞
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.arc(centerX, centerY, R * scale + 50, 0, 2 * Math.PI);
            ctx.stroke();

            // –ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∞—è –¥–µ—Ç–∞–ª—å
            ctx.fillStyle = 'rgba(66, 165, 245, 0.3)';
            ctx.strokeStyle = '#1976D2';
            ctx.lineWidth = 2;
            ctx.fillRect(
                centerX - (a * scale) / 2,
                centerY - (b * scale) / 2,
                a * scale,
                b * scale
            );
            ctx.strokeRect(
                centerX - (a * scale) / 2,
                centerY - (b * scale) / 2,
                a * scale,
                b * scale
            );

            // –¶–µ–Ω—Ç—Ä
            ctx.fillStyle = '#2196F3';
            ctx.beginPath();
            ctx.arc(centerX, centerY, 4, 0, 2 * Math.PI);
            ctx.fill();

            // –¢—Ä–∏ –∫—É–ª–∞—á–∫–∞ —Å –ø–æ–¥–∫–ª–∞–¥–∫–∞–º–∏
            const angles = [90, 210, 330]; // –ü–æ–∑–∏—Ü–∏–∏ –∫—É–ª–∞—á–∫–æ–≤
            
            for (let i = 0; i < 3; i++) {
                const angle = angles[i] * Math.PI / 180;
                const dist = R * scale + 50;
                const x = centerX + Math.cos(angle) * dist;
                const y = centerY + Math.sin(angle) * dist;
                
                ctx.save();
                ctx.translate(x, y);
                ctx.rotate(angle + Math.PI);
                
                // –ü–µ—Ä–≤—ã–π –∫—É–ª–∞—á–æ–∫ (—Å–≤–µ—Ä—Ö—É) - —Å –ø–æ–¥–∫–ª–∞–¥–∫–æ–π –∏–ª–∏ –±–µ–∑
                if (i === 0 && t > 0) {
                    // –ü–æ–¥–∫–ª–∞–¥–∫–∞
                    ctx.fillStyle = '#d32f2f';
                    ctx.fillRect(-20, 0, 40, t * scale * 2);
                    
                    // –ö—É–ª–∞—á–æ–∫
                    ctx.fillStyle = '#666';
                    ctx.fillRect(-20, t * scale * 2, 40, 25);
                    
                    ctx.restore();
                    ctx.fillStyle = '#d32f2f';
                    ctx.font = 'bold 12px Arial';
                    ctx.fillText(`t = ${t.toFixed(1)} –º–º`, x - 30, y - 35);
                    ctx.save();
                    ctx.translate(x, y);
                    ctx.rotate(angle + Math.PI);
                } else {
                    // –ö—É–ª–∞—á–æ–∫ –±–µ–∑ –ø–æ–¥–∫–ª–∞–¥–∫–∏
                    ctx.fillStyle = '#666';
                    ctx.fillRect(-20, 0, 40, 25);
                    
                    if (i !== 0) {
                        ctx.restore();
                        ctx.fillStyle = '#666';
                        ctx.font = '10px Arial';
                        ctx.fillText('–±–µ–∑ –ø–æ–¥–∫–ª–∞–¥–∫–∏', x - 30, y + (i === 1 ? 40 : 40));
                        ctx.save();
                        ctx.translate(x, y);
                        ctx.rotate(angle + Math.PI);
                    }
                }
                
                ctx.restore();
            }

            // –†–∞–∑–º–µ—Ä—ã –¥–µ—Ç–∞–ª–∏
            ctx.fillStyle = '#333';
            ctx.font = '14px Arial';
            ctx.fillText(`a = ${a} –º–º`, centerX - 25, centerY - (b * scale) / 2 - 10);
            ctx.fillText(`b = ${b} –º–º`, centerX + (a * scale) / 2 + 10, centerY);
            
            // –†–∞–¥–∏—É—Å
            ctx.strokeStyle = '#9c27b0';
            ctx.setLineDash([5, 5]);
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(centerX, centerY);
            ctx.lineTo(centerX + (a * scale) / 2, centerY - (b * scale) / 2);
            ctx.stroke();
            ctx.setLineDash([]);
            
            ctx.fillStyle = '#9c27b0';
            ctx.font = 'bold 12px Arial';
            ctx.fillText(`R = ${R.toFixed(1)} –º–º`, centerX + 10, centerY - 20);
        }

        // –û–±—â–∞—è —Å—Ö–µ–º–∞ –≤—Å–µ—Ö –º–µ—Ç–æ–¥–æ–≤
        function drawOverview() {
            const canvas = document.getElementById('overviewCanvas');
            const ctx = canvas.getContext('2d');
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // –ó–∞–≥–æ–ª–æ–≤–æ–∫
            ctx.fillStyle = '#1e3c72';
            ctx.font = 'bold 20px Arial';
            ctx.fillText('–ú–µ—Ç–æ–¥—ã —Ä–∞—Å—á–µ—Ç–∞ —Ç–æ–ª—â–∏–Ω—ã –ø–æ–¥–∫–ª–∞–¥–∫–∏', 20, 30);
            
            // –ú–µ—Ç–æ–¥ 1: –¢–∞–±–ª–∏—á–Ω—ã–π –¥–ª—è –∫—Ä—É–≥–ª—ã—Ö –¥–µ—Ç–∞–ª–µ–π
            ctx.fillStyle = '#333';
            ctx.font = 'bold 16px Arial';
            ctx.fillText('1. –¢–∞–±–ª–∏—á–Ω—ã–π –º–µ—Ç–æ–¥ (–∫—Ä—É–≥–ª–∞—è –¥–µ—Ç–∞–ª—å)', 20, 70);
            
            ctx.font = '14px Arial';
            ctx.fillText('A = e/D, k –∏–∑ —Ç–∞–±–ª–∏—Ü—ã, t = k √ó D', 40, 95);
            
            // –ù–µ–±–æ–ª—å—à–∞—è —Å—Ö–µ–º–∞
            drawMiniSchema(ctx, 120, 130, 60, 'eccentric');
            
            // –ú–µ—Ç–æ–¥ 2: –£–ø—Ä–æ—â–µ–Ω–Ω—ã–π
            ctx.fillStyle = '#333';
            ctx.font = 'bold 16px Arial';
            ctx.fillText('2. –£–ø—Ä–æ—â–µ–Ω–Ω—ã–π –º–µ—Ç–æ–¥', 20, 250);
            
            ctx.font = '14px Arial';
            ctx.fillText('2-–∫—É–ª–∞—á–∫–æ–≤—ã–π: t = e', 40, 275);
            ctx.fillText('3-–∫—É–ª–∞—á–∫–æ–≤—ã–π: t = 1.5 √ó e', 40, 295);
            ctx.fillText('4-–∫—É–ª–∞—á–∫–æ–≤—ã–π: t = ‚àö2 √ó e', 40, 315);
            
            // –ú–µ—Ç–æ–¥ 3: –ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∞—è –¥–µ—Ç–∞–ª—å (–æ—Ç–≤–µ—Ä—Å—Ç–∏–µ)
            ctx.fillStyle = '#333';
            ctx.font = 'bold 16px Arial';
            ctx.fillText('3. –ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∞—è –¥–µ—Ç–∞–ª—å (–∑–∞–∂–∏–º –∑–∞ –æ—Ç–≤–µ—Ä—Å—Ç–∏–µ)', 350, 70);
            
            ctx.font = '14px Arial';
            ctx.fillText('R = ‚àö[(A/2)¬≤ + (B/2)¬≤], S = 1.5 √ó e', 370, 95);
            
            drawMiniSchema(ctx, 480, 130, 60, 'rectangle');
            
            // –ú–µ—Ç–æ–¥ 4: –ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∞—è –¥–µ—Ç–∞–ª—å (–∑–∞–∂–∏–º –∑–∞ –≤–Ω–µ—à–Ω–∏–π –∫–æ–Ω—Ç—É—Ä)
            ctx.fillStyle = '#333';
            ctx.font = 'bold 16px Arial';
            ctx.fillText('4. –ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∞—è –¥–µ—Ç–∞–ª—å (–∑–∞–∂–∏–º –∑–∞ –∫–æ–Ω—Ç—É—Ä)', 350, 250);
            
            ctx.font = '14px Arial';
            ctx.fillText('R = ‚àö[(a/2)¬≤ + (b/2)¬≤], t = R - h', 370, 275);
            
            drawMiniSchema(ctx, 480, 310, 60, 'rectChuck');
            
            // –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞
            ctx.fillStyle = '#1e3c72';
            ctx.font = 'bold 16px Arial';
            ctx.fillText('–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤', 20, 420);
            
            const tableData = [
                ['–ú–µ—Ç–æ–¥', '–¢–æ—á–Ω–æ—Å—Ç—å', '–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ'],
                ['–¢–∞–±–ª–∏—á–Ω—ã–π', '–í—ã—Å–æ–∫–∞—è', '–û—Å—Ç—Ä—ã–µ –∫—É–ª–∞—á–∫–∏'],
                ['–£–ø—Ä–æ—â–µ–Ω–Ω—ã–π', '–°—Ä–µ–¥–Ω—è—è', '–ë—ã—Å—Ç—Ä—ã–π —Ä–∞—Å—á–µ—Ç'],
                ['–ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∞—è', '–í—ã—Å–æ–∫–∞—è', '–°–ª–æ–∂–Ω—ã–µ –¥–µ—Ç–∞–ª–∏']
            ];
            
            let y = 450;
            ctx.font = '12px Arial';
            
            for (let i = 0; i < tableData.length; i++) {
                const row = tableData[i];
                let x = 40;
                
                for (let j = 0; j < row.length; j++) {
                    if (i === 0) {
                        ctx.fillStyle = '#2a5298';
                        ctx.fillRect(x - 5, y - 15, 150, 20);
                        ctx.fillStyle = 'white';
                        ctx.font = 'bold 12px Arial';
                    } else {
                        ctx.fillStyle = '#f0f4f8';
                        ctx.fillRect(x - 5, y - 15, 150, 20);
                        ctx.fillStyle = '#333';
                        ctx.font = '12px Arial';
                    }
                    
                    ctx.fillText(row[j], x, y);
                    x += 160;
                }
                
                y += 25;
            }
            
            // –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
            ctx.fillStyle = '#4caf50';
            ctx.font = 'bold 14px Arial';
            ctx.fillText('‚úì –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:', 20, 560);
            
            ctx.fillStyle = '#333';
            ctx.font = '12px Arial';
            ctx.fillText('‚Ä¢ –ú–∞—Ç–µ—Ä–∏–∞–ª –ø–æ–¥–∫–ª–∞–¥–æ–∫: —Å—Ç–∞–ª—å 45, –∑–∞–∫–∞–ª–µ–Ω–Ω–∞—è HRC 45-50', 40, 580);
            ctx.fillText('‚Ä¢ –¢–æ—á–Ω–æ—Å—Ç—å –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è: ¬±0.05 –º–º', 40, 595);
        }

        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–∏—Å–æ–≤–∞–Ω–∏—è –º–∏–Ω–∏-—Å—Ö–µ–º
        function drawMiniSchema(ctx, x, y, radius, type) {
            ctx.save();
            ctx.translate(x, y);
            
            // –û–∫—Ä—É–∂–Ω–æ—Å—Ç—å –ø–∞—Ç—Ä–æ–Ω–∞
            ctx.strokeStyle = '#666';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.arc(0, 0, radius, 0, 2 * Math.PI);
            ctx.stroke();
            
            if (type === 'eccentric') {
                // –î–µ—Ç–∞–ª—å —Å–æ —Å–º–µ—â–µ–Ω–∏–µ–º
                ctx.fillStyle = 'rgba(66, 165, 245, 0.3)';
                ctx.strokeStyle = '#1976D2';
                ctx.beginPath();
                ctx.arc(10, 0, radius * 0.6, 0, 2 * Math.PI);
                ctx.fill();
                ctx.stroke();
                
                // –ü–æ–¥–∫–ª–∞–¥–∫–∞
                ctx.fillStyle = '#d32f2f';
                ctx.fillRect(-radius - 5, -10, 15, 20);
                
            } else if (type === 'rectangle') {
                // –ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∞—è –¥–µ—Ç–∞–ª—å
                const w = radius * 0.8;
                const h = radius * 0.5;
                ctx.fillStyle = 'rgba(66, 165, 245, 0.3)';
                ctx.strokeStyle = '#1976D2';
                ctx.fillRect(-w/2, -h/2, w, h);
                ctx.strokeRect(-w/2, -h/2, w, h);
                
                // –û—Ç–≤–µ—Ä—Å—Ç–∏–µ
                ctx.fillStyle = 'white';
                ctx.strokeStyle = '#d32f2f';
                ctx.beginPath();
                ctx.arc(0, 0, radius * 0.2, 0, 2 * Math.PI);
                ctx.fill();
                ctx.stroke();
                
            } else if (type === 'rectChuck') {
                // –ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∞—è –¥–µ—Ç–∞–ª—å –≤ –ø–∞—Ç—Ä–æ–Ω–µ
                const w = radius * 0.6;
                const h = radius * 0.4;
                ctx.fillStyle = 'rgba(66, 165, 245, 0.3)';
                ctx.strokeStyle = '#1976D2';
                ctx.fillRect(-w/2, -h/2, w, h);
                ctx.strokeRect(-w/2, -h/2, w, h);
                
                // –ü–æ–¥–∫–ª–∞–¥–∫–∞
                ctx.fillStyle = '#d32f2f';
                ctx.fillRect(-10, -radius - 5, 20, 15);
            }
            
            ctx.restore();
        }

        function drawRectangle(A, B, d, c, orientation) {
            const canvas = document.getElementById('rectCanvas');
            const ctx = canvas.getContext('2d');
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            const scale = Math.min(300 / Math.max(A, B), 2);
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;

            const R = Math.sqrt((A/2) * (A/2) + (B/2) * (B/2)) * scale;
            ctx.strokeStyle = '#ccc';
            ctx.lineWidth = 1;
            ctx.setLineDash([5, 5]);
            ctx.beginPath();
            ctx.arc(centerX, centerY, R, 0, 2 * Math.PI);
            ctx.stroke();
            ctx.setLineDash([]);

            ctx.strokeStyle = '#333';
            ctx.lineWidth = 2;
            ctx.strokeRect(
                centerX - (A * scale) / 2,
                centerY - (B * scale) / 2,
                A * scale,
                B * scale
            );

            const holeX = centerX + c * scale * (orientation === 'A' ? 0 : 1);
            const holeY = centerY + c * scale * (orientation === 'A' ? 1 : 0);
            
            ctx.strokeStyle = '#d32f2f';
            ctx.fillStyle = 'rgba(211, 47, 47, 0.1)';
            ctx.beginPath();
            ctx.arc(holeX, holeY, (d * scale) / 2, 0, 2 * Math.PI);
            ctx.fill();
            ctx.stroke();

            ctx.fillStyle = '#2196F3';
            ctx.beginPath();
            ctx.arc(centerX, centerY, 3, 0, 2 * Math.PI);
            ctx.fill();

            ctx.fillStyle = '#d32f2f';
            ctx.beginPath();
            ctx.arc(holeX, holeY, 3, 0, 2 * Math.PI);
            ctx.fill();

            ctx.strokeStyle = '#666';
            ctx.lineWidth = 1;
            ctx.font = '12px Arial';
            ctx.fillStyle = '#333';

            const yOffset = centerY - (B * scale) / 2 - 20;
            ctx.beginPath();
            ctx.moveTo(centerX - (A * scale) / 2, yOffset);
            ctx.lineTo(centerX + (A * scale) / 2, yOffset);
            ctx.stroke();
            ctx.fillText(A + ' –º–º', centerX - 20, yOffset - 5);

            const xOffset = centerX + (A * scale) / 2 + 20;
            ctx.beginPath();
            ctx.moveTo(xOffset, centerY - (B * scale) / 2);
            ctx.lineTo(xOffset, centerY + (B * scale) / 2);
            ctx.stroke();
            ctx.save();
            ctx.translate(xOffset + 15, centerY);
            ctx.rotate(-Math.PI / 2);
            ctx.fillText(B + ' –º–º', -15, 0);
            ctx.restore();

            if (c !== 0) {
                ctx.strokeStyle = '#d32f2f';
                ctx.setLineDash([3, 3]);
                ctx.beginPath();
                ctx.moveTo(centerX, centerY);
                ctx.lineTo(holeX, holeY);
                ctx.stroke();
                ctx.setLineDash([]);
                
                const midX = (centerX + holeX) / 2;
                const midY = (centerY + holeY) / 2;
                ctx.fillStyle = '#d32f2f';
                ctx.fillText('c = ' + c + ' –º–º', midX + 5, midY - 5);
            }

            ctx.fillStyle = '#d32f2f';
            ctx.fillText('d = ' + d + ' –º–º', holeX - 20, holeY - (d * scale) / 2 - 10);
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        buildTable();
        updateMethod();
        
        // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –æ–±—â–µ–π —Å—Ö–µ–º—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.addEventListener('load', function() {
            setTimeout(drawOverview, 500);
        });
    </script>
</body>
</html>