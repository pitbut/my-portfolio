<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–µ–ª–∏—Ç–µ–ª—å–Ω–æ–π –≥–æ–ª–æ–≤–∫–∏ / Dividing Head Calculator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
        }

        .header {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        .header h1 {
            font-size: 28px;
            color: #667eea;
            flex: 1;
        }

        .language-switcher {
            display: flex;
            gap: 10px;
        }

        .lang-btn {
            padding: 10px 20px;
            border: 2px solid #667eea;
            background: white;
            color: #667eea;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }

        .lang-btn.active {
            background: #667eea;
            color: white;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .tab-button {
            padding: 12px 25px;
            background: rgba(255,255,255,0.2);
            color: white;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s;
            border: none;
        }

        .tab-button:hover {
            background: rgba(255,255,255,0.3);
        }

        .tab-button.active {
            background: white;
            color: #667eea;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .calculators {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(450px, 1fr));
            gap: 25px;
        }

        .calc-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
        }

        .calc-title {
            font-size: 20px;
            color: #667eea;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #764ba2;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }

        input[type="number"],
        select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s;
        }

        input[type="number"]:focus,
        select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 8px rgba(102, 126, 234, 0.2);
        }

        input[type="radio"] {
            margin-right: 8px;
        }

        .radio-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
            padding: 15px;
            background: #f5f5f5;
            border-radius: 8px;
        }

        .radio-option {
            display: flex;
            align-items: center;
            padding: 10px;
            background: white;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .radio-option:hover {
            background: #e3f2fd;
        }

        button {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .results {
            background: #f0f4f8;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
        }

        .results h3 {
            color: #667eea;
            margin-bottom: 15px;
        }

        .result-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #ddd;
        }

        .result-label {
            font-weight: 500;
            color: #555;
        }

        .result-value {
            font-weight: 700;
            color: #764ba2;
            font-size: 18px;
        }

        .instruction-box {
            background: #e8f5e9;
            border-left: 4px solid #4caf50;
            padding: 20px;
            margin-top: 20px;
            border-radius: 8px;
        }

        .instruction-box h4 {
            color: #2e7d32;
            margin-bottom: 15px;
            font-size: 18px;
        }

        .instruction-step {
            padding: 12px;
            margin: 10px 0;
            background: white;
            border-radius: 6px;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .step-number {
            background: #4caf50;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
        }

        .formula-box {
            background: #fff9e6;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin-top: 15px;
            border-radius: 4px;
        }

        .formula-box h4 {
            color: #f57c00;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .formula {
            font-family: 'Courier New', monospace;
            font-size: 16px;
            color: #333;
            margin: 5px 0;
            font-weight: bold;
        }

        .info-box {
            background: #e3f2fd;
            border-left: 4px solid #2196F3;
            padding: 15px;
            margin-top: 15px;
            border-radius: 4px;
            font-size: 14px;
        }

        .warning {
            background: #fff3cd;
            border-left: 4px solid #ff9800;
            padding: 12px;
            margin-top: 15px;
            border-radius: 4px;
            color: #856404;
        }

        .gears-list {
            background: #e8f5e9;
            border-left: 4px solid #4caf50;
            padding: 15px;
            margin-top: 15px;
            border-radius: 4px;
        }

        .gears-list h4 {
            color: #2e7d32;
            margin-bottom: 10px;
        }

        .gear-option {
            padding: 12px;
            margin: 8px 0;
            background: white;
            border-radius: 6px;
            border: 2px solid #4caf50;
            font-size: 15px;
        }

        .gear-option.best {
            background: #c8e6c9;
            border: 3px solid #2e7d32;
            font-weight: bold;
        }

        .disc-info {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 8px;
            margin-top: 10px;
        }

        .disc-info h4 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .disc-row {
            padding: 8px;
            margin: 5px 0;
            background: white;
            border-radius: 4px;
            font-size: 14px;
        }

        .canvas-container {
            text-align: center;
            margin-top: 20px;
            padding: 20px;
            background: white;
            border-radius: 8px;
            border: 2px solid #e0e0e0;
        }

        canvas {
            max-width: 100%;
            height: auto;
        }

        @media (max-width: 768px) {
            .calculators {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>‚öôÔ∏è –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–µ–ª–∏—Ç–µ–ª—å–Ω–æ–π –≥–æ–ª–æ–≤–∫–∏</h1>
            <div class="language-switcher">
                <button class="lang-btn active">–†—É—Å—Å–∫–∏–π</button>
                <button class="lang-btn">English</button>
            </div>
        </div>

        <div class="tabs">
            <button class="tab-button active" onclick="switchTab('simple')">
                –ü—Ä–æ—Å—Ç–æ–µ –¥–µ–ª–µ–Ω–∏–µ
            </button>
            <button class="tab-button" onclick="switchTab('differential')">
                –î–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–µ –¥–µ–ª–µ–Ω–∏–µ
            </button>
            <button class="tab-button" onclick="switchTab('thread')">
                –ù–∞—Ä–µ–∑–∞–Ω–∏–µ —Ä–µ–∑—å–±—ã
            </button>
        </div>

        <!-- –í–∫–ª–∞–¥–∫–∞: –ü—Ä–æ—Å—Ç–æ–µ –¥–µ–ª–µ–Ω–∏–µ -->
        <div id="simple" class="tab-content active">
            <div class="calculators">
                <div class="calc-card">
                    <h2 class="calc-title">üìê –ü—Ä–æ—Å—Ç–æ–µ –¥–µ–ª–µ–Ω–∏–µ</h2>
                    
                    <div class="form-group">
                        <label>–ß–∏—Å–ª–æ –¥–µ–ª–µ–Ω–∏–π (z):</label>
                        <input type="number" id="simpleDivisions" value="30" min="1" step="1">
                    </div>

                    <div class="form-group">
                        <label>–ü–µ—Ä–µ–¥–∞—Ç–æ—á–Ω–æ–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –≥–æ–ª–æ–≤–∫–∏ (N):</label>
                        <input type="number" id="simpleRatio" value="40" min="1" step="1">
                    </div>

                    <div class="form-group">
                        <label>–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–ª–∏—Ç–µ–ª—å–Ω—ã–π –¥–∏—Å–∫:</label>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" name="discType" id="disc1" value="1" onchange="updateDiscSelection()">
                                <label for="disc1">–î–∏—Å–∫ 1: 15, 16, 17, 18, 19, 20</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" name="discType" id="disc2" value="2" onchange="updateDiscSelection()">
                                <label for="disc2">–î–∏—Å–∫ 2: 21, 23, 27, 29, 31, 33</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" name="discType" id="disc3" value="3" onchange="updateDiscSelection()">
                                <label for="disc3">–î–∏—Å–∫ 3: 37, 39, 41, 43, 47, 49</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" name="discType" id="discCustom" value="custom" checked onchange="updateDiscSelection()">
                                <label for="discCustom">–°–≤–æ–π –¥–∏—Å–∫</label>
                            </div>
                        </div>
                    </div>

                    <div class="form-group" id="customHolesGroup">
                        <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–≤–µ—Ä—Å—Ç–∏–π –≤ –¥–∏—Å–∫–µ:</label>
                        <input type="number" id="customHoles" value="30" min="1" step="1">
                    </div>

                    <button onclick="calculateSimple()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>

                    <div id="simpleResults" class="results" style="display:none;">
                        <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å—á–µ—Ç–∞:</h3>
                        
                        <div class="result-item">
                            <span class="result-label">–ß–∏—Å–ª–æ –æ–±–æ—Ä–æ—Ç–æ–≤ —Ä—É–∫–æ—è—Ç–∫–∏:</span>
                            <span class="result-value" id="simpleTurns">-</span>
                        </div>

                        <div class="formula-box">
                            <h4>üí° –§–æ—Ä–º—É–ª–∞:</h4>
                            <div class="formula" id="simpleFormula">-</div>
                        </div>

                        <div id="simpleInstructions" class="instruction-box">
                            <h4>üìã –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:</h4>
                            <div id="instructionSteps"></div>
                        </div>

                        <div id="simplePlates" class="disc-info">
                            <h4>–î—Ä—É–≥–∏–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã:</h4>
                            <div id="simplePlatesList"></div>
                        </div>
                    </div>
                </div>

                <div class="calc-card">
                    <h2 class="calc-title">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h2>
                    <div class="info-box">
                        <strong>–ü—Ä–æ—Å—Ç–æ–µ –¥–µ–ª–µ–Ω–∏–µ</strong> –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–≥–¥–∞ —á–∏—Å–ª–æ –æ–±–æ—Ä–æ—Ç–æ–≤ —Ä—É–∫–æ—è—Ç–∫–∏ –ø–æ–ª—É—á–∞–µ—Ç—Å—è —Ü–µ–ª—ã–º —á–∏—Å–ª–æ–º –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ–π –¥—Ä–æ–±—å—é, –∫–æ—Ç–æ—Ä—É—é –º–æ–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –¥–µ–ª–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∏—Å–∫–∞—Ö.
                    </div>
                    
                    <div class="disc-info">
                        <h4>–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –¥–µ–ª–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∏—Å–∫–∏:</h4>
                        <div class="disc-row"><strong>–î–∏—Å–∫ 1:</strong> 15, 16, 17, 18, 19, 20 –æ—Ç–≤–µ—Ä—Å—Ç–∏–π</div>
                        <div class="disc-row"><strong>–î–∏—Å–∫ 2:</strong> 21, 23, 27, 29, 31, 33 –æ—Ç–≤–µ—Ä—Å—Ç–∏—è</div>
                        <div class="disc-row"><strong>–î–∏—Å–∫ 3:</strong> 37, 39, 41, 43, 47, 49 –æ—Ç–≤–µ—Ä—Å—Ç–∏–π</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –í–∫–ª–∞–¥–∫–∞: –î–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–µ –¥–µ–ª–µ–Ω–∏–µ -->
        <div id="differential" class="tab-content">
            <div class="calculators">
                <div class="calc-card">
                    <h2 class="calc-title">‚öôÔ∏è –î–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–µ –¥–µ–ª–µ–Ω–∏–µ</h2>
                    
                    <div class="form-group">
                        <label>–¢—Ä–µ–±—É–µ–º–æ–µ —á–∏—Å–ª–æ –¥–µ–ª–µ–Ω–∏–π (z):</label>
                        <input type="number" id="diffDivisions" value="127" min="1" step="1">
                    </div>

                    <div class="form-group">
                        <label>–ü–µ—Ä–µ–¥–∞—Ç–æ—á–Ω–æ–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –≥–æ–ª–æ–≤–∫–∏ (N):</label>
                        <input type="number" id="diffRatio" value="40" min="1" step="1">
                    </div>

                    <div class="form-group">
                        <label>–ë–ª–∏–∑–∫–æ–µ —á–∏—Å–ª–æ –¥–µ–ª–µ–Ω–∏–π (z‚ÇÄ):</label>
                        <input type="number" id="approxDivisions" value="120" min="1" step="1">
                        <small style="color: #666;">–û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –¥–ª—è –∞–≤—Ç–æ–ø–æ–¥–±–æ—Ä–∞</small>
                    </div>

                    <button onclick="calculateDifferential()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>

                    <div id="diffCheckSection" class="disc-info" style="display:none; margin-top: 20px; background: #fff9e6; border: 2px solid #ffc107;">
                        <h4 style="color: #f57c00;">üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤–æ–∏—Ö —à–µ—Å—Ç–µ—Ä–µ–Ω</h4>
                        <div class="form-group">
                            <label>–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–∏ —à–µ—Å—Ç–µ—Ä–Ω–∏:</label>
                            <input type="text" id="checkDiffGears" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 25-50 –∏–ª–∏ 20-40-30-60">
                            <small style="color: #666;">–§–æ—Ä–º–∞—Ç: a-b (1 –ø–∞—Ä–∞) –∏–ª–∏ a-b-c-d (2 –ø–∞—Ä—ã)</small>
                        </div>
                        <button onclick="checkUserGears('diff')" style="background: #ffc107;">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
                        <div id="diffCheckResult"></div>
                    </div>

                    <div id="diffResults" class="results" style="display:none;">
                        <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å—á–µ—Ç–∞:</h3>
                        
                        <div class="result-item">
                            <span class="result-label">–û–±–æ—Ä–æ—Ç—ã —Ä—É–∫–æ—è—Ç–∫–∏ (–¥–ª—è z‚ÇÄ):</span>
                            <span class="result-value" id="diffTurns">-</span>
                        </div>

                        <div class="result-item">
                            <span class="result-label">–ü–µ—Ä–µ–¥–∞—Ç–æ—á–Ω–æ–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –≥–∏—Ç–∞—Ä—ã:</span>
                            <span class="result-value" id="gearRatio">-</span>
                        </div>

                        <div class="formula-box">
                            <h4>üí° –§–æ—Ä–º—É–ª—ã:</h4>
                            <div id="diffFormula"></div>
                        </div>

                        <div id="diffInstructions" class="instruction-box">
                            <h4>üìã –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:</h4>
                            <div id="diffInstructionSteps"></div>
                        </div>

                        <div id="diffGears" class="gears-list">
                            <h4>‚öôÔ∏è –í–∞—Ä–∏–∞–Ω—Ç—ã –ø–æ–¥–±–æ—Ä–∞ —à–µ—Å—Ç–µ—Ä–µ–Ω:</h4>
                            <div id="diffGearsList"></div>
                        </div>
                    </div>
                </div>

                <div class="calc-card">
                    <h2 class="calc-title">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h2>
                    <div class="info-box">
                        <strong>–î–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–µ –¥–µ–ª–µ–Ω–∏–µ</strong> –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫–æ–≥–¥–∞ –ø—Ä–æ—Å—Ç–æ–µ –¥–µ–ª–µ–Ω–∏–µ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ (–Ω–µ—Ç –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö –¥–µ–ª–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∏—Å–∫–æ–≤). –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Å–º–µ–Ω–Ω–∞—è –≥–∏—Ç–∞—Ä–∞, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç –¥–µ–ª–∏—Ç–µ–ª—å–Ω—ã–π –¥–∏—Å–∫ –≤–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã.
                    </div>
                    
                    <div class="warning">
                        <strong>‚ö†Ô∏è –í–∞–∂–Ω–æ:</strong> –ü—Ä–∏ –¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–º –¥–µ–ª–µ–Ω–∏–∏ —Ñ–∏–∫—Å–∞—Ç–æ—Ä –¥–µ–ª–∏—Ç–µ–ª—å–Ω–æ–≥–æ –¥–∏—Å–∫–∞ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤—ã–∫–ª—é—á–µ–Ω!
                    </div>

                    <div class="disc-info">
                        <h4>–î–æ—Å—Ç—É–ø–Ω—ã–µ —à–µ—Å—Ç–µ—Ä–Ω–∏:</h4>
                        <div class="disc-row">20, 25, 30, 35, 40, 45, 50, 55, 60, 65, 70, 75, 80, 85, 90, 95, 100 –∑—É–±—å–µ–≤</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –í–∫–ª–∞–¥–∫–∞: –ù–∞—Ä–µ–∑–∞–Ω–∏–µ —Ä–µ–∑—å–±—ã -->
        <div id="thread" class="tab-content">
            <div class="calculators">
                <div class="calc-card">
                    <h2 class="calc-title">üî© –ù–∞—Ä–µ–∑–∞–Ω–∏–µ —Ä–µ–∑—å–±—ã</h2>
                    
                    <div class="form-group">
                        <label>–¢—Ä–µ–±—É–µ–º—ã–π —à–∞–≥ —Ä–µ–∑—å–±—ã (P, –º–º):</label>
                        <input type="number" id="threadPitch" value="2" step="0.01" min="0.01">
                    </div>

                    <div class="form-group">
                        <label>–®–∞–≥ —Ö–æ–¥–æ–≤–æ–≥–æ –≤–∏–Ω—Ç–∞ —Å—Ç–∞–Ω–∫–∞ (t, –º–º):</label>
                        <input type="number" id="screwPitch" value="6" step="0.1" min="0.1">
                    </div>

                    <div class="form-group">
                        <label>–¢–∏–ø —Ä–µ–∑—å–±—ã:</label>
                        <select id="threadType">
                            <option value="metric">–ú–µ—Ç—Ä–∏—á–µ—Å–∫–∞—è (–º–º)</option>
                            <option value="inch">–î—é–π–º–æ–≤–∞—è (–Ω–∏—Ç–æ–∫ –Ω–∞ –¥—é–π–º)</option>
                            <option value="modular">–ú–æ–¥—É–ª—å–Ω–∞—è</option>
                        </select>
                    </div>

                    <button onclick="calculateThread()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>

                    <div id="threadCheckSection" class="disc-info" style="display:none; margin-top: 20px; background: #fff9e6; border: 2px solid #ffc107;">
                        <h4 style="color: #f57c00;">üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤–æ–∏—Ö —à–µ—Å—Ç–µ—Ä–µ–Ω</h4>
                        <div class="form-group">
                            <label>–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–∏ —à–µ—Å—Ç–µ—Ä–Ω–∏:</label>
                            <input type="text" id="checkThreadGears" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 25-50 –∏–ª–∏ 20-40-30-60">
                            <small style="color: #666;">–§–æ—Ä–º–∞—Ç: a-b (1 –ø–∞—Ä–∞) –∏–ª–∏ a-b-c-d (2 –ø–∞—Ä—ã)</small>
                        </div>
                        <button onclick="checkUserGears('thread')" style="background: #ffc107;">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
                        <div id="threadCheckResult"></div>
                    </div>

                    <div id="threadResults" class="results" style="display:none;">
                        <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å—á–µ—Ç–∞:</h3>
                        
                        <div class="result-item">
                            <span class="result-label">–ü–µ—Ä–µ–¥–∞—Ç–æ—á–Ω–æ–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–µ:</span>
                            <span class="result-value" id="threadRatio">-</span>
                        </div>

                        <div class="formula-box">
                            <h4>üí° –§–æ—Ä–º—É–ª–∞:</h4>
                            <div id="threadFormula"></div>
                        </div>

                        <div id="threadInstructions" class="instruction-box">
                            <h4>üìã –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:</h4>
                            <div id="threadInstructionSteps"></div>
                        </div>

                        <div id="threadGears" class="gears-list">
                            <h4>‚öôÔ∏è –í–∞—Ä–∏–∞–Ω—Ç—ã –ø–æ–¥–±–æ—Ä–∞ —à–µ—Å—Ç–µ—Ä–µ–Ω:</h4>
                            <div id="threadGearsList"></div>
                        </div>
                    </div>
                </div>

                <div class="calc-card">
                    <h2 class="calc-title">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h2>
                    <div class="info-box">
                        <strong>–ù–∞—Ä–µ–∑–∞–Ω–∏–µ —Ä–µ–∑—å–±—ã</strong> —Ç—Ä–µ–±—É–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–º–µ–Ω–Ω–æ–π –≥–∏—Ç–∞—Ä—ã –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç—Ä–µ–±—É–µ–º–æ–≥–æ —à–∞–≥–∞ —Ä–µ–∑—å–±—ã. –ü–µ—Ä–µ–¥–∞—Ç–æ—á–Ω–æ–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –æ—Ç–Ω–æ—à–µ–Ω–∏–µ–º —à–∞–≥–æ–≤.
                    </div>
                    
                    <div class="disc-info">
                        <h4>–§–æ—Ä–º—É–ª—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ —Ä–µ–∑—å–±—ã:</h4>
                        <div class="disc-row"><strong>–ú–µ—Ç—Ä–∏—á–µ—Å–∫–∞—è:</strong> i = P / t</div>
                        <div class="disc-row"><strong>–î—é–π–º–æ–≤–∞—è:</strong> i = (25.4 / P) / (25.4 / t)</div>
                        <div class="disc-row"><strong>–ú–æ–¥—É–ª—å–Ω–∞—è:</strong> i = (œÄ √ó m) / t</div>
                    </div>

                    <div class="disc-info">
                        <h4>–î–æ—Å—Ç—É–ø–Ω—ã–µ —à–µ—Å—Ç–µ—Ä–Ω–∏:</h4>
                        <div class="disc-row">20, 25, 30, 35, 40, 45, 50, 55, 60, 65, 70, 75, 80, 85, 90, 95, 100 –∑—É–±—å–µ–≤</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –¥–µ–ª–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∏—Å–∫–∏
        const indexPlates = [
            [15, 16, 17, 18, 19, 20],
            [21, 23, 27, 29, 31, 33],
            [37, 39, 41, 43, 47, 49]
        ];

        // –î–æ—Å—Ç—É–ø–Ω—ã–µ —à–µ—Å—Ç–µ—Ä–Ω–∏
        const availableGears = [20, 25, 30, 35, 40, 45, 50, 55, 60, 65, 70, 75, 80, 85, 90, 95, 100];

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫
        function switchTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            document.querySelectorAll('.tab-button').forEach(button => {
                button.classList.remove('active');
            });
            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—ã–±–æ—Ä–∞ –¥–∏—Å–∫–∞
        function updateDiscSelection() {
            const customSelected = document.getElementById('discCustom').checked;
            document.getElementById('customHolesGroup').style.display = customSelected ? 'block' : 'none';
        }

        // –ù–û–î
        function gcd(a, b) {
            return b === 0 ? a : gcd(b, a % b);
        }

        // –°–æ–∫—Ä–∞—â–µ–Ω–∏–µ –¥—Ä–æ–±–∏
        function reduceFraction(numerator, denominator) {
            const divisor = gcd(numerator, denominator);
            return {
                num: numerator / divisor,
                den: denominator / divisor
            };
        }

        // –†–∞—Å—á–µ—Ç –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –¥–∏—Å–∫–∞
        function calculateForDisc(N, z, discHoles) {
            const totalHoles = N * discHoles / z;
            
            if (Math.abs(totalHoles - Math.round(totalHoles)) > 0.0001) {
                return null;
            }
            
            const holesInt = Math.round(totalHoles);
            const fullTurns = Math.floor(holesInt / discHoles);
            const remainderHoles = holesInt % discHoles;
            const gapHoles = remainderHoles > 0 ? remainderHoles - 1 : 0;
            
            return {
                discHoles: discHoles,
                totalHoles: holesInt,
                fullTurns: fullTurns,
                remainderHoles: remainderHoles,
                gapHoles: gapHoles
            };
        }

        // ============ –ü–†–û–°–¢–û–ï –î–ï–õ–ï–ù–ò–ï ============
        function calculateSimple() {
            const z = parseInt(document.getElementById('simpleDivisions').value);
            const N = parseInt(document.getElementById('simpleRatio').value);
            
            if (isNaN(z) || isNaN(N) || z <= 0 || N <= 0) {
                alert('–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è!');
                return;
            }
            
            const fraction = reduceFraction(N, z);
            const turns = N / z;
            
            const formula = `n = N / z = ${N} / ${z} = ${fraction.num}/${fraction.den}` + 
                           (turns % 1 === 0 ? ` = ${turns}` : ` ‚âà ${turns.toFixed(4)}`);
            
            document.getElementById('simpleTurns').textContent = 
                turns % 1 === 0 ? `${turns} –æ–±–æ—Ä–æ—Ç–æ–≤` : `${fraction.num}/${fraction.den} –æ–±–æ—Ä–æ—Ç–∞`;
            document.getElementById('simpleFormula').textContent = formula;
            
            const selectedDisc = document.querySelector('input[name="discType"]:checked').value;
            let selectedDiscHoles = null;
            
            if (selectedDisc === 'custom') {
                selectedDiscHoles = parseInt(document.getElementById('customHoles').value);
                if (isNaN(selectedDiscHoles) || selectedDiscHoles <= 0) {
                    alert('–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–≤–µ—Ä—Å—Ç–∏–π!');
                    return;
                }
            }
            
            let mainResult = null;
            if (selectedDiscHoles) {
                mainResult = calculateForDisc(N, z, selectedDiscHoles);
                if (!mainResult) {
                    alert(`–î–∏—Å–∫ —Å ${selectedDiscHoles} –æ—Ç–≤–µ—Ä—Å—Ç–∏—è–º–∏ –ù–ï –ø–æ–¥—Ö–æ–¥–∏—Ç!\n\n–í—ã–±–µ—Ä–∏—Ç–µ –¥—Ä—É–≥–æ–π –¥–∏—Å–∫.`);
                    document.getElementById('simpleResults').style.display = 'none';
                    return;
                }
            } else {
                const discIndex = parseInt(selectedDisc) - 1;
                for (let holes of indexPlates[discIndex]) {
                    mainResult = calculateForDisc(N, z, holes);
                    if (mainResult) {
                        selectedDiscHoles = holes;
                        break;
                    }
                }
                
                if (!mainResult) {
                    alert('–ù–∏ –æ–¥–∏–Ω –¥–∏—Å–∫ –∏–∑ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –Ω–∞–±–æ—Ä–∞ –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç!');
                    document.getElementById('simpleResults').style.display = 'none';
                    return;
                }
            }
            
            createSimpleInstructions(mainResult, N, z);
            findAllSuitablePlates(N, z, selectedDiscHoles);
            
            document.getElementById('simpleResults').style.display = 'block';
        }

        function createSimpleInstructions(result, N, z) {
            const div = document.getElementById('instructionSteps');
            div.innerHTML = '';
            
            let stepNum = 1;
            
            div.innerHTML += `
                <div class="instruction-step" style="background: #e3f2fd;">
                    <div class="step-number">üìÄ</div>
                    <div>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–∏—Å–∫ —Å <strong>${result.discHoles} –æ—Ç–≤–µ—Ä—Å—Ç–∏—è–º–∏</strong></div>
                </div>
            `;
            
            if (result.fullTurns > 0) {
                div.innerHTML += `
                    <div class="instruction-step">
                        <div class="step-number">${stepNum++}</div>
                        <div>–°–¥–µ–ª–∞–π—Ç–µ <strong>${result.fullTurns} ${result.fullTurns === 1 ? '–ø–æ–ª–Ω—ã–π –æ–±–æ—Ä–æ—Ç' : '–ø–æ–ª–Ω—ã—Ö –æ–±–æ—Ä–æ—Ç–∞'}</strong> —Ä—É–∫–æ—è—Ç–∫–∏</div>
                    </div>
                `;
            }
            
            if (result.remainderHoles > 0) {
                div.innerHTML += `
                    <div class="instruction-step">
                        <div class="step-number">${stepNum++}</div>
                        <div>${result.fullTurns > 0 ? '–ó–∞—Ç–µ–º ' : ''}–ü—Ä–æ–ø—É—Å—Ç–∏—Ç–µ <strong>${result.remainderHoles} ${result.remainderHoles === 1 ? '–æ—Ç–≤–µ—Ä—Å—Ç–∏–µ' : '–æ—Ç–≤–µ—Ä—Å—Ç–∏—è'}</strong></div>
                    </div>
                    <div class="instruction-step" style="background: #fff9e6;">
                        <div class="step-number">‚ÑπÔ∏è</div>
                        <div>–ú–µ–∂–¥—É —Ñ–∏–∫—Å–∞—Ç–æ—Ä–∞–º–∏ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å <strong>${result.gapHoles} —Å–≤–æ–±–æ–¥–Ω—ã—Ö ${result.gapHoles === 1 ? '–æ—Ç–≤–µ—Ä—Å—Ç–∏–µ' : '–æ—Ç–≤–µ—Ä—Å—Ç–∏–π'}</strong></div>
                    </div>
                `;
            }
            
            div.innerHTML += `
                <div class="instruction-step" style="background: #c8e6c9;">
                    <div class="step-number">üîÑ</div>
                    <div>–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ —ç—Ç–∏ –¥–µ–π—Å—Ç–≤–∏—è <strong>${z} —Ä–∞–∑</strong></div>
                </div>
            `;
        }

        function findAllSuitablePlates(N, z, excludeHoles) {
            const list = document.getElementById('simplePlatesList');
            list.innerHTML = '';
            
            let foundOptions = [];
            
            indexPlates.forEach((plate, index) => {
                plate.forEach(holes => {
                    if (holes === excludeHoles) return;
                    
                    const result = calculateForDisc(N, z, holes);
                    if (result) {
                        foundOptions.push({
                            disc: `–î–∏—Å–∫ ${index + 1}`,
                            ...result
                        });
                    }
                });
            });
            
            if (foundOptions.length > 0) {
                foundOptions.forEach(option => {
                    let text = `<strong>${option.disc}</strong>: ${option.discHoles} –æ—Ç–≤–µ—Ä—Å—Ç–∏–π<br>`;
                    
                    if (option.fullTurns > 0) {
                        text += `‚Üí ${option.fullTurns} –æ–±–æ—Ä–æ—Ç${option.fullTurns > 1 ? '–∞' : ''}`;
                        if (option.remainderHoles > 0) {
                            text += ` + ${option.remainderHoles} –æ—Ç–≤–µ—Ä—Å—Ç${option.remainderHoles === 1 ? '–∏–µ' : '–∏—è'}`;
                        }
                    } else {
                        text += `‚Üí ${option.remainderHoles} –æ—Ç–≤–µ—Ä—Å—Ç${option.remainderHoles === 1 ? '–∏–µ' : '–∏—è'}`;
                    }
                    
                    if (option.remainderHoles > 0) {
                        text += `<br>‚Üí –ú–µ–∂–¥—É —Ñ–∏–∫—Å–∞—Ç–æ—Ä–∞–º–∏: <strong>${option.gapHoles}</strong>`;
                    }
                    
                    list.innerHTML += `<div class="disc-row" style="background: #f0f4f8; border-left: 3px solid #2196F3; padding: 12px;">${text}</div>`;
                });
            } else {
                list.innerHTML = '<div class="disc-row" style="background: #fff9e6;">‚ÑπÔ∏è –î—Ä—É–≥–∏—Ö –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö –¥–∏—Å–∫–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</div>';
            }
        }

        // ============ –ü–†–û–í–ï–†–ö–ê –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–¨–°–ö–ò–• –®–ï–°–¢–ï–†–ï–ù ============
        function checkUserGears(type) {
            const inputId = type === 'diff' ? 'checkDiffGears' : 'checkThreadGears';
            const resultId = type === 'diff' ? 'diffCheckResult' : 'threadCheckResult';
            
            const input = document.getElementById(inputId).value.trim();
            const resultDiv = document.getElementById(resultId);
            
            if (!input) {
                resultDiv.innerHTML = '<div class="warning" style="margin-top: 15px;">–í–≤–µ–¥–∏—Ç–µ —à–µ—Å—Ç–µ—Ä–Ω–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏!</div>';
                return;
            }
            
            // –ü–æ–ª—É—á–∞–µ–º —Ç—Ä–µ–±—É–µ–º–æ–µ –ø–µ—Ä–µ–¥–∞—Ç–æ—á–Ω–æ–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–µ
            let targetNum, targetDen, targetValue;
            
            if (type === 'diff') {
                const z = parseInt(document.getElementById('diffDivisions').value);
                const N = parseInt(document.getElementById('diffRatio').value);
                let z0 = parseInt(document.getElementById('approxDivisions').value);
                
                if (isNaN(z) || isNaN(N)) {
                    resultDiv.innerHTML = '<div class="warning" style="margin-top: 15px;">–°–Ω–∞—á–∞–ª–∞ —Ä–∞—Å—Å—á–∏—Ç–∞–π—Ç–µ –¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–µ –¥–µ–ª–µ–Ω–∏–µ!</div>';
                    return;
                }
                
                if (isNaN(z0)) {
                    z0 = findClosestDivisible(z, N);
                }
                
                const gearNum = z - z0;
                const gearDen = z0;
                const gearFraction = reduceFraction(Math.abs(gearNum), gearDen);
                
                targetNum = gearFraction.num;
                targetDen = gearFraction.den;
                targetValue = targetNum / targetDen;
            } else {
                const P = parseFloat(document.getElementById('threadPitch').value);
                const t = parseFloat(document.getElementById('screwPitch').value);
                const threadType = document.getElementById('threadType').value;
                
                if (isNaN(P) || isNaN(t)) {
                    resultDiv.innerHTML = '<div class="warning" style="margin-top: 15px;">–°–Ω–∞—á–∞–ª–∞ —Ä–∞—Å—Å—á–∏—Ç–∞–π—Ç–µ –Ω–∞—Ä–µ–∑–∞–Ω–∏–µ —Ä–µ–∑—å–±—ã!</div>';
                    return;
                }
                
                let ratio = P / t;
                if (threadType === 'inch') {
                    ratio = (25.4 / P) / (25.4 / t);
                } else if (threadType === 'modular') {
                    ratio = (Math.PI * P) / t;
                }
                
                const multiplier = 1000;
                const num = Math.round(ratio * multiplier);
                const den = multiplier;
                const fraction = reduceFraction(num, den);
                
                targetNum = fraction.num;
                targetDen = fraction.den;
                targetValue = targetNum / targetDen;
            }
            
            // –ü–∞—Ä—Å–∏–º –≤–≤–µ–¥–µ–Ω–Ω—ã–µ —à–µ—Å—Ç–µ—Ä–Ω–∏
            const parts = input.split('-').map(x => parseInt(x.trim()));
            
            if (parts.some(isNaN)) {
                resultDiv.innerHTML = '<div class="warning" style="margin-top: 15px;">–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç! –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ: 25-50 –∏–ª–∏ 20-40-30-60</div>';
                return;
            }
            
            let actualValue, actualNum, actualDen, gearType;
            
            if (parts.length === 2) {
                // –û–¥–Ω–∞ –ø–∞—Ä–∞
                const [a, b] = parts;
                actualValue = a / b;
                const fraction = reduceFraction(a, b);
                actualNum = fraction.num;
                actualDen = fraction.den;
                gearType = 'single';
            } else if (parts.length === 4) {
                // –î–≤–µ –ø–∞—Ä—ã
                const [a, b, c, d] = parts;
                actualValue = (a * c) / (b * d);
                const num = a * c;
                const den = b * d;
                const fraction = reduceFraction(num, den);
                actualNum = fraction.num;
                actualDen = fraction.den;
                gearType = 'double';
            } else {
                resultDiv.innerHTML = '<div class="warning" style="margin-top: 15px;">–ù–µ–≤–µ—Ä–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∏—Å–µ–ª! –í–≤–µ–¥–∏—Ç–µ 2 —á–∏—Å–ª–∞ (1 –ø–∞—Ä–∞) –∏–ª–∏ 4 —á–∏—Å–ª–∞ (2 –ø–∞—Ä—ã)</div>';
                return;
            }
            
            // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –æ—à–∏–±–∫—É
            const error = Math.abs(actualValue - targetValue) / targetValue;
            const errorPercent = (error * 100).toFixed(4);
            const isExact = error < 0.0001;
            
            // –û—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞
            let quality, qualityColor, recommendation;
            if (isExact) {
                quality = "–û–¢–õ–ò–ß–ù–û";
                qualityColor = "#2e7d32";
                recommendation = "–í–∞—à–∏ —à–µ—Å—Ç–µ—Ä–Ω–∏ –¥–∞—é—Ç –¢–û–ß–ù–û–ï –ø–µ—Ä–µ–¥–∞—Ç–æ—á–Ω–æ–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–µ! –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏—Ö!";
            } else if (error < 0.001) {
                quality = "–û–ß–ï–ù–¨ –•–û–†–û–®–û";
                qualityColor = "#4caf50";
                recommendation = "–û—à–∏–±–∫–∞ –º–µ–Ω–µ–µ 0.1% - —ç—Ç–æ –æ—á–µ–Ω—å —Ç–æ—á–Ω–æ! –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å.";
            } else if (error < 0.01) {
                quality = "–ü–†–ò–ï–ú–õ–ï–ú–û";
                qualityColor = "#ff9800";
                recommendation = "–û—à–∏–±–∫–∞ –º–µ–Ω–µ–µ 1% - –ø—Ä–∏–µ–º–ª–µ–º–æ –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –∑–∞–¥–∞—á.";
            } else if (error < 0.05) {
                quality = "–£–î–û–í–õ–ï–¢–í–û–†–ò–¢–ï–õ–¨–ù–û";
                qualityColor = "#ff5722";
                recommendation = "–û—à–∏–±–∫–∞ 1-5% - –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–∏–µ–º–ª–µ–º–æ –¥–ª—è –Ω–µ–∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –∑–∞–¥–∞—á.";
            } else {
                quality = "–í–´–°–û–ö–ê–Ø –û–®–ò–ë–ö–ê";
                qualityColor = "#f44336";
                recommendation = "–û—à–∏–±–∫–∞ –±–æ–ª–µ–µ 5% - —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø–æ–¥–æ–±—Ä–∞—Ç—å –¥—Ä—É–≥–∏–µ —à–µ—Å—Ç–µ—Ä–Ω–∏!";
            }
            
            // –§–æ—Ä–º–∏—Ä—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
            let html = '<div class="gears-list" style="margin-top: 15px; border-color: ' + qualityColor + ';">';
            html += '<h4 style="color: ' + qualityColor + ';">–†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏:</h4>';
            
            // –í–∞—à–∏ —à–µ—Å—Ç–µ—Ä–Ω–∏
            html += '<div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">';
            if (gearType === 'single') {
                html += `<div style="font-size: 18px; font-weight: bold; margin-bottom: 10px;">–í–∞—à–∏ —à–µ—Å—Ç–µ—Ä–Ω–∏: a = ${parts[0]}, b = ${parts[1]}</div>`;
                html += `<div style="color: #666;">–ü–µ—Ä–µ–¥–∞—á–∞: ${parts[0]}/${parts[1]}</div>`;
            } else {
                html += `<div style="font-size: 18px; font-weight: bold; margin-bottom: 10px;">–í–∞—à–∏ —à–µ—Å—Ç–µ—Ä–Ω–∏: a = ${parts[0]}, b = ${parts[1]}, c = ${parts[2]}, d = ${parts[3]}</div>`;
                html += `<div style="color: #666;">–ü–µ—Ä–µ–¥–∞—á–∞: (${parts[0]} √ó ${parts[2]}) / (${parts[1]} √ó ${parts[3]})</div>`;
            }
            html += '</div>';
            
            // –°—Ä–∞–≤–Ω–µ–Ω–∏–µ
            html += '<div style="background: #f5f5f5; padding: 15px; border-radius: 8px; margin: 10px 0;">';
            html += '<table style="width: 100%; border-collapse: collapse;">';
            html += '<tr style="border-bottom: 2px solid #ddd;">';
            html += '<th style="padding: 8px; text-align: left;">–ü–∞—Ä–∞–º–µ—Ç—Ä</th>';
            html += '<th style="padding: 8px; text-align: right;">–¢—Ä–µ–±—É–µ—Ç—Å—è</th>';
            html += '<th style="padding: 8px; text-align: right;">–ü–æ–ª—É—á–∏—Ç—Å—è</th>';
            html += '</tr>';
            html += '<tr>';
            html += '<td style="padding: 8px;"><strong>–î—Ä–æ–±—å:</strong></td>';
            html += `<td style="padding: 8px; text-align: right;">${targetNum}/${targetDen}</td>`;
            html += `<td style="padding: 8px; text-align: right;">${actualNum}/${actualDen}</td>`;
            html += '</tr>';
            html += '<tr>';
            html += '<td style="padding: 8px;"><strong>–î–µ—Å—è—Ç–∏—á–Ω–æ–µ:</strong></td>';
            html += `<td style="padding: 8px; text-align: right;">${targetValue.toFixed(6)}</td>`;
            html += `<td style="padding: 8px; text-align: right;">${actualValue.toFixed(6)}</td>`;
            html += '</tr>';
            html += '</table>';
            html += '</div>';
            
            // –û—à–∏–±–∫–∞ –∏ –æ—Ü–µ–Ω–∫–∞
            html += '<div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0; border-left: 4px solid ' + qualityColor + ';">';
            html += `<div style="font-size: 20px; font-weight: bold; color: ${qualityColor}; margin-bottom: 10px;">`;
            if (isExact) {
                html += `‚úì ${quality} - –û–®–ò–ë–ö–ê: 0% (–¢–û–ß–ù–û)`;
            } else {
                html += `${quality} - –û–®–ò–ë–ö–ê: ${errorPercent}%`;
            }
            html += '</div>';
            html += `<div style="font-size: 16px; color: #333;">${recommendation}</div>`;
            html += '</div>';
            
            // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
            if (!isExact) {
                const diff = Math.abs(actualValue - targetValue);
                html += '<div class="info-box" style="margin-top: 10px;">';
                html += `<strong>–û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ:</strong> ${diff.toFixed(8)}<br>`;
                html += `<strong>–ê–±—Å–æ–ª—é—Ç–Ω–∞—è —Ä–∞–∑–Ω–∏—Ü–∞:</strong> ${(diff * 1000).toFixed(6)} (√ó10‚Åª¬≥)`;
                html += '</div>';
            }
            
            html += '</div>';
            
            resultDiv.innerHTML = html;
        }

        // ============ –î–ò–§–§–ï–†–ï–ù–¶–ò–ê–õ–¨–ù–û–ï –î–ï–õ–ï–ù–ò–ï ============
        function calculateDifferential() {
            const z = parseInt(document.getElementById('diffDivisions').value);
            const N = parseInt(document.getElementById('diffRatio').value);
            let z0 = parseInt(document.getElementById('approxDivisions').value);
            
            if (isNaN(z) || isNaN(N) || z <= 0 || N <= 0) {
                alert('–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è!');
                return;
            }
            
            // –ê–≤—Ç–æ–ø–æ–¥–±–æ—Ä z0 –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω
            if (isNaN(z0) || z0 <= 0) {
                z0 = findClosestDivisible(z, N);
            }
            
            const fraction = reduceFraction(N, z0);
            const turns = N / z0;
            
            // –ü–µ—Ä–µ–¥–∞—Ç–æ—á–Ω–æ–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –≥–∏—Ç–∞—Ä—ã
            const gearNum = z - z0;
            const gearDen = z0;
            const gearFraction = reduceFraction(Math.abs(gearNum), gearDen);
            
            const formula = `
                <div class="formula">n = N / z‚ÇÄ = ${N} / ${z0} = ${fraction.num}/${fraction.den}</div>
                <div class="formula">i = (z - z‚ÇÄ) / z‚ÇÄ = (${z} - ${z0}) / ${z0} = ${gearNum}/${gearDen} = ${gearFraction.num}/${gearFraction.den}</div>
            `;
            
            document.getElementById('diffTurns').textContent = `${fraction.num}/${fraction.den}`;
            document.getElementById('diffFormula').innerHTML = formula;
            document.getElementById('gearRatio').textContent = `${gearFraction.num}/${gearFraction.den}`;
            
            createDiffInstructions(fraction, gearFraction, z, z0, gearNum < 0);
            findGearCombinations(gearFraction.num, gearFraction.den, 'diff');
            
            document.getElementById('diffResults').style.display = 'block';
            document.getElementById('diffCheckSection').style.display = 'block';
        }

        function findClosestDivisible(z, N) {
            let closest = z;
            let minDiff = Infinity;
            
            for (let candidate = Math.max(1, z - 20); candidate <= z + 20; candidate++) {
                if (candidate === z) continue;
                
                const fraction = reduceFraction(N, candidate);
                let hasSuitablePlate = false;
                
                indexPlates.forEach(plate => {
                    plate.forEach(holes => {
                        if (holes % fraction.den === 0) {
                            hasSuitablePlate = true;
                        }
                    });
                });
                
                if (hasSuitablePlate) {
                    const diff = Math.abs(z - candidate);
                    if (diff < minDiff) {
                        minDiff = diff;
                        closest = candidate;
                    }
                }
            }
            
            return closest;
        }

        function createDiffInstructions(fraction, gearFraction, z, z0, isReverse) {
            const div = document.getElementById('diffInstructionSteps');
            div.innerHTML = '';
            
            div.innerHTML += `
                <div class="instruction-step" style="background: #ffe0b2;">
                    <div class="step-number">‚ö†Ô∏è</div>
                    <div><strong>–í—ã–∫–ª—é—á–∏—Ç–µ —Ñ–∏–∫—Å–∞—Ç–æ—Ä –¥–µ–ª–∏—Ç–µ–ª—å–Ω–æ–≥–æ –¥–∏—Å–∫–∞!</strong></div>
                </div>
                <div class="instruction-step" style="background: #e3f2fd;">
                    <div class="step-number">‚öôÔ∏è</div>
                    <div>–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–º–µ–Ω–Ω—É—é –≥–∏—Ç–∞—Ä—É —Å –æ—Ç–Ω–æ—à–µ–Ω–∏–µ–º <strong>${gearFraction.num}/${gearFraction.den}</strong> ${isReverse ? '(–æ–±—Ä–∞—Ç–Ω–æ–µ)' : ''}</div>
                </div>
                <div class="instruction-step">
                    <div class="step-number">1</div>
                    <div>–ü–æ–≤–æ—Ä–∞—á–∏–≤–∞–π—Ç–µ —Ä—É–∫–æ—è—Ç–∫—É –Ω–∞ <strong>${fraction.num}/${fraction.den} –æ–±–æ—Ä–æ—Ç–∞</strong></div>
                </div>
                <div class="instruction-step">
                    <div class="step-number">2</div>
                    <div>–î–∏—Å–∫ –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç—Ä–∞–∏–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ –≥–∏—Ç–∞—Ä—É</div>
                </div>
                <div class="instruction-step" style="background: #c8e6c9;">
                    <div class="step-number">üîÑ</div>
                    <div>–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ <strong>${z} —Ä–∞–∑</strong> –¥–ª—è –≤—Å–µ—Ö –¥–µ–ª–µ–Ω–∏–π</div>
                </div>
            `;
        }

        function findGearCombinations(targetNum, targetDen, type) {
            const listElement = document.getElementById(type === 'diff' ? 'diffGearsList' : 'threadGearsList');
            listElement.innerHTML = '';
            
            const combinations = [];
            const targetValue = targetNum / targetDen;
            
            // –ò—â–µ–º —Ç–æ—á–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è - 1 –ø–∞—Ä–∞
            availableGears.forEach(a => {
                availableGears.forEach(b => {
                    const value = a / b;
                    const fraction = reduceFraction(a, b);
                    
                    if (fraction.num === targetNum && fraction.den === targetDen) {
                        combinations.push({
                            type: 'single',
                            gears: [[a, b]],
                            value: value,
                            error: 0,
                            exact: true,
                            actualRatio: `${fraction.num}/${fraction.den}`
                        });
                    }
                });
            });
            
            // –ò—â–µ–º —Ç–æ—á–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è - 2 –ø–∞—Ä—ã
            if (combinations.filter(c => c.exact).length < 5) {
                availableGears.forEach(a => {
                    availableGears.forEach(b => {
                        availableGears.forEach(c => {
                            availableGears.forEach(d => {
                                const num = a * c;
                                const den = b * d;
                                const value = num / den;
                                const fraction = reduceFraction(num, den);
                                
                                if (fraction.num === targetNum && fraction.den === targetDen) {
                                    combinations.push({
                                        type: 'double',
                                        gears: [[a, b], [c, d]],
                                        value: value,
                                        error: 0,
                                        exact: true,
                                        actualRatio: `${fraction.num}/${fraction.den}`
                                    });
                                }
                            });
                        });
                    });
                });
            }
            
            // –ò—â–µ–º –ø—Ä–∏–±–ª–∏–∂–µ–Ω–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –µ—Å–ª–∏ —Ç–æ—á–Ω—ã—Ö –º–∞–ª–æ
            if (combinations.filter(c => c.exact).length < 3) {
                // 1 –ø–∞—Ä–∞ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–Ω–∞—è
                availableGears.forEach(a => {
                    availableGears.forEach(b => {
                        const value = a / b;
                        const error = Math.abs(value - targetValue) / targetValue;
                        
                        if (error > 0.0001 && error < 0.05) {
                            const fraction = reduceFraction(a, b);
                            combinations.push({
                                type: 'single',
                                gears: [[a, b]],
                                value: value,
                                error: error,
                                exact: false,
                                actualRatio: `${fraction.num}/${fraction.den}`
                            });
                        }
                    });
                });
                
                // 2 –ø–∞—Ä—ã –ø—Ä–∏–±–ª–∏–∂–µ–Ω–Ω—ã–µ
                availableGears.forEach(a => {
                    availableGears.forEach(b => {
                        availableGears.forEach(c => {
                            availableGears.forEach(d => {
                                const num = a * c;
                                const den = b * d;
                                const value = num / den;
                                const error = Math.abs(value - targetValue) / targetValue;
                                
                                if (error > 0.0001 && error < 0.02) {
                                    const fraction = reduceFraction(num, den);
                                    combinations.push({
                                        type: 'double',
                                        gears: [[a, b], [c, d]],
                                        value: value,
                                        error: error,
                                        exact: false,
                                        actualRatio: `${fraction.num}/${fraction.den}`
                                    });
                                }
                            });
                        });
                    });
                });
            }
            
            // –£–±–∏—Ä–∞–µ–º –¥—É–±–ª–∏–∫–∞—Ç—ã
            const unique = [];
            const seen = new Set();
            
            for (const combo of combinations) {
                let key;
                if (combo.type === 'single') {
                    key = `${combo.gears[0][0]}-${combo.gears[0][1]}`;
                } else {
                    // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–∞—Ä—ã –¥–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
                    const sorted = [[combo.gears[0][0], combo.gears[0][1]], [combo.gears[1][0], combo.gears[1][1]]].sort((a, b) => {
                        if (a[0] !== b[0]) return a[0] - b[0];
                        return a[1] - b[1];
                    });
                    key = `${sorted[0][0]}-${sorted[0][1]}-${sorted[1][0]}-${sorted[1][1]}`;
                }
                
                if (!seen.has(key)) {
                    seen.add(key);
                    unique.push(combo);
                }
            }
            
            // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞: —Ç–æ—á–Ω—ã–µ –ø–µ—Ä–≤—ã–µ, –ø–æ—Ç–æ–º –ø–æ –æ—à–∏–±–∫–µ
            unique.sort((a, b) => {
                if (a.exact && !b.exact) return -1;
                if (!a.exact && b.exact) return 1;
                if (a.type === 'single' && b.type === 'double') return -1;
                if (a.type === 'double' && b.type === 'single') return 1;
                return a.error - b.error;
            });
            
            // –í—ã–≤–æ–¥–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (–º–∞–∫—Å–∏–º—É–º 15)
            unique.slice(0, 15).forEach((combo, index) => {
                let html = '<div class="gear-option';
                if (index === 0 && combo.exact) {
                    html += ' best';
                }
                html += '">';
                
                // –ó–∞–≥–æ–ª–æ–≤–æ–∫
                if (combo.exact) {
                    html += '<div style="color: #2e7d32; font-weight: bold; margin-bottom: 5px;">‚úì –¢–æ—á–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ</div>';
                } else {
                    html += '<div style="color: #ff6f00; font-weight: bold; margin-bottom: 5px;">‚âà –ü—Ä–∏–±–ª–∏–∂–µ–Ω–Ω–æ–µ</div>';
                }
                
                // –®–µ—Å—Ç–µ—Ä–Ω–∏
                if (combo.type === 'single') {
                    html += `<div style="font-size: 16px; margin: 5px 0;">a = <strong>${combo.gears[0][0]}</strong>, b = <strong>${combo.gears[0][1]}</strong></div>`;
                    html += `<div style="color: #666;">–ü–µ—Ä–µ–¥–∞—á–∞: ${combo.gears[0][0]}/${combo.gears[0][1]}</div>`;
                } else {
                    html += `<div style="font-size: 16px; margin: 5px 0;">a = <strong>${combo.gears[0][0]}</strong>, b = <strong>${combo.gears[0][1]}</strong>, c = <strong>${combo.gears[1][0]}</strong>, d = <strong>${combo.gears[1][1]}</strong></div>`;
                    html += `<div style="color: #666;">–ü–µ—Ä–µ–¥–∞—á–∞: (${combo.gears[0][0]} √ó ${combo.gears[1][0]}) / (${combo.gears[0][1]} √ó ${combo.gears[1][1]})</div>`;
                }
                
                // –°–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ –∏ –æ—à–∏–±–∫–∞
                html += `<div style="margin-top: 8px; padding-top: 8px; border-top: 1px solid #ddd;">`;
                html += `<strong>–û—Ç–Ω–æ—à–µ–Ω–∏–µ:</strong> ${combo.actualRatio} = ${combo.value.toFixed(6)}<br>`;
                html += `<strong>–¢—Ä–µ–±—É–µ—Ç—Å—è:</strong> ${targetNum}/${targetDen} = ${targetValue.toFixed(6)}<br>`;
                
                if (combo.exact) {
                    html += `<strong style="color: #2e7d32;">–û—à–∏–±–∫–∞: 0% (—Ç–æ—á–Ω–æ)</strong>`;
                } else {
                    const errorPercent = (combo.error * 100).toFixed(4);
                    const errorColor = combo.error < 0.001 ? '#4caf50' : combo.error < 0.01 ? '#ff9800' : '#f44336';
                    html += `<strong style="color: ${errorColor};">–û—à–∏–±–∫–∞: ${errorPercent}%</strong>`;
                }
                html += `</div>`;
                
                html += '</div>';
                listElement.innerHTML += html;
            });
            
            if (unique.length === 0) {
                listElement.innerHTML = '<div class="warning">–ù–µ –Ω–∞–π–¥–µ–Ω–æ –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏–π —à–µ—Å—Ç–µ—Ä–µ–Ω. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–≤–æ–∏ —à–µ—Å—Ç–µ—Ä–Ω–∏ –Ω–∏–∂–µ.</div>';
            } else if (unique.length > 15) {
                listElement.innerHTML += `<div class="info-box" style="margin-top: 10px;">–ü–æ–∫–∞–∑–∞–Ω–æ 15 –ª—É—á—à–∏—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –∏–∑ ${unique.length} –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö</div>`;
            }
        }

        // ============ –ù–ê–†–ï–ó–ê–ù–ò–ï –†–ï–ó–¨–ë–´ ============
        function calculateThread() {
            const P = parseFloat(document.getElementById('threadPitch').value);
            const t = parseFloat(document.getElementById('screwPitch').value);
            const threadType = document.getElementById('threadType').value;
            
            if (isNaN(P) || isNaN(t) || P <= 0 || t <= 0) {
                alert('–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è!');
                return;
            }
            
            let ratio = P / t;
            let formula = `i = P / t = ${P} / ${t} = ${ratio.toFixed(4)}`;
            
            if (threadType === 'inch') {
                ratio = (25.4 / P) / (25.4 / t);
                formula = `i = (25.4 / P) / (25.4 / t) = ${ratio.toFixed(4)}`;
            } else if (threadType === 'modular') {
                ratio = (Math.PI * P) / t;
                formula = `i = (œÄ √ó m) / t = (œÄ √ó ${P}) / ${t} = ${ratio.toFixed(4)}`;
            }
            
            const multiplier = 1000;
            const num = Math.round(ratio * multiplier);
            const den = multiplier;
            const fraction = reduceFraction(num, den);
            
            document.getElementById('threadRatio').textContent = `${fraction.num}/${fraction.den} ‚âà ${ratio.toFixed(4)}`;
            document.getElementById('threadFormula').innerHTML = `<div class="formula">${formula}</div>`;
            
            createThreadInstructions(fraction, P, t, threadType);
            findGearCombinations(fraction.num, fraction.den, 'thread');
            
            document.getElementById('threadResults').style.display = 'block';
            document.getElementById('threadCheckSection').style.display = 'block';
        }

        function createThreadInstructions(fraction, P, t, threadType) {
            const div = document.getElementById('threadInstructionSteps');
            div.innerHTML = '';
            
            div.innerHTML += `
                <div class="instruction-step" style="background: #e3f2fd;">
                    <div class="step-number">üìè</div>
                    <div>–¢—Ä–µ–±—É–µ–º—ã–π —à–∞–≥: <strong>${P} –º–º</strong>, —à–∞–≥ –≤–∏–Ω—Ç–∞: <strong>${t} –º–º</strong></div>
                </div>
                <div class="instruction-step">
                    <div class="step-number">1</div>
                    <div>–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–º–µ–Ω–Ω—É—é –≥–∏—Ç–∞—Ä—É —Å –æ—Ç–Ω–æ—à–µ–Ω–∏–µ–º <strong>${fraction.num}/${fraction.den}</strong></div>
                </div>
                <div class="instruction-step">
                    <div class="step-number">2</div>
                    <div>–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ä–µ–∑–µ—Ü –Ω–∞ —Ç—Ä–µ–±—É–µ–º—ã–π —É–≥–æ–ª —Ä–µ–∑—å–±—ã</div>
                </div>
                <div class="instruction-step">
                    <div class="step-number">3</div>
                    <div>–í–∫–ª—é—á–∏—Ç–µ –≤–∏–Ω—Ç–æ—Ä–µ–∑–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º —Å—Ç–∞–Ω–∫–∞</div>
                </div>
                <div class="instruction-step" style="background: #c8e6c9;">
                    <div class="step-number">‚úì</div>
                    <div>–ù–∞—Ä–µ–∑–∞–π—Ç–µ —Ä–µ–∑—å–±—É —Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º –ø–µ—Ä–µ–¥–∞—Ç–æ—á–Ω—ã–º –æ—Ç–Ω–æ—à–µ–Ω–∏–µ–º</div>
                </div>
            `;
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        updateDiscSelection();
    </script>
</body>
</html>
